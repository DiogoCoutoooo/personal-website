;/*FB_PKG_DELIM*/

__d("getBufferedAheadOf",[],(function(t,n,r,o,a,i){function e(e){for(var t=.016666666666666666,n=e.currentTime,r=e.buffered,o=0;o<r.length;o++){var a=r.start(o)-t,i=r.end(o)+t;if(n>=a&&n<=i)return Math.max(r.end(o)-n,0)}return 0}i.default=e}),66);
__d("AbrEvaluationSignal",["EventEmitter","EventListener","SubscriptionsHandler","getBufferedAheadOf"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,o,a){var i,l;l=e.call(this)||this,l.$AbrEvaluationSignal$p_2=!0,l.$AbrEvaluationSignal$p_3=!1,l.$AbrEvaluationSignal$p_4=0,l.$AbrEvaluationSignal$p_5=0,l.$AbrEvaluationSignal$p_6=0,l.$AbrEvaluationSignal$p_9=t,l.$AbrEvaluationSignal$p_1=n,l.$AbrEvaluationSignal$p_10=o,l.$AbrEvaluationSignal$p_7=a,l.$AbrEvaluationSignal$p_8=new(r("SubscriptionsHandler"));var s=[r("EventListener").listen(l.$AbrEvaluationSignal$p_10,"adaptation",function(){return l.$AbrEvaluationSignal$p_11()})];return a.evaluateAbrOnTracksAndBandwidthChange&&(s.push(r("EventListener").listen(l.$AbrEvaluationSignal$p_10,"trackschanged",function(){return l.$AbrEvaluationSignal$p_12()})),s.push(r("EventListener").listen(l.$AbrEvaluationSignal$p_1.getEstimator(),"bandwidth",function(){return l.$AbrEvaluationSignal$p_13()}))),a.evaluateAbrOnFetchEnd&&s.push(r("EventListener").listen(l.$AbrEvaluationSignal$p_10,"fetch_end",l.$AbrEvaluationSignal$p_14.bind(l))),(i=l.$AbrEvaluationSignal$p_8).addSubscriptions.apply(i,s),l}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.notifySwitch=function(){this.$AbrEvaluationSignal$p_3=!0},n.destroy=function(){this.$AbrEvaluationSignal$p_8.release(),this.$AbrEvaluationSignal$p_8.engage(),this.removeAllListeners()},n.$AbrEvaluationSignal$p_11=function(){this.$AbrEvaluationSignal$p_3=!1,this.$AbrEvaluationSignal$p_6=Date.now()},n.$AbrEvaluationSignal$p_15=function(){return this.$AbrEvaluationSignal$p_7.useLowBufferVelocityInterval&&r("getBufferedAheadOf")(this.$AbrEvaluationSignal$p_9)<this.$AbrEvaluationSignal$p_7.lowBufferVelocityIntervalBufferThreshold},n.$AbrEvaluationSignal$p_14=function(t){var e=this.$AbrEvaluationSignal$p_4;this.$AbrEvaluationSignal$p_4=Date.now();var n=t.detail&&t.detail.stream_fetch_time_ms&&t.detail.segment_length_ms?{streamFetchTimeMs:t.detail.stream_fetch_time_ms,segmentLengthMs:t.detail.segment_length_ms}:void 0;this.$AbrEvaluationSignal$p_16(this.$AbrEvaluationSignal$p_7.ignoreRecentBandwidthEvalOnFetchEnd?e:this.$AbrEvaluationSignal$p_5,n)},n.$AbrEvaluationSignal$p_13=function(){this.$AbrEvaluationSignal$p_16(this.$AbrEvaluationSignal$p_5)},n.$AbrEvaluationSignal$p_16=function(t,n){if(this.$AbrEvaluationSignal$p_2&&this.$AbrEvaluationSignal$p_7.ignoreTimeLimitForInitialSample){this.$AbrEvaluationSignal$p_2=!1,this.$AbrEvaluationSignal$p_17(n);return}var e=this.$AbrEvaluationSignal$p_7.minEvalInterval,r=this.$AbrEvaluationSignal$p_7.minSwitchInterval;if(this.$AbrEvaluationSignal$p_15()&&(e=r=this.$AbrEvaluationSignal$p_7.lowBufferVelocityAbrInterval),!this.$AbrEvaluationSignal$p_3&&Date.now()>=t+e&&Date.now()>=this.$AbrEvaluationSignal$p_6+r){this.$AbrEvaluationSignal$p_17(n);return}},n.$AbrEvaluationSignal$p_12=function(){this.$AbrEvaluationSignal$p_17()},n.$AbrEvaluationSignal$p_17=function(t){var e=babelHelpers.extends({clearBufferIfUpgrading:!1,clearBufferOffset:0},t);this.emit("evaluate",e),this.$AbrEvaluationSignal$p_5=Date.now()},t})(r("EventEmitter"));l.default=e}),98);
__d("ActorURIConfig",[],(function(t,n,r,o,a,i){var e=Object.freeze({PARAMETER_ACTOR:"av",ENCRYPTED_PARAMETER_ACTOR:"eav"});i.default=e}),66);
__d("ActorURI",["ActorURIConfig","URI"],(function(t,n,r,o,a,i,l){var e;function s(t,n){return new(e||(e=r("URI")))(t).addQueryData(r("ActorURIConfig").PARAMETER_ACTOR,n)}l.create=s,l.PARAMETER_ACTOR=r("ActorURIConfig").PARAMETER_ACTOR}),98);
__d("BufferReplacementHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){return e.startTime>t-n&&e.endTime<t+r}function l(e,t,n,r){var o=r.get(e.startTime);return!!o&&n(t,o.id)>0}function s(t,n,r,o,a,i,s){for(var u=s.thresholdAfter,c=s.thresholdBefore,d=s.wrapReplacementPastEnd,m=[],p=!1,_=r;_<t.length;_++)if(e(t[_],n,c,u)&&l(t[_],o,a,i)&&m.push(t[_]),t[_].endTime>n+u){p=!0;break}if(!p&&d)for(var f=n+u-t[t.length-1].endTime,g=0;g<t.length&&(f-=t[g].endTime-t[g].startTime,f>=0&&l(t[g],o,a,i)&&m.push(t[g]),!(t[g].endTime>n+u));g++);return m}function u(t,n,r,o,a,i,s){for(var u=s.thresholdAfter,c=s.thresholdBefore,d=s.wrapReplacementPastEnd,m=[],p=r-1;p>=0&&(e(t[p],n,c,u)&&l(t[p],o,a,i)&&m.push(t[p]),!(t[p].startTime<n-c));p--);return m}function c(e,t,n,r,o,a,i){var l=[e,t,n,r,o,a,i];return s.apply(void 0,l).concat(u.apply(void 0,l))}i.getSegmentsToReplaceLowerQuality=c}),66);
__d("BufferVelocity",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=[],this.$2=e*1e3}var t=e.prototype;return t.recordBufferAhead=function(t){this.$1.push({bufferAhead:t,timestamp:Date.now()})},t.getVelocity=function(){if(this.$1.length<2)return null;var e=this.$1[this.$1.length-1],t=this.$3(),n=t.oldestValidEntry,r=t.oldestValidEntryIndex;return r!=null&&r>0&&this.$1.splice(0,r),n!=null?(e.bufferAhead-n.bufferAhead)/((e.timestamp-n.timestamp)/1e3):null},t.$3=function(){for(var e=null,t=null,n=0;n<this.$1.length-1&&(e=this.$1[n],!(this.$1[n].timestamp>=Date.now()-this.$2));n++)t=n;return{oldestValidEntry:e,oldestValidEntryIndex:t}},t.reset=function(){this.$1=[]},e})();i.default=e}),66);
__d("ByteRange",["oz-player/manifests/OzByteRange"],(function(t,n,r,o,a,i,l){"use strict";l.default=o("oz-player/manifests/OzByteRange")}),98);
__d("DeferredBuffer",["oz-player/networks/OzDeferredBuffer"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/networks/OzDeferredBuffer")}),98);
__d("ProducerInterruptedError",["oz-player/networks/OzProducerInterruptedError"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/networks/OzProducerInterruptedError")}),98);
__d("ReadableStream",[],(function(t,n,r,o,a,i){var e=self.ReadableStream;i.default=e}),66);
__d("WritableStream",[],(function(t,n,r,o,a,i){var e=self.WritableStream;i.default=e}),66);
__d("pipeErrorTo",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){try{e.error(t)}catch(e){}}i.default=e}),66);
__d("FixedSizeTransform",["invariant","Deferred","DeferredBuffer","MaybeNativePromise","ProducerInterruptedError","ReadableStream","WritableStream","pipeErrorTo"],(function(t,n,r,o,a,i,l,s){"use strict";var e=(function(){function e(e){e===void 0&&(e={}),this.$1=0,this.$4=0,this.$5=r("MaybeNativePromise").resolve(),this.$8=[];var t=e,n=t.disableDeferredBufferArrayShift,o=t.fixFixedSizeTransformOnNullEndByte,a=t.useNativePromiseInDeferredBuffer;this.$12=o||!1,this.$3=new(r("DeferredBuffer"))({disableArrayShift:!!n,useNativePromise:!!a})}var t=e.prototype;return t.cancel=function(t){this.$13(t),this.$7&&r("pipeErrorTo")(this.$7,t)},t.cancelAfterBytes=function(t,n){t<=this.$1?this.cancel(n):(this.$10=t,this.$11=n)},t.$13=function(t){this.$9=t,this.$6&&this.$6.reject(this.$9)},t.getSink=function(){var e=this;return this.$2||(this.$2=new(r("WritableStream"))({start:function(n){e.$7=n},write:function(n){n instanceof Uint8Array||s(0,3834),e.$3.produce(n),e.$1+=n.length,e.$10!=null&&e.$10<=e.$1&&e.cancel(e.$11)},close:function(){e.$3.signalProducerInterruption(),e.$2=null},abort:function(n){e.$3.produce(n)}})),this.$2},t.getNextFixedSizeStream=function(t){var e=this,n=t===void 0,o=0;if(this.$9)return r("MaybeNativePromise").reject(this.$9);this.$6=new(r("Deferred"))(r("MaybeNativePromise"));var a=this.$6.getPromise(),i=this.$5;return this.$5=a,i.then(function(){return new(r("ReadableStream"))({start:function(n){e.$8.push(n)},pull:function(i){if(!n&&e.$4===t)return e.$14(i);var a=n?void 0:(t||0)-e.$4;return e.$3.consume(a).then(function(t){i.enqueue(t),e.$4+=t.length}).catch(function(t){if(t instanceof r("ProducerInterruptedError"))return e.$12?n&&(e.$4>0||o>0)?e.$14(i):o++:n?e.$14(i):r("MaybeNativePromise").resolve();e.$13(t),e.$8.forEach(function(e){r("pipeErrorTo")(e,t)})})},cancel:function(n){e.$13(n),r("pipeErrorTo")(e.$7,n)}})})},t.$14=function(t){return t.close(),this.$4=0,this.$6.resolve(),r("MaybeNativePromise").resolve()},e})();l.default=e}),98);
__d("PausableRangeStream",["oz-player/networks/OzPausableRangeStream"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/networks/OzPausableRangeStream")}),98);
__d("ChunkableContinuousRangeStream",["ByteRange","Deferred","FixedSizeTransform","MaybeNativePromise","PausableRangeStream","ReadableStream","WritableStream"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$1=r("MaybeNativePromise").resolve(null),this.$2=null,this.$3=null,this.$5=[],this.$7=null,this.$9=!1,this.$10=!1,this.$12=!1,this.$13=!1,this.$14=!1,this.$15=!1,this.$16=!1,this.$17=!1,this.$18=!1,this.$19=!1,this.$20=!1,this.$4=e,t=t||{};var n=t,o=n.disableDeferredBufferArrayShift,a=n.disableStreamAutoStart,i=n.enableFactoryDestroy,l=n.enablePausableStreamResumeFromStart,s=n.enableStreamRangeConcat,u=n.fixFixedSizeTransformOnNullEndByte,c=n.fixPausePreReadableStream,d=n.fixStreamingUndefinedEndByte,m=n.useNativePromiseInDeferredBuffer;this.$12=!!a,this.$13=!!s,this.$14=!!o,this.$16=!!u,this.$15=!!m,this.$8=new(r("FixedSizeTransform"))({disableDeferredBufferArrayShift:this.$14,useNativePromiseInDeferredBuffer:this.$15,fixFixedSizeTransformOnNullEndByte:this.$16}),this.$17=!!d,this.$18=!!l,this.$19=!!c,this.$20=!!i}var t=e.prototype;return t.$21=function(){var e=this;if(this.$6&&(this.$6.resolve(null),this.$6=null),this.$3=null,this.$9=!0,this.$20){var t=[];this.$5.map(function(n){var o=e.$7;o&&r("ByteRange").startsAtSame(n.getByteRange(),o)&&t.push(n)}),this.$5=t}},t.isClosed=function(){return this.$9},t.getReservedChunkStream=function(t){if(this.isClosed())return r("MaybeNativePromise").reject();if(this.updateRangeStream(t),this.$7&&!r("ByteRange").startsImmediateAfter(t,this.$7))return this.destroy(),r("MaybeNativePromise").reject(new Error("Bad Range Request"));this.$7=t;var e=r("ByteRange").getLength(t);return this.$8.getNextFixedSizeStream(e===null?void 0:e)},t.$22=function(){var e="close stream";this.$7!=null&&this.$7.endByte!=null&&this.$11!=null?this.$8.cancelAfterBytes(this.$7.endByte-this.$11+1,e):this.$7||this.$8.cancel(e)},t.updateRangeStream=function(t){var e=this;if(this.isClosed())return"closed";if(!this.$23(t))return this.$1.then(function(){e.$22()}),this.$21(),"closed";if(!this.$2)this.$24(t);else{this.$3=this.$25(t);var n=this.$5[this.$5.length-1];this.$13&&this.$3!=null&&n&&n.tryConcatByteRange(this.$3)?this.$3=null:!this.$10&&this.$3!=null&&this.$24(this.$3)}return"streaming"},t.getCurrentStreamRange=function(){return this.$2},t.removeQueuedRange=function(){this.$3=null},t.$24=function(t){var e=this;this.$10=!0,this.$26(t).then(function(){if(e.$10=!1,e.$3){var t=e.$3;e.$3=null,e.$24(t)}}).catch(function(t){e.$10=!1})},t.getPausableStreamFactory=function(){var e=this;return function(){return e.$5.length?r("MaybeNativePromise").resolve(e.$5[0]):e.$6?e.$6.getPromise():r("MaybeNativePromise").resolve(null)}},t.$26=function(t){var e=this;this.$2=t,this.$11==null&&(this.$11=t.startByte);var n=new(r("Deferred"))(r("MaybeNativePromise"));this.$1=n.getPromise();var o=new(r("PausableRangeStream"))(r("ReadableStream"),r("WritableStream"),t,this.$4,{disableDeferredBufferArrayShift:this.$14,useNativePromiseInDeferredBuffer:this.$15,fixStreamingUndefinedEndByte:this.$17,enablePausableStreamResumeFromStartDangerously:this.$18,fixPausePreReadableStream:this.$19});this.$12?(o=this.$27(o,n),this.$5.push(o)):o.startStream().then(function(){n.resolve()});var a=o.getStream();return a.pipeTo(this.$8.getSink()).catch(function(t){throw e.$21(),t})},t.$27=function(t,n){var e=this,o=t.startStream;return t.startStream=function(){return o.call(t).then(function(o){var a=o.statusPromise;return n.resolve(),a=a.then(function(n){if(n!=="stream_paused"){var o=e.$5.indexOf(t);o>-1&&e.$5.splice(o,1)}return e.$3&&(e.$6=new(r("Deferred"))(r("MaybeNativePromise"))),n}),{statusPromise:a}})},this.$6&&(this.$6.resolve(t),this.$6=null),t},t.destroy=function(){this.$22(),this.$21()},t.$25=function(t){var e=t;return this.$3&&(e=r("ByteRange").union(this.$3,e)),e!=null&&this.$2&&(e=r("ByteRange").disjoinAfter(e,this.$2)),e},t.$23=function(t){return this.$2?this.$7?r("ByteRange").startsDuring(t,this.$7)||r("ByteRange").startsImmediateAfter(t,this.$7):r("ByteRange").startsAtSame(t,this.$2):!0},e})();l.default=e}),98);
__d("VideoPriorityCalculator",[],(function(t,n,r,o,a,i){"use strict";function e(){return 2}function l(t,n){var r=t.bufferEnd,o=t.isPlaying,a=t.playhead,i=r-a<=n?0:1,l=o?0:1;return e()-i-l}function s(t,n,r){var o=t.bufferEnd,a=t.playhead;if(!r)return l(t,n);var i=o-a;return i<=r?e():l(t,n)}i.getMaxPriority=e,i.calculate=l,i.calculateLive=s}),66);
__d("ContinuousPausableStreamTask",["Deferred","MaybeNativePromise","VideoPriorityCalculator","clearInterval","setInterval"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,o,a){n===void 0&&(n=0),o===void 0&&(o=null),a===void 0&&(a={}),this.$3=!1,this.$9=!1,this.$10=!1,this.$11=!1,this.$12=!1,this.$13=0,this.$14=0,this.$15=1,this.$16=new(r("Deferred"))(r("MaybeNativePromise")),this.$1=e,this.$4=t,this.$7=n,this.$5=o;var i=a,l=i.disableAudioStreamPause,s=i.lowPriTaskMinBytesToYield,u=i.lowPriTaskYieldCheckInterval,c=i.lowPriTaskYieldsPerTask,d=i.uncancellablePriority,m=i.yieldOnLowPriStream;this.$8=d==null?1/0:d,this.$11=!!l,this.$12=!!m,this.$13=u||0,this.$14=s||0,this.$15=c||1}var t=e.prototype;return t.run=function(){var e=this;if(this.$5){var t=this.$5.getOperationLogger("streaming_task").start();t.setType(this.$4),this.$6=t}var n=function(){return e.$2=null,e.$1().then(function(t){if(e.$2=t,e.$3&&e.$17(),!t){e.$6&&e.$6.setResult("done").log();return}var a=t.getBytesStreamed(),i=t.getByteRange(),l=i.endByte?(i.endByte-i.startByte)/e.$15:0;return t.startStream().then(function(i){var s=i.statusPromise,u,c=t;return e.$13&&c&&(u=r("setInterval")(function(){var t=c.getBytesStreamed()-a;e.$7<o("VideoPriorityCalculator").getMaxPriority()&&t>e.$14&&t>l&&(c.pauseStream(),r("clearInterval")(u))},e.$13)),s.then(function(t){if(r("clearInterval")(u),t==="stream_paused")e.$17();else if(t==="stream_aborted")throw e.$6&&e.$6.setResult("failed").log(),new Error("Stream operation failed with status: stream_aborted");return(e.$12&&e.$7<o("VideoPriorityCalculator").getMaxPriority()||e.$10)&&(e.$10=!1,e.$17()),n()}).catch(function(e){throw r("clearInterval")(u),e})})})};return n().then(function(){e.$16.resolve()}).catch(function(t){e.$16.reject(t)}),this.$16.getPromise()},t.getPromise=function(){return this.$16.getPromise()},t.updatePriority=function(t){this.$7=t,this.$9&&this.cancel()},t.cancel=function(){if(!(this.$11&&this.$4==="audio")){if(this.$7>=this.$8){this.$9=!0;return}this.$2&&this.$2.pauseStream(),this.$3=!0}},t.cancelOnCurrentStreamDone=function(){this.$10=!0},t.$17=function(){throw this.$6&&this.$6.setResult("cancelled").log(),new Error("cancelled")},e})();l.default=e}),98);
__d("XRlAbrControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/video/repomen/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("RlAbrUtils",["AsyncRequest","Promise","XRlAbrControllerRouteBuilder"],(function(t,n,r,o,a,i,l){var e,s=-1,u=8,c=["144p","240p","360p","480p","720p","1080p","1440p","2160p","4320p"],d="get_action",m="get_policy",p="put_exp";function _(e,t){if(t===void 0&&(t=!1),t){if(!e.endsWith("p")||e=="p")return null;var n=e.replace(/p$/,"");if(isNaN(n))return null;var r=parseInt(n,10);return r<=0||r>=4320?null:r<162?"label_0":r<210?"label_1":r<315?"label_2":r<420?"label_3":r<590?"label_4":r<780?"label_5":r<1260?"label_6":r<1520?"label_7":r<1880?"label_8":"label_9"}var o=parseInt(e,10);return isNaN(o)||o<=0?null:c.find(function(e){return o<=parseInt(e,10)})||c[c.length-1]}function f(e,t,n,r,o,a){for(var i=[],l=0;l<t.length;l++){var s=_(t[l].fbQualityLabel);if(s){var d=t[l].bandwidth;(!d||d<=0)&&(d=1e9),i.push({label:s,bitrate:d})}}var m=c.map(function(e){var t=i.find(function(t){return t.label===e});return t?t.bitrate:1e9}),p=null,f=0,g=0;n&&(p=_(n.fbQualityLabel),f=n.bandwidth||0,g=n.isHVQ?1:0);for(var h=c.map(function(e){return e===p?1:0}),y=e.currentTime||0,C=e.duration||0,b=Math.max(C-y,0)*1e3,v=[].concat(f,h,g,o,b),S=[],R=0;R<u;R++)R<r.length?S.push(r[r.length-R-1][0]||0,r[r.length-R-1][1]||0):S.push(0,0);return[].concat(m,v,S,a)}function g(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].bandwidth);return t}function h(e){var t=e.duration,n=e.currentTime;return!isNaN(t)&&!isNaN(n)&&t>n?(t-n)*1e3:-1}function y(e,t,n,r,o){var a=h(e),i=[];if(o){o.update(Date.now());var l=o.getWatchTimeSinceLastReport(),s=o.getStallCountSinceLastReport(),u=o.getStallTimeSinceLastReport(),c=o.getBufferedTimeSinceLastReport();i.push(l),i.push(c),i.push(s),i.push(u)}else i.push(-1,-1,-1,-1);return[].concat(r,n,a,i)}function C(e,t,n,r){for(var o=Array(10).fill(s),a=!1,i=t.length-1;i>=0;i--){var l=_(t[i].fbQualityLabel,!0);if(l){a=!0;var u=parseInt(l.substr(-1,1),10);o[u]=t[i].bandwidth}}if(!a)return null;var c=h(e);return[].concat(r,n,c,o)}function b(e,t){if(t.length===0)return[];if(!e)e=t;else if(t.length!==e.length)return[];var n=t[t.length-1]-e[e.length-1];return[].concat(e.slice(0,e.length-1),t.slice(0,t.length-1),n)}function v(t,o,a){var i={reason:d,id:a,query:[t[0],t[1],t[2]],label_0:t[3]!==s?t[3]:void 0,label_1:t[4]!==s?t[4]:void 0,label_2:t[5]!==s?t[5]:void 0,label_3:t[6]!==s?t[6]:void 0,label_4:t[7]!==s?t[7]:void 0,label_5:t[8]!==s?t[8]:void 0,label_6:t[9]!==s?t[9]:void 0,label_7:t[10]!==s?t[10]:void 0,label_8:t[11]!==s?t[11]:void 0,label_9:t[12]!==s?t[12]:void 0},l=r("XRlAbrControllerRouteBuilder").buildUri(i);return new(e||(e=n("Promise")))(function(e,t){new(r("AsyncRequest"))(l).setMethod("GET").setURI(l).setReadOnly(!0).setHandler(function(t){var n=t.payload.data;e(n||[])}).setErrorHandler(function(e){t([])}).setTimeoutHandler(o,function(e){t([])}).send()})}function S(t,o,a,i){var l=b(t,o),s=r("XRlAbrControllerRouteBuilder").buildUri({reason:d,id:i,query:l});return new(e||(e=n("Promise")))(function(e,t){new(r("AsyncRequest"))(s).setMethod("GET").setURI(s).setReadOnly(!0).setHandler(function(t){var n=t.payload.data;e(n||[])}).setErrorHandler(function(e){t([])}).setTimeoutHandler(a,function(e){t([])}).send()})}function R(t,o,a,i){var l=r("XRlAbrControllerRouteBuilder").buildUri(babelHelpers.extends({reason:d},i!=null?{session_id:i}:{},{query:t,bitrates:o}));return new(e||(e=n("Promise")))(function(e,t){new(r("AsyncRequest"))(l).setMethod("GET").setURI(l).setReadOnly(!0).setHandler(function(t){var n=t.payload.data;e(n||[])}).setErrorHandler(function(e){t([])}).setTimeoutHandler(a,function(e){t([])}).send()})}function L(t,o,a){var i={reason:m};t!=null&&(i.session_id=t),o!=null&&(i.smc_tier=o);var l=r("XRlAbrControllerRouteBuilder").buildUri(i);return new(e||(e=n("Promise")))(function(e,t){new(r("AsyncRequest"))(l).setMethod("GET").setURI(l).setReadOnly(!0).setHandler(function(t){var n=t.payload.model_id,r=t.payload.weights,o=t.payload.biases;e([n,r,o])}).setErrorHandler(function(e){t([])}).setTimeoutHandler(a,function(e){t([])}).send()})}function E(t,o,a,i,l,s,u,c,d,m){var _={reason:p,model_id:a,mdp_step:i,query:l,bitrates:s,prev_reward:u,action:c,action_prob:d};o!=null&&(_.smc_tier=o),t!=null&&(_.session_id=t);var f=r("XRlAbrControllerRouteBuilder").buildUri(_);return new(e||(e=n("Promise")))(function(e,t){new(r("AsyncRequest"))(f).setMethod("GET").setURI(f).setReadOnly(!0).setHandler(function(t){e([])}).setErrorHandler(function(e){t([])}).setTimeoutHandler(m,function(e){t([])}).send()})}l._unavailableBitrate=s,l._networkFeatureCount=u,l._labelBrackets=c,l._reasonGetAction=d,l._reasonGetPolicy=m,l._reasonPutExperience=p,l.getQualityLabelBracket=_,l.getRlAbrFeaturesDeprecated=f,l.getRlAbrAvailableBitrates=g,l.getRemainingPlayback=h,l.getRlAbrFeatures=y,l.getRlAbrShortFeatures=C,l._getRlQuery=b,l.genRlAbrShortFeaturesRecommendation=v,l.genRlAbrRecommendationDeprecated=S,l.genRlAbrRecommendation=R,l.fetchRlAbrModel=L,l.putExperience=E}),98);
__d("RlAlgebra",["Random"],(function(t,n,r,o,a,i,l){function e(e,t){if(e.length===0||e[0].length===0||t.length===0)throw new Error("Matrix or vector has 0 size.");for(var n=[],r=0;r<e.length;r++){if(e[r].length!==t.length)throw new Error("Matrix and vector not compatible");for(var o=0,a=0;a<t.length;a++)o+=e[r][a]*t[a];n.push(o)}return n}function s(e,t){if(e.length!==t.length)throw new Error("Two vectors have different length");for(var n=[],r=0;r<e.length;r++)n.push(e[r]+t[r]);return n}function u(e){for(var t=[],n=0;n<e.length;n++)e[n]>0?t.push(e[n]):t.push(0);return t}function c(e){if(e.length===0)throw new Error("vector length is 0");for(var t=[],n=0,r=Math.max.apply(Math,e),o=0;o<e.length;o++){var a=Math.exp(e[o]-r);t.push(a),n+=a}for(var i=0;i<e.length;i++)t[i]/=n;return t}function d(e,t){if(t===void 0&&(t=1e-6),e.length===0)throw new Error("vector length is 0");for(var n=1/t,r=[],a=0,i=0;i<e.length;i++)a+=e[i],r.push(a);if(Math.abs(r[r.length-1]-1)>t)throw new Error("probability distribution does not sum to 1");for(var l=(Math.floor(o("Random").random()*n)+1)/n,s=-1,u=0;u<r.length;u++)if(l<=r[u]){s=u;break}return s}function m(t,n,r,o){for(var a=[],i=0;i<o.length;i++){for(var l=[].concat(r,o[i]),d=l,m=0;m<t.length;m++)d=e(t[m],d),d=s(d,n[m]),m<t.length-1&&(d=u(d));a.push(d[0])}return c(a)}l.matrixMultiply=e,l.vectorAdd=s,l.vectorRelu=u,l.vectorSoftmax=c,l.vectorSample=d,l.policyInference=m}),98);
__d("RlAbrModel",["RlAbrUtils","RlAlgebra","ShakaConstants","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=e,this.$2=[],this.$3=0,this.$4=0}var t=e.prototype;return t.$5=function(t,n){var e,o=n[3],a=n[4],i=n[5],l=n[6],s=0;return s=this.$3*a*(e=r("ShakaConstants")).numbers.rl_bitrate_reward+o*e.numbers.rl_watch_time_reward-i*e.numbers.rl_stall_count_penalty-l*e.numbers.rl_stall_time_penalty,this.$3=t,s},t.fetchIfNotExist=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){this.$2.length===0&&(this.$2=yield o("RlAbrUtils").fetchRlAbrModel(e,t,n))});function t(t,n,r){return e.apply(this,arguments)}return t})(),t.getPolicyReportExperience=function(t,n,a,i,l,s){for(var e=[].concat(a[0]/r("ShakaConstants").numbers.rl_bandwidth_scale,a[1]/r("ShakaConstants").numbers.rl_buffer_scale,a[2]/r("ShakaConstants").numbers.rl_playback_scale),u=[],c=0;c<i.length;c++)u.push(i[c]/r("ShakaConstants").numbers.rl_bandwidth_scale);var d=o("RlAlgebra").policyInference(this.$2[1],this.$2[2],e,u),m=o("RlAlgebra").vectorSample(d);if(m>=l.length)throw new Error("RL chooses unavailable bitrate.");var p=this.$5(u[m],a);return o("RlAbrUtils").putExperience(t,n,String(this.$2[0]),this.$4,a,i,p,m,d,s),this.$4+=1,m},t.modelFetched=function(){return this.$2.length===3},e})();l.default=e}),98);
__d("FirstLoadedVideoPriorityAdjuster",["EventListener","SubscriptionsHandler"],(function(t,n,r,o,a,i,l){"use strict";var e=null,s=(function(){function t(t){var n=this;this.$1=function(){},this.$2=new(r("SubscriptionsHandler")),this.$3=!1,this.$4=!1,e===null&&(e=t,this.$4=!0,this.$2.addSubscriptions(r("EventListener").listen(t,"playing",function(){n.$3=!0,n.$1&&n.$1(n.getPriorityAdjustment()),n.cleanup()})))}var n=t.prototype;return n.setOnPriorityChanged=function(t){this.$1=t},n.getPriorityAdjustment=function(){return this.$4&&!this.$3?.5:0},n.cleanup=function(){this.$2.release(),this.$1=function(){}},t})();l.default=s}),98);
__d("UnitConstants",[],(function(t,n,r,o,a,i){"use strict";var e=8;i.BITS_IN_BYTE=e}),66);
__d("LocalBitrateHelper",["UnitConstants"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(!e[t])return null;if(e[t].startTime>n)return t;for(;t<e.length;){if(e[t].startTime>n)return t;t++}return null}function s(e,t,n){if(t>=e.length||t<0)return null;n=t+n>=e.length?e.length-t-1:n;var r=e[t],a=e[t+n],i=r.url.startByte,l=a.url.endByte;return i===void 0||l===void 0?null:Math.round((l-i)/(a.endTime-r.startTime)*o("UnitConstants").BITS_IN_BYTE)}l.getBufferEndSegmentIndex=e,l.getLocalBitrate=s}),98);
__d("ShakaSegmentReferenceHelper",["BinarySearch","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=.001;function s(t,n){for(var r=t.length-1;r>=0;--r){var o=t[r];if(Math.abs(n-o.startTime)<e)return r}return-1}function u(e,t){var n=s(e,t);if(n>-1)return n;for(var o=e.length-1;o>=0;--o){var a=e[o];if(t>=a.startTime&&t<a.endTime)return r("FBLogger")("shaka").warn("Segment reference have no matching start time %s, %d",JSON.stringify(a),t),o}return-1}function c(e,t){var n=u(e,t.startTime);return n>=0?(e.splice(n,0,t),n+1):(e.push(t),e.length)}function d(e,t){var n=e.startByte,r=o("BinarySearch").leastUpperBound(function(e){var n=t[e];return n.url.startByte},n,0,t.length,function(e,t){return e-t}),a=t[r];return a&&a.url.baseUrl===e.baseUrl&&a.url.startByte===e.startByte&&a.url.endByte===e.endByte?r:-1}l.findIndexByStartTimeExact=s,l.findIndexByStartTime=u,l.insertReference=c,l.findIndexByRequestInfo=d}),98);
__d("MultipleSegmentsProvider",["invariant","ShakaSegmentReferenceHelper","VideoPlayerShakaGlobalConfig","emptyFunction"],(function(t,n,r,o,a,i,l,s){"use strict";var e=(function(){function e(e){this.$2=[],this.$3=[],this.$4=0,this.$5=r("emptyFunction"),this.$1=e}var t=e.prototype;return t.getNumberOfSegments=function(){var e=this.$1;return this.$1=Math.max(this.$1-o("VideoPlayerShakaGlobalConfig").getNumber("multi_segment_decay",0),1),Math.ceil(e)},t.setFutureSegments=function(t){this.$2=t},t.setOnSegmentsUpdated=function(t){this.$5=t},t.clearOnSegmentsUpdated=function(){this.setOnSegmentsUpdated(r("emptyFunction"))},t.setSegments=function(t){var e=this.$3;this.$3=t,this.$5(e,t)},t.isRequestInBufferTarget=function(t,n){var e=o("ShakaSegmentReferenceHelper").findIndexByRequestInfo(t,this.$3);if(e<0)return!1;var r=this.$3[e];return r.startTime<n.bufferStart+n.bufferingGoal},t.setBufferingGoal=function(t){this.$4=t},t.$6=function(t){var e=[],n=o("ShakaSegmentReferenceHelper").findIndexByRequestInfo(t,this.$3);if(n>=0)for(var r=Math.min(this.$3.length,n+this.$1),a=n;a<r;a++)e.push(this.$3[a]);if(!e.length)return[{startByte:t.startByte,endByte:t.endByte}];var i=e[0],l=e[e.length-1];return[{startByte:i.url.startByte||0,endByte:l.url.endByte}]},t.getFetchRanges=function(t){var e=this.$2;if(e.length===0)return this.$6(t);e.length>0||s(0,1467);var n=e[0],r=e[e.length-1];return r.url.baseUrl!==n.url.baseUrl?[{startByte:n.url.startByte,endByte:n.url.endByte}]:[{startByte:n.url.startByte||0,endByte:r.url.endByte}]},t.getNextRequestInfo=function(t){var e=this.$3.findIndex(function(e){return e.url.baseUrl===t.baseUrl&&e.url.startByte===t.startByte}),n=this.$3[e+1];return n?{baseUrl:n.url.baseUrl,startByte:n.url.startByte,endByte:n.url.endByte}:null},t.getSegmentsBoundaries=function(t){return this.$2.length===0?[{startByte:t.startByte,endByte:t.endByte}]:(this.$2.length>0||s(0,1467),this.$2.map(function(e){var t=e.url,n=t.endByte,r=t.startByte;return{startByte:r||0,endByte:n}}))},t.getTimeRange=function(t){var e={startTime:null,endTime:null};return this.$2.forEach(function(n){var r=n.url;r&&(r.startByte===t.startByte&&(e.startTime=n.startTime),r.endByte===t.endByte&&(e.endTime=n.endTime))}),e},e})();l.default=e}),98);
__d("NetworkStatusDetector",["EventEmitter","clearInterval","setIntervalAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e=1e3,s=9999,u=(function(t){function n(){var n;return n=t.call(this)||this,n.$NetworkStatusDetector$p_3=!0,n.$NetworkStatusDetector$p_4=!1,n.$NetworkStatusDetector$p_2=Date.now(),n.$NetworkStatusDetector$p_1=r("setIntervalAcrossTransitions")(function(){return n.$NetworkStatusDetector$p_5()},e),n}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.destroy=function(){r("clearInterval")(this.$NetworkStatusDetector$p_1)},o.$NetworkStatusDetector$p_5=function(){var e=this.$NetworkStatusDetector$p_2;this.$NetworkStatusDetector$p_2=Date.now();var t=this.$NetworkStatusDetector$p_3;this.$NetworkStatusDetector$p_3=this.getOnLineStatus(),this.emitIfOnLineStateChanges(e,this.$NetworkStatusDetector$p_2,t,this.$NetworkStatusDetector$p_3)},o.emitIfOnLineStateChanges=function(t,n,r,o){!r&&o?this.emit("onLine"):r&&!o&&this.emit("offLine");var e=s;n-t>e&&this.emit("systemWake",{sleepStartTime:t,sleepEndTime:n})},o.informNetworkInterrupted=function(){this.$NetworkStatusDetector$p_4||(this.$NetworkStatusDetector$p_4=!0,this.emit("networkInterrupted"))},o.informNetworkResumed=function(){this.$NetworkStatusDetector$p_4&&(this.$NetworkStatusDetector$p_4=!1,this.emit("networkResumed"))},o.isNetworkInterrupted=function(){return this.$NetworkStatusDetector$p_4},o.getOnLineStatus=function(){return window&&window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!0},n})(r("EventEmitter"));l.default=u}),98);
__d("VideoSegmentInfoHelper",["URI","VideoAkamaiRequestHelper","VideoDashPrefetchCache","XHRRequest","getCrossOriginTransport"],(function(t,n,r,o,a,i){"use strict";var e;function l(e){var t=e.requestInfo,r=new(n("XHRRequest"))(u(t)).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(n("getCrossOriginTransport")),o=/livestream\-lookaside\.(facebook|workplace)\.com$/,a=o.test(r.getURI().getDomain());if(a&&r.setTransportBuilder(n("getCrossOriginTransport").withCredentials),n("VideoAkamaiRequestHelper").isAkamai(t.baseUrl)){var i=n("VideoAkamaiRequestHelper").getRequestHeaders(t);i&&Object.keys(i).forEach(function(e){r.setRequestHeader(e,i[e])})}return r}function s(e){var t=e.requestInfo,n=t.endByte,r=t.startByte;return r&&n?n-r:null}function u(t){var r=t.baseUrl,o=t.endByte,a=t.isPredictive,i=t.startByte,l=new(e||(e=n("URI")))(r);if(a&&(l=l.addQueryData({_nc_sc:1})),!n("VideoAkamaiRequestHelper").isAkamai(t.baseUrl)){if(i===0&&o==null)return l;l=l.addQueryData({bytestart:i}),o!=null&&(l=l.addQueryData({byteend:o}))}return l}function c(e){return n("VideoDashPrefetchCache").hasCacheValue(u(e.requestInfo).toString())}function d(e){return e.baseUrl+","+(e.startByte||0)+(","+(e.endByte||0))}a.exports={createRequest:l,estimateRequestSize:s,getRequestUri:u,isPrefetchedRequest:c,getRequestCacheKey:d}}),null);
__d("SegmentsUpdateHelper",["ODS","ShakaConstants","VideoSegmentInfoHelper"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){this.$1=e,this.$2=t}var n=t.prototype;return n.updateSegments=function(n,r){var e=this;if(r.length){for(var o=this.$2.get(n)||[],a=o[o.length-1],i=a?a.startTime:-1,l=r.length;l>0;){var s=r[l-1];if(s.startTime<=i)break;l--}var u=r.slice(l),c=r.slice(0,l);this.$3(o,c);var d=u.map(function(e){return t.createSegmentInfo(e)});d.forEach(function(t){e.$4(t),o.push(t)}),this.$2.set(n,o)}},t.createSegmentInfo=function(t){var e=t.endTime,n=t.startTime,r=t.unscaledDuration,o=t.unscaledStartTime,a=t.url,i=a.baseUrl,l=a.endByte,s=a.isPredictive,u=a.startByte;return{segmentID:0,startTime:n,endTime:e,requestInfo:{baseUrl:i,isPredictive:s,startByte:u,endByte:l||void 0},unscaledStartTime:o,unscaledDuration:r}},n.$5=function(t,n){var e=n.endTime,r=n.startTime,o=n.unscaledDuration,a=n.unscaledStartTime,i=n.url,l=i.baseUrl,s=i.endByte,u=i.startByte;t.segmentID=0,t.startTime=r,t.endTime=e;var c=t.requestInfo;return c.baseUrl=l,c.startByte=u,c.endByte=s||void 0,t.unscaledStartTime=a,t.unscaledDuration=o,t},n.$3=function(a,i){if(i.length)for(var n=i.length,l=function(){var e=i[n-1]||null;return n--,e},s=l(),u=Number.POSITIVE_INFINITY,c=0;c<=a.length&&s!=null;c++){var d=a.length-c,m=a[d-1],p=d>=1?m.startTime:Number.NEGATIVE_INFINITY,_=void 0;if(p<=s.startTime&&s.endTime<=u){if(p===s.startTime){var f=o("VideoSegmentInfoHelper").getRequestCacheKey(m.requestInfo);_=this.$5(m,s);var g=o("VideoSegmentInfoHelper").getRequestCacheKey(_.requestInfo);g!==f&&(this.$1.delete(f),this.$4(_))}else{_=t.createSegmentInfo(s),this.$4(_),a.splice(d,0,_),p=_.startTime;var h=r("ShakaConstants").strings.segment_update_helper_splice_path_entity_key;if(h){var y=s.unscaledStartTime,C=s.unscaledDuration;typeof y=="number"&&typeof C=="number"&&_.unscaledStartTime===y&&_.unscaledDuration===C&&(e||(e=o("ODS"))).bumpEntityKey(2966,"videos.www.shaka",h)}}s=l(),s!=null&&c+1>a.length&&c--}u=p}},n.$4=function(t){var e=o("VideoSegmentInfoHelper").getRequestCacheKey(t.requestInfo);this.$1.set(e,t)},t})();l.default=s}),98);
__d("TrackedPromise",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=window.Promise||e||(e=n("Promise"));(e||(e=n("Promise"))).resolve();var s=(function(){function e(e,t){var n=this;this.$3=!1,this.$1="pending",this.$2=e.then(function(e){return n.$1="fulfilled",e},function(e){return n.$1="rejected",l.reject(e)})}var t=e.prototype;return t.getPromise=function(){return this.$3=!0,this.$2},t.isPending=function(){return this.$1==="pending"},t.getState=function(){return this.$1},e})();i.default=s}),66);
__d("VideoSegmentPromiseBuffer",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.appendSegmentPromise=function(t,n){return this.$1.set(t,n),this},t.hasSegmentPromise=function(t){return this.$1.has(t)},t.getSegmentPromise=function(t){var e=this.$1.get(t)||null;return e&&e.getState()==="rejected"&&this.$1.delete(t),e},t.hasOtherPendingSegments=function(t){var e=new Set(t);return Array.from(this.$1.entries()).some(function(t){return t[1].isPending()&&!e.has(t[0])})},t.isFirstPendingSegment=function(t){var e=this.$1.get(t);if(!e||!e.isPending())return!1;var n;for(var r of this.$1.entries())if(r[1].isPending()){n=r[0];break}return n===t},t.clearAllSegmentPromises=function(){return this.$1.clear(),this},t.removeSegmentPromisesOlderThan=function(t,n){if(!this.hasSegmentPromise(t)){this.$1.clear();return}for(var e of this.$1.keys()){if(e===t)return;this.$1.delete(e)}},t.removeSegmentPromise=function(t){this.$1.delete(t)},e})();i.default=e}),66);
__d("VideoClientEdgeCooperation",["clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){var e=r("gkx")("26221"),s="X-FB-CEC-Video-Limit".toLowerCase(),u=1e3*60*2,c=/[\r\n]+/,d=null,m=null;function p(){d=null,r("clearTimeout")(m),m=null}function _(e){f(e.getAllResponseHeaders())}function f(t){if(e){var n=t.trim().split(c);n.forEach(function(e){var t=e.split(": "),n=t.shift().toLowerCase(),r=t.shift();n===s&&h(r)})}}function g(t){if(e){var n=t.headers;if(n.has(s)){var r=n.get(s);r&&h(r)}}}function h(e){var t=e.match("s:([\\.0-9]+)");if(t){var n=Number(t[1]);d===null&&(d=n),n<=d&&(d=n,r("clearTimeout")(m),m=r("setTimeoutAcrossTransitions")(p,u))}}function y(t,n){return e&&d!==null?Math.min(t,n)*d:t}l.updateFromXHR=_,l.updateFromHeaders=f,l.updateFromResponse=g,l._updateFromLimitHeader=h,l.applyBandwidthLimit=y}),98);
__d("NetworkRequestPipelineStats",[],(function(t,n,r,o,a,i){"use strict";var e=5,l=.5,s=30,u=(function(){function t(){this.$1={},this.$2={},this.$3=0,this.$4=new Set}var n=t.prototype;return n.addEntry=function(t,n){if(this.$3=Math.max(this.$3,t),!!n){this.$1[t]=n;var e=this.$1[t-1];!this.$4.has(t-1)&&e&&this.$5(e,n,t);var r=this.$1[t+1];!this.$4.has(t)&&r&&this.$5(n,r,t+1)}},n.setNetworkIdle=function(){this.$4.add(this.$3)},n.$5=function(t,n,r){this.$2[r]=n.startTime+n.timeToFirstByte-(t.startTime+t.timeToLastByte)},n.getBandwidthAlignments=function(){return this.$2},n.getBandwidthUtilization=function(){var e=this,t=0,n=0;return Object.keys(this.$2).forEach(function(r){var o=Number.parseInt(r,10),a=e.$2[o],i=e.$1[o],l=i.timeToLastByte-i.timeToFirstByte;t+=l,n+=Math.max(0,a)+l}),t/Math.max(1,n)},n.$6=function(t){for(var e=[],n=0;;){var r=this.$1[this.$3-n];if(!r)break;r.timeToLastByte-r.timeToFirstByte>=s&&e.push(r),n++}return e},n.getEstimatedDownloadTime=function(n){if(n){var t=this.$7();return t?n/t:0}return this.$8(function(e){return e.timeToLastByte-e.timeToFirstByte},{lastN:e,defaultValue:0})},n.$7=function(){return this.$8(function(e){return e.transferSize/(e.timeToLastByte-e.timeToFirstByte||1)},{lastN:e,defaultValue:0})},n.$8=function(t,n){var e=n.defaultValue,r=n.lastN,o=this.$6(r);return o.length?o.reverse().reduce(function(e,n){return l*t(n)+(1-l)*e},t(o[0])):e},n.getEstimatedTimeToFirstByte=function(){return this.$8(function(e){return e.timeToFirstByte},{lastN:e,defaultValue:5e3})},n.getOptimisticTimeToFirstByte=function(){var t=this.$6(e);if(!t.length)return 0;var n=Math.min.apply(Math,t.map(function(e){return e.timeToFirstByte})),r=this.$8(function(e){return e.timeToFirstByte},{lastN:e,defaultValue:5e3});return(n+r)/2},t})();i.default=u}),66);
__d("VideoPlayerResourceTimer",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n,r){if(performance.getEntriesByType){var e=performance.getEntriesByName(t,"resource"),o=[];if(e.forEach(function(e){typeof e.responseEnd=="number"&&typeof e.responseStart=="number"&&typeof e.requestStart=="number"&&typeof e.connectEnd=="number"&&typeof e.connectStart=="number"&&typeof e.domainLookupEnd=="number"&&typeof e.domainLookupStart=="number"&&typeof e.transferSize=="number"&&e.responseEnd<=r&&e.startTime>=n&&o.push({entry:{timeToFirstByte:e.responseStart-e.startTime,timeToLastByte:e.responseEnd-e.startTime,timeToRequestStart:e.requestStart-e.startTime,timeToConectionEnd:e.connectEnd-e.startTime,timeToConnectionStart:e.connectStart-e.startTime,timeToDomainLookupEnd:e.domainLookupEnd-e.startTime,timeToDomainLookupStart:e.domainLookupStart-e.startTime,transferSize:e.transferSize,startTime:e.startTime},sort:e.responseEnd})}),o.sort(function(e,t){return t.sort-e.sort}),o.length)return o[0].entry}return null};i.getResourceTimingEntry=e}),66);
__d("getXHRRequestHandlerHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){var o=t.call(e);n.call(e,Object.assign(function(){o&&o.apply(void 0,arguments),r.apply(void 0,arguments)},o,r))}var l=(function(){function t(e){this.$1=e}var n=t.prototype;return n.addResponseHandler=function(n){return e(this.$1,this.$1.getResponseHandler,this.$1.setResponseHandler,n),this},n.addAbortHandler=function(n){return e(this.$1,this.$1.getAbortHandler,this.$1.setAbortHandler,n),this},n.addErrorHandler=function(n){return e(this.$1,this.$1.getErrorHandler,this.$1.setErrorHandler,n),this},n.addTimeoutHandler=function(n){return e(this.$1,this.$1.getTimeoutHandler,this.$1.setTimeoutHandler,n),this},n.addNetworkFailureHandler=function(n){return e(this.$1,this.$1.getNetworkFailureHandler,this.$1.setNetworkFailureHandler,n),this},t})();function s(e){return new l(e)}i.default=s}),66);
__d("NetworkRequestPipeline",["EventEmitter","NetworkRequestPipelineStats","VideoPlayerResourceTimer","clearTimeout","getXHRRequestHandlerHelper","performanceNow","setTimeoutAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e,s=2,u=1,c=(function(t){function n(e,n){var o;o=t.call(this)||this,o.$NetworkRequestPipeline$p_1=s,o.$NetworkRequestPipeline$p_2=u,o.$NetworkRequestPipeline$p_3=0,o.$NetworkRequestPipeline$p_4=new(r("NetworkRequestPipelineStats")),o.$NetworkRequestPipeline$p_5=0,o.$NetworkRequestPipeline$p_9=null,o.$NetworkRequestPipeline$p_10=null,o.$NetworkRequestPipeline$p_11=0,o.$NetworkRequestPipeline$p_13=function(){o.$NetworkRequestPipeline$p_12||(o.$NetworkRequestPipeline$p_12=o.$NetworkRequestPipeline$p_14(),o.$NetworkRequestPipeline$p_10=null,o.$NetworkRequestPipeline$p_15())},o.$NetworkRequestPipeline$p_6=e;var a=n||{},i=a.fixFinishRequest,l=a.maxConcurrentRequests,c=a.requestTimeout,d=a.soothingFactor,m=a.xhrHandleNetworkFailure;return o.$NetworkRequestPipeline$p_7=!!m,o.$NetworkRequestPipeline$p_8=!!i,o.$NetworkRequestPipeline$p_6.setOnItemAdded(o.$NetworkRequestPipeline$p_13),l!==void 0&&(o.$NetworkRequestPipeline$p_1=l),d!==void 0&&(o.$NetworkRequestPipeline$p_2=d),c!==void 0&&(o.$NetworkRequestPipeline$p_11=c),o.$NetworkRequestPipeline$p_13(),o}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.$NetworkRequestPipeline$p_16=function(){var e=this.$NetworkRequestPipeline$p_3;return this.$NetworkRequestPipeline$p_3++,e},a.$NetworkRequestPipeline$p_15=function(){if(this.$NetworkRequestPipeline$p_12&&this.$NetworkRequestPipeline$p_5<this.$NetworkRequestPipeline$p_1){var e=this.$NetworkRequestPipeline$p_17(this.$NetworkRequestPipeline$p_12);e||(this.$NetworkRequestPipeline$p_12=null)}},a.$NetworkRequestPipeline$p_18=function(t){return t.hasEnded?!1:(r("clearTimeout")(t.timeout),t.hasEnded=!0,this.$NetworkRequestPipeline$p_12=this.$NetworkRequestPipeline$p_14(),this.$NetworkRequestPipeline$p_15(),!0)},a.$NetworkRequestPipeline$p_17=function(n){var t=this;if(n.xhrRequest)return!0;var a=(e||(e=r("performanceNow")))(),i=this.$NetworkRequestPipeline$p_6.dequeue();if(!i)return this.$NetworkRequestPipeline$p_4.setNetworkIdle(),!1;var l=i.estimatedSize,s=i.xhrRequest,u=!1,c=function(){return t.$NetworkRequestPipeline$p_8?u?!0:(u=!0,!1):!1},d,m=function(l){if(!c()){var i=o("VideoPlayerResourceTimer").getResourceTimingEntry(s.getURI().toString(),a,(e||(e=r("performanceNow")))());t.$NetworkRequestPipeline$p_4.addEntry(n.id,i),t.$NetworkRequestPipeline$p_5--,t.$NetworkRequestPipeline$p_18(n)||t.$NetworkRequestPipeline$p_15()}d&&d.remove()},p=function(){c()||(t.$NetworkRequestPipeline$p_5--,t.$NetworkRequestPipeline$p_18(n)||t.$NetworkRequestPipeline$p_15()),d&&d.remove()};u||(d=this.addListener("evict",function(e){s===e.xhrRequest&&p()}));var _=r("getXHRRequestHandlerHelper")(s).addResponseHandler(m).addAbortHandler(p).addErrorHandler(p).addNetworkFailureHandler(function(){t.$NetworkRequestPipeline$p_7&&p()});return this.$NetworkRequestPipeline$p_11&&_.addTimeoutHandler(p),n.xhrRequest=s,this.$NetworkRequestPipeline$p_5++,n.timeout=r("setTimeoutAcrossTransitions")(function(){t.$NetworkRequestPipeline$p_18(n)},this.$NetworkRequestPipeline$p_19(s,l||void 0)),this.$NetworkRequestPipeline$p_9=this.$NetworkRequestPipeline$p_10,this.$NetworkRequestPipeline$p_10=s.getURI().toString(),this.$NetworkRequestPipeline$p_11&&s.setTimeout(this.$NetworkRequestPipeline$p_11),s.send(),!0},a.evictRequest=function(t){this.emit("evict",{xhrRequest:t})},a.getRecentBlockingRequestUrl=function(){return this.$NetworkRequestPipeline$p_9},a.$NetworkRequestPipeline$p_14=function(){var e=this.$NetworkRequestPipeline$p_16();return{id:e,hasEnded:!1,xhrRequest:null,timeout:null}},a.$NetworkRequestPipeline$p_19=function(t,n){var e=this.$NetworkRequestPipeline$p_4.getEstimatedDownloadTime(n),r=this.$NetworkRequestPipeline$p_4.getEstimatedTimeToFirstByte(),o=this.$NetworkRequestPipeline$p_4.getOptimisticTimeToFirstByte();return(e+r-o)*this.$NetworkRequestPipeline$p_2},n})(r("EventEmitter"));l.default=c}),98);
__d("PriorityRequestQueue",["invariant","EventEmitter"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$PriorityRequestQueue$p_1=new Map,t.$PriorityRequestQueue$p_2=new Map,t.$PriorityRequestQueue$p_3=function(){},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.dequeue=function(){return this.$PriorityRequestQueue$p_4(1/0)},n.setOnItemAdded=function(t){this.$PriorityRequestQueue$p_3=t},n.$PriorityRequestQueue$p_4=function(t){var e=-1/0;if(Array.from(this.$PriorityRequestQueue$p_1.keys()).forEach(function(n){n<t&&(e=Math.max(e,n))}),e===-1/0)return null;var n=this.$PriorityRequestQueue$p_1.get(e);n||l(0,2413);var r=this.$PriorityRequestQueue$p_5(n);return r||this.$PriorityRequestQueue$p_4(e)},n.$PriorityRequestQueue$p_5=function(t){var e=t.lastDequeued,n=t.queues;if(!n.size)return null;for(var r=Array.from(n),o=e?r.findIndex(function(t){return t===e}):-1,a=o+1;a<=o+n.size;a++){var i=a%n.size,l=r[i],s=l.dequeue();if(s)return t.lastDequeued=l,s}return null},n.setQueue=function(t,n){var e=this,r=this.$PriorityRequestQueue$p_2.get(t);if(r!==n){r||this.$PriorityRequestQueue$p_3("append"),this.removeQueue(t);var o=this.$PriorityRequestQueue$p_1.get(n);o||(o={lastDequeued:null,queues:new Set}),o.queues.add(t),t.setOnItemAdded(function(n){e.$PriorityRequestQueue$p_6(t,n)}),this.$PriorityRequestQueue$p_2.set(t,n),this.$PriorityRequestQueue$p_1.set(n,o)}},n.removeQueue=function(t){var e=this.$PriorityRequestQueue$p_7(t);t.setOnItemAdded(function(){}),this.$PriorityRequestQueue$p_2.delete(t),e&&e.queues.delete(t)},n.$PriorityRequestQueue$p_6=function(t,n){this.$PriorityRequestQueue$p_3(n),n==="prepend"&&this.$PriorityRequestQueue$p_7(t)},n.$PriorityRequestQueue$p_7=function(t){var e=this.$PriorityRequestQueue$p_2.get(t);if(e!=null){var n=this.$PriorityRequestQueue$p_1.get(e);n||l(0,2414);var r=n.queues;if(n.lastDequeued===t){var o=Array.from(r),a=o.findIndex(function(e){return e===t});n.lastDequeued=o[a-1]||null}return n}return null},n.demandReschedule=function(){this.emit("demand_reschedule")},t})(n("EventEmitter"));a.exports=e}),null);
__d("VideoPipelineProvider",["NetworkRequestPipeline","PriorityRequestQueue","ShakaConstants"],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var r=e.get(t);if(!r){var o=new(n("PriorityRequestQueue")),a=n("ShakaConstants").numbers.request_pipeline_soothing_factor,i=n("ShakaConstants").numbers.request_pipeline_max_concurrent_requests;t==="audio"&&(a=n("ShakaConstants").numbers.audio_request_pipeline_soothing_factor,i=n("ShakaConstants").numbers.audio_request_pipeline_max_concurrent_requests);var l=new(n("NetworkRequestPipeline"))(o,{xhrHandleNetworkFailure:!0,maxConcurrentRequests:i,soothingFactor:a,fixFinishRequest:!1,requestTimeout:n("ShakaConstants").numbers.request_pipeline_timeout_ms});r={requestQueue:o,pipeline:l},e.set(t,r)}return r}a.exports={getPriorityRequestQueueAndPipeline:l}}),null);
__d("VideoSegmentRequestQueue",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=function(){},this.$2=new Map,this.$3=new Map}var t=e.prototype;return t.dequeue=function(){var e=this.$3.entries().next().value;return e?(this.$3.delete(e[0]),e[1]||null):(e=this.$2.entries().next().value,e?(this.$2.delete(e[0]),e[1]||null):null)},t.setOnItemAdded=function(t){this.$1=t},t.append=function(t,n,r){return this.$4(t,n,r,this.$2,"append"),this},t.clearNormalQueue=function(){this.$2.clear()},t.changeToTopPri=function(t){var e=this.$2.get(t);e&&(this.$2.delete(t),this.$3.set(t,e))},t.removeTopPriSegment=function(t){var e=this.$3.get(t);return this.$3.delete(t),e?e.xhrRequest:null},t.isEmpty=function(){return this.$2.size===0&&this.$3.size===0},t.prependTopPri=function(t,n,r){var e=this.$3;this.$3=new Map,this.$5(t,n,r,e,this.$3)},t.prepend=function(t,n,r){var e=this.$2;this.$2=new Map,this.$5(t,n,r,e,this.$2)},t.$5=function(t,n,r,o,a){var e=this;this.$4(t,n,r,a,"prepend"),o.forEach(function(t,n){var r=t.estimatedSize,o=t.xhrRequest;e.$6(n,o,r,a)})},t.$4=function(t,n,r,o,a){this.$6(t,n,r,o),this.$1(a)},t.$6=function(t,n,r,o){var e={xhrRequest:n,estimatedSize:r};o.set(t,e)},e})();i.default=e}),66);
__d("createVideoResponsePromise",["Promise","ShakaConstants","VideoPlayerShakaError","getXHRRequestHandlerHelper","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=window.Promise||s||(s=n("Promise"));(s||(s=n("Promise"))).resolve();function c(t){var n,a=t.getURI().toString(),i=t.send;return t.send=function(){n=(e||(e=r("performanceNow")))(),i.call(t)},new u(function(i,l){var s=r("getXHRRequestHandlerHelper")(t).addResponseHandler(function(t){i({response:t,responseTime:(e||(e=r("performanceNow")))()-n})}).addAbortHandler(function(e){if(e!=="reschedule"){var t={errorMsg:"Request aborted.",errorType:"abort",errorCode:"",errorRawTransportStatus:0,errorRawResponseHeaders:null},n=o("VideoPlayerShakaError").translateError(t,a,"aborted");l(n)}}).addErrorHandler(function(e){var t=o("VideoPlayerShakaError").translateError(e,a,"net");l(t)}).addNetworkFailureHandler(function(e){var t=o("VideoPlayerShakaError").translateError(e,a,"net");l(t)});r("ShakaConstants").numbers.request_pipeline_timeout_ms&&s.addTimeoutHandler(function(){var e=o("VideoPlayerShakaError").createTimeoutError(a);l(e)})})}l.default=c}),98);
__d("VideoSegmentRequestPipeline",["ShakaConstants","SubscriptionsHandler","VideoClientEdgeCooperation","VideoPipelineProvider","VideoPlayerResourceTimer","VideoPlayerShakaError","VideoPriorityCalculator","VideoSegmentInfoHelper","VideoSegmentRequestQueue","createVideoResponsePromise","getXHRRequestHandlerHelper","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t,n,a,i,l,s){var u=this;this.$2=new Map,this.$3=new Map,this.$4=null,this.$10=new Map,this.$11=new Map,this.$12=null,this.$14=0,this.$15=new(r("SubscriptionsHandler")),this.$18=function(){u.$17(),o("VideoPriorityCalculator").getMaxPriority()},this.$1=e,this.$16=l,this.$9=new(r("VideoSegmentRequestQueue"));var c=o("VideoPipelineProvider").getPriorityRequestQueueAndPipeline(t),d=c.pipeline,m=c.requestQueue;this.$12=m,this.$13=d;var p=this.$12;p&&(p.setQueue(this.$9,this.$17()),this.$15.addSubscriptions(p.addListener("demand_reschedule",this.$18))),this.$7=t,this.$5=n,this.$6=s,this.$8=a}var n=t.prototype;return n.enqueue=function(t,n){var e=this,a=o("VideoSegmentInfoHelper").createRequest(t),i=o("VideoSegmentInfoHelper").estimateRequestSize(t),l=r("createVideoResponsePromise")(a),s=a.send;return a.send=function(){e.$10.set(t,a),e.$19(t,a,n),s.call(a)},this.$9.append(t,a,i),this.$20(),l},n.lockRequest=function(n){this.$9.changeToTopPri(n),this.$11.set(n,{lockedTime:(e||(e=r("performanceNow")))(),rescheduleCount:0})},n.cancelUnlockedRequests=function(){var e=this;this.$9.clearNormalQueue(),this.$10.forEach(function(t,n){e.$11.has(n)||(t.abort(),e.$10.delete(n))})},n.abortLockedRequest=function(t){var e=this.$9.removeTopPriSegment(t);e&&e.abort(),e=this.$10.get(t),e&&(e.abort(),this.$21(t))},n.$21=function(t){this.$10.delete(t),this.$11.delete(t)},n.unload=function(){this.$12&&this.$12.removeQueue(this.$9),this.$15.release()},n.setPriority=function(t){if(this.$17()!==t){this.$14=t;var e=this.$12;e&&(e.setQueue(this.$9,t),this.$20())}},n.getResourceTimingEntry=function(t){return this.$3.get(t)||null},n.$20=function(){var e=this.$12;e&&!this.$9.isEmpty()&&this.$17()>=o("VideoPriorityCalculator").getMaxPriority()&&e.demandReschedule()},n.$17=function(){return this.$14},n.$22=function(t){var e=this.$11.get(t)||{},n=e.lockedTime,r=e.rescheduleCount;r=(r||0)+1,this.$21(t),this.$11.set(t,{lockedTime:n,rescheduleCount:r})},n.$19=function(n,a,i){var t=this,l=a.getURI().toString(),s=this.$17(),u,c,d=this.$13.getRecentBlockingRequestUrl(),m=!1;if(d&&d!==this.$4&&(m=!0),c=this.$4,this.$4=l,n){var p=this.$23(l,s,m,i),_=(e||(e=r("performanceNow")))(),f=function(){return!1},g=r("getXHRRequestHandlerHelper")(a).addResponseHandler(Object.assign(function(i,s){if(o("VideoClientEdgeCooperation").updateFromHeaders(s),t.$6&&t.$6.handleHeadersString(s),!f()){var d=(e||(e=r("performanceNow")))(),m=o("VideoPlayerResourceTimer").getResourceTimingEntry(l,_,d),g=i.byteLength;if(t.$8){var h=m?t.$24(m,a,u,c):d-_;t.$8.sample(h,g,t.$7==="video",{timeToLastByte:h},null,t.$5,t.$1.getBool("evaluate_abr_on_fetch_end",!1))}p&&t.$25(n,p,i.byteLength,m,_),t.$21(n)}},{includeHeaders:!0})).addAbortHandler(function(e){if(!f()){var r={errorMsg:"Request aborted.",errorType:"abort",errorCode:"",errorRawTransportStatus:0,errorRawResponseHeaders:null},a=o("VideoPlayerShakaError").translateError(r,l,"aborted");e==="reschedule"?t.$22(n):t.$21(n),p&&p.setError(a).log()}}).addErrorHandler(function(e){if(!f()){var r=o("VideoPlayerShakaError").translateError(e,l,"net");p&&p.setError(r).log(),t.$21(n)}}).addNetworkFailureHandler(function(e){if(!f()){var r=o("VideoPlayerShakaError").translateError(e,l,"net");p&&p.setError(r).log(),t.$21(n)}});r("ShakaConstants").numbers.request_pipeline_timeout_ms&&g.addTimeoutHandler(function(){var e=o("VideoPlayerShakaError").createTimeoutError(l);p&&p.setError(e).log(),t.$21(n)})}},n.$23=function(t,n,r,o){var e=null;return this.$5&&(e=this.$5.getOperationLogger("request").setResource(t).start(),e.setReason(o).setPriorityFloat(n).setType(this.$7||null).setWasDelayed(r).setInitiator("pipeline"),this.$16&&e.setPushed(this.$16.getPushCountForUrl(t))),e},n.$25=function(t,n,r,o,a){var e=this.$11.get(t)||{},i=e.lockedTime,l=e.rescheduleCount,s=0;if(i&&(s=a-i),l||(l=0),n.setLength(r),o){var u=o.timeToFirstByte,c=o.timeToLastByte,d=o.timeToRequestStart;n.setTimeToFirstByte(Math.round(u)).setTimeToLastByte(Math.round(c)).setTimeToRequestStart(Math.round(d)).setTimeToRequestSent(Math.round(s)).setRescheduleCount(Math.round(l))}n.log()},n.$24=function(t,n,r,o){var e=null;if(r&&(e=this.$2.get(r),this.$2.delete(r)),o&&(e=this.$3.get(o),this.$3.delete(o)),this.$3.set(n.getURI().toString(),t),e){var a=e.startTime+e.timeToLastByte,i=t.startTime+t.timeToLastByte,l=Math.min(i-a,t.timeToLastByte);return Math.max(t.timeToLastByte-t.timeToFirstByte,l)}return t.timeToLastByte},t})();l.default=s}),98);
__d("SegmentRequestManager",["invariant","BinarySearch","SegmentsUpdateHelper","ShakaConstants","TrackedPromise","VideoPriorityCalculator","VideoSegmentInfoHelper","VideoSegmentPromiseBuffer","VideoSegmentRequestPipeline"],(function(t,n,r,o,a,i,l,s){"use strict";var e=3,u=(function(){function t(e,t,n,a,i,l,s,u){this.$2=new Map,this.$3=new Map,this.$4=new Map,this.$5=null,this.$7=new(r("VideoSegmentPromiseBuffer")),this.$8=!1,this.$10=0,this.$1=e,this.$6=new(r("VideoSegmentRequestPipeline"))(e,t,a,i,l,s,u),this.$11=n||o("VideoPriorityCalculator").calculate}var n=t.prototype;return n.updateSegmentIndex=function(t,n){this.$2.set(t,n)},n.updateSegmentsByShakaReferences=function(t,n){new(r("SegmentsUpdateHelper"))(this.$4,this.$3).updateSegments(t,n)},n.updateSegments=function(t,n){var e=this,r=this.getSegments_INTERNAL_USE_ONLY(t);n.forEach(function(t){var n=o("VideoSegmentInfoHelper").getRequestCacheKey(t.requestInfo);e.$4.has(n)||(e.$4.set(n,t),e.$12(r,t))}),this.$3.set(t,r)},n.getSegments_INTERNAL_USE_ONLY=function(t){var e=this.$3.get(t);return e||[]},n.hasSegment_INTERNAL_USE_ONLY=function(t){var e=o("VideoSegmentInfoHelper").getRequestCacheKey(t.requestInfo);return this.$4.has(e)},n.updatePriorityWithNewPlayhead=function(t){return this.$9&&(this.$9.playhead=t),this.$13(),this},n.updatePriorityWithNewPlayingState=function(t){return this.$9&&(this.$9.isPlaying=t),this.$13(),this},n.updatePriorityWithNewAdjustment=function(t){return t===this.$10?this:(t<=0||s(0,4433),this.$10=t,this.$13(),this)},n.updatePlayerState=function(t,n){var e=this,r=this.$3.get(t);if(this.$9=n,!r)return this;var o=this.$5;if(this.$5=t,this.$8)return this;this.$13();var a=this.$14(n,r),i=n.additionalSegmentsRequired,l=[];if(i.length>0&&(l=this.$15(i),a=a.concat(l).sort(function(e,t){return e.startTime-t.startTime})),o!==t)return this.$16(),this.$17(a,l),this;var s=[];return this.$7.hasOtherPendingSegments(a)?(this.$16(),s=a):(s=a.filter(function(t){return!e.$7.hasSegmentPromise(t)}),this.$7.removeSegmentPromisesOlderThan(a[0],this.$1)),this.$17(s,l),this},n.getPromise=function(t){var e=o("VideoSegmentInfoHelper").getRequestCacheKey(t),n=this.$4.get(e);if(!n)throw new Error("the given request info is not found it segments cache ");var a=this.$7.getSegmentPromise(n),i;return a&&(!a.isPending()||this.$7.isFirstPendingSegment(n))?i=a.getPromise():(this.$16(),i=this.$6.enqueue(n),a=new(r("TrackedPromise"))(i,this.$1),this.$7.appendSegmentPromise(n,a)),this.$6.lockRequest(n),i},n.getResourceTimingEntry=function(t){return this.$6.getResourceTimingEntry(t)},n.$15=function(t){var e=this,n=[];return t.forEach(function(t){var a=e.$4.get(o("VideoSegmentInfoHelper").getRequestCacheKey(r("SegmentsUpdateHelper").createSegmentInfo(t).requestInfo));a&&n.push(a)}),n},n.$12=function(t,n){for(var e=Number.POSITIVE_INFINITY,r=0;r<=t.length;r++){var o=t.length-r,a=o>=1?t[o-1].startTime:Number.NEGATIVE_INFINITY;if(a<=n.startTime&&n.startTime<e){o===t.length?t.push(n):t.splice(o,0,n);return}e=a}},n.$13=function(){if(this.$9){var e=this.$11(this.$9,r("ShakaConstants").numbers.global_scheduler_priority_threshold);e+=this.$10,this.$6.setPriority(e)}},n.$16=function(){this.$6.cancelUnlockedRequests(),this.$7.clearAllSegmentPromises()},n.$17=function(t,n){for(var e of t){if(o("VideoSegmentInfoHelper").isPrefetchedRequest(e))return;var a=n.includes(e)?"replacing_lower_quality_buffer":null,i=this.$6.enqueue(e,a);this.$7.appendSegmentPromise(e,new(r("TrackedPromise"))(i,this.$1))}},n.abortRequest=function(t){var e=o("VideoSegmentInfoHelper").getRequestCacheKey(t),n=this.$4.get(e);n&&(this.$6.abortLockedRequest(n),this.$7.removeSegmentPromise(n))},n.disable=function(){this.$8||(this.$6.cancelUnlockedRequests(),this.$6.unload(),this.$8=!0)},n.enable=function(){this.$8=!1},n.isDisabled=function(){return this.$8},n.$14=function(t,n){for(var e=t.bufferEnd,r=t.bufferingGoal,o=t.playhead,a=Math.max(e,o),i=[],l=this.$18(a,n),s=Math.max(l,0);s<n.length;s++){var u=n[s];if(u.startTime>o+r)break;i.push(u)}return i},n.$18=function(t,n){var e=r("ShakaConstants").numbers.templated_chunked_segment_update_limit_int,o=n.length;if(!e)return this.$19(t,n);if(n.length>0&&(o=this.$19(t,n),o<n.length)){var a=this.$20(n[o].startTime),i=this.$20(n[o].endTime),l=this.$20(t);if(a<=l&&i>l)return o}var s=this.$5||"",u=this.$2.get(s);if(!u)return o;if(o=u.findIndex(t),o<0)return n.length;for(var c=Math.min(u.length(),o+e),d=[],m=o;m<c;++m)d.push(u.get(m));o=n.length,this.updateSegmentsByShakaReferences(s,d);var p=this.$3.get(s);return p?this.$19(t,p):o},n.$19=function(t,n){var e=this;return o("BinarySearch").leastUpperBound(function(r){var o=e.$20(n[r].startTime),a=e.$20(n[r].endTime);return t=e.$20(t),o<=t&&a>t?0:o-t},0,0,n.length,function(e,t){return e-t})},n.$20=function(n){return+n.toFixed(e)||0},t})();l.default=u}),98);
__d("ShakaTimelineSegmentIndexUtils",["BinarySearch"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return Math.abs(t-n)<r},s=function(n,r,o){return!e(n,r,o)&&n-r<0},u=function(n,r,o){return e(n,r,o)||n-r<0},c=function(n,r,o){return e(n,r,o)||n-r>0};function d(e){for(var t=0,n=0;n<e.length;++n)e[n].startSegmentIndex=t,t+=e[n].repeat+1;return t}function m(e,t,n){var r=n-t,o=0,a;if(n<1||r<0||e.length<1)throw new RangeError("Index out of range.");for(a=e.length-1;a>-1;--a){var i=e[a].repeat+1;if(o=i-r,o<0){r=Math.abs(o);continue}break}return{S:a,r:o}}function p(e,t,n,r){for(var o=t.length-1,a=1e-7,i=function(t){return t/n+r};o>-1&&!u(i(t[o].startTime),e,a);--o);if(o===-1)return o;for(var l=t[o],d=l.duration/n,m=0,p=0;p<o;++p)m+=t[p].repeat+1;var _=i(l.startTime),f=_+d*(l.repeat+1);if(c(e,f,a)&&t[o+1]&&s(e,i(t[o+1].startTime),a))return m+l.repeat;if(c(e,f,a)&&!t[o+1])return-1;var g=m+Math.floor((e-_)/d);return _+=d*(g-m),f=_+d,c(e,_,a)&&s(e,f,a)?g:g+1}function _(e,t,n,r){for(var o=t-e,a=e,i=0,l=0,s=!0,u=0;u<n.length;++u){var c=n[u],d=c.repeat,m=d+1,p=Math.min(l+m,a),_=p-l,f=c.startTime,g=void 0;_&&(g=f+_*c.duration,n[u+1]&&g>n[u+1].startTime&&(g=n[u+1].startTime),f=g,i=g,s=!1);for(var h=_;h<m;++h){var y=null;g=f+n[u].duration;var C=n[u+1]&&h+1>=m&&g!==n[u+1].startTime;C&&(y=n[u+1].startTime-g,i=g,g=n[u+1].startTime);var b=l+h;if(r(f,g,b,y,y!==null?i:y),s=!1,--o<=0)return;a++,f=g,i=g}l+=m}}function f(e,t,n){var r=[];if(e.length>1)for(var o=0,a=0;a<e.length;++a){var i=e[a],l=i.startTime,s=l+(i.repeat+1)*i.duration;if(a&&l!==o){var u=l-o;u>0&&r.push({start:o/t+n,end:l/t+n})}o=s}return r}function g(e){var t=[];if(e.length===0)return t;t.push(e[0]);for(var n=1;n<e.length;++n){var r=t[t.length-1];if(r.duration!==e[n].duration){t.push(e[n]);continue}var o=r.startTime+r.duration*(r.repeat+1);if(o===e[n].startTime){r.repeat++;continue}t.push(e[n])}return t}function h(e,t){var n=e.slice(),r=t.slice();if(r.length===0)return n;if(n.length===0){for(var o=0;o<r.length;++o)n.push(r[o]);return n}var a=n[n.length-1],i=a.startTime+a.duration*a.repeat,l=i+a.duration,s=r[r.length-1],u=s.startTime+s.duration*(s.repeat+1),c=d(r),p=[];if(l!==u){for(var _=c-1;_>-1;--_){var f=m(r,_,c),h=r[f.S],y=h.duration,C=h.startTime+y*f.r;if(i!==C)p.push({startTime:C,duration:y,repeat:0,startSegmentIndex:0});else break}for(;p.length;)n.push(p.pop())}return g(n)}function y(e,t,n){if(t+1>=n)return b(e,n);var r=m(e,t+1,n),o=r.S,a=r.r,i=o,l=a;l===0?(o=i-1,a=e[o].repeat):(o=i,a=l-1);var s=e[o].startTime+e[o].duration*a,u=s+e[o].duration,c=l!==0?null:e[i].startTime-u,d=c?u:null;return u=c?e[i].startTime:u,{unscaledStartTime:s,unscaledEndTime:u,segmentReplacement:t,delta:c,previousEndTime:d}}function C(e,t){if(t<1||!e.length)throw new RangeError("Index out of range");return y(e,0,t)}function b(e,t){if(t<1||!e.length)throw new RangeError("Index out of range");var n=e.length-1,r=e[n].repeat,o=e[n].startTime+e[n].duration*r,a=o+e[n].duration;return{unscaledStartTime:o,unscaledEndTime:a,segmentReplacement:t-1,delta:null,previousEndTime:null}}function v(e,t,n){var r=n-e.startSegmentIndex,o=e.startTime+e.duration*r,a=o+e.duration,i=null,l=null;if(t&&e.startSegmentIndex+e.repeat===n){var s=t.startTime;i=s-a,i&&(l=a,a=s)}return{unscaledStartTime:o,unscaledEndTime:a,segmentReplacement:n,delta:i,previousEndTime:l}}function S(t,n,r){var o=t.startTime,a=(r-o)/t.duration,i=Math.floor(a)+1,l=1e-7;a=e(a,i,l)?i:Math.floor(a),a+=t.startSegmentIndex;var s=t.startSegmentIndex+t.repeat;return a<=s?a:n?s:-1}function R(e,t){return o("BinarySearch").findBoundInArray(e,t,function(e,t){return e.startTime-t},o("BinarySearch").GREATEST_LOWER_BOUND)}function L(e,t,n,r){var o=(e-r)*n,a=R(t,o),i=t[a],l=t[a+1]||null;if(!i)return null;var s=S(i,l,o);return s<0?null:v(i,l,s)}l.length=d,l.findSTagAndRepeatValueByIndex=m,l.findIndex=p,l.getSegments=_,l.getSeekRangeGaps=f,l.compressTimePoints=g,l.integrateTimePoints=h,l.get=y,l.first=C,l.last=b,l.find=L}),98);
__d("VideoPlayerBitrateEstimator",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.sample=function(t,n){},t.getTotalWeight=function(){return 0},t.getEstimate=function(){return 0},t.reset=function(){},e})(),l=(function(){function e(e,t,n,r){this.$1=e,this.$2=t,this.$3=n,this.$4=r}var t=e.prototype;return t.getEstimate=function(){return this.$1.getTotalWeight()<this.$3?this.$2:Math.round(this.$1.getEstimate())},t.sample=function(t,n){var e=t/n,r=n;e>this.getEstimate()&&(r*=this.$4,this.$1.reset()),this.$1.sample(r,e)},e})();i.default=l}),66);
__d("VideoPlayerShakaBandwidthUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].bytes*8e3/e[n].timeInMs;return t/e.length}function l(t){for(var n=e(t),r=0,o=0;o<t.length;o++)r+=Math.pow(t[o].bytes*8e3/t[o].timeInMs-n,2);return Math.round(Math.sqrt(r/t.length))}function s(e,t){for(var n=Math.exp(Math.log(.5)/t),r=0,o=0,a=0;a<e.length;a++){var i=e[a].bytes*8e3/e[a].timeInMs,l=Math.pow(n,e[a].timeInMs/1e3);r=i*(1-l)+r*l,o+=e[a].timeInMs/1e3}return Math.round(r/(1-Math.pow(n,o)))}function u(t,n){for(var r=e(t),o=[],a=0;a<t.length;a++)Math.abs(r-t[a].bytes*8e3/t[a].timeInMs)<n&&o.push(t[a]);return o}function c(e,t,n,r){var o=l(e),a=u(e,o*n),i=s(a,t);return i-o*r}i.getMeanBandwidth=e,i.getStandardDeviationOfBandwidth=l,i.getExponentiallyWeightedMovingAverageOfBandwidth=s,i.getBandwidthSamplesWithinRangeOfMean=u,i.getBandwidthEstimate=c}),66);
__d("RoundRobinPriorityTaskQueue",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue"],(function(t,n,r,o,a,i,l){l.default=r("oz-player/scheduling/OzRoundRobinPriorityTaskQueue")}),98);
__d("SequentialTaskScheduler",["oz-player/scheduling/OzSequentialTaskScheduler"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/scheduling/OzSequentialTaskScheduler")}),98);
__d("VideoStreamingTaskQueueProvider",["RoundRobinPriorityTaskQueue","SequentialTaskScheduler","ShakaConstants","VideoPriorityCalculator"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=new Map;function u(e){var t=c(e);return t?t.getLength():0}function c(t){var n=e.get(t);if(!n){n=new(r("RoundRobinPriorityTaskQueue"))(o("VideoPriorityCalculator").getMaxPriority(),r("ShakaConstants").numbers.priority_precision);var a=new(r("SequentialTaskScheduler"))(n,{taskTimeout:6e4});a.start(),e.set(t,n),s.set(t,a)}return n}function d(e){return s.get(e)||null}l.getQueueSize=u,l.getQueue=c,l.getSchedulerForDebug=d}),98);
__d("getBandwidthPenaltyFactorForScheduledVideoCount",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){for(var o=Math.max(0,e-t+1),a=0,i=n,l=1;l<=o;l++)a+=i,i*=r;return 1-a}i.default=e}),66);
__d("getNeuralBandwidthEstimate",[],(function(t,n,r,o,a,i){function e(e){var t=e;if(t.length>8)t=t.slice(0,8);else if(t.length<8)for(;t.length<8;)t.push(0);var n=1e9;return c(e.map(function(e){return e/n}))[0]*n}var l=[function(e,t){var n=1/(1+Math.exp(-e));return t!==!0?n:n*(1-n)}],s=[776e-6,0,0,0,0,0,0,0,.07993045087713074,.019315817148901328,.49837995466162727,.019521651881765512,.00021613261390548784,.07750491170273517,.06736225161443557,.0007569189868508071,.8409143388252623,.01986646603812691,.0007195506066612518],u=[0,0,0,0,0,0,0,0,-2.443292371536531,-3.9273261721766457,-.0064802040303537645,-3.9165163604073605,-8.439402229432238,-2.4767407404009374,-2.6279320641013375,-7.185497123350212,1.6650469917803437,-3.8986556349267514,-7.2361638886289805];function c(e){for(var t=0;t<e.length;t++)s[t]=e[t];return u[8]=s[0]*-20.85073990285843+s[1]*-.17466848432563759+s[2]*-.057525299304308844+s[3]*.03110003879725791+s[4]*-.008895762588835858+s[5]*-.0683893713124604+s[6]*.06576749148339567+s[7]*-.01772020718777774+-2.4271121973719127,s[8]=l[0](u[8]),u[9]=s[0]*-529.6211404152259+s[1]*-10.085931929547788+s[2]*-4.540198005288279+s[3]*-2.6352715249222896+s[4]*-2.047125192304325+s[5]*-1.8521580652576841+s[6]*-2.4005121520581447+s[7]*-.07718938908000435+-3.5163401672144303,s[9]=l[0](u[9]),u[10]=s[0]*189.221355777461+s[1]*10.199243264545071+s[2]*4.697355964097093+s[3]*2.6339556539173423+s[4]*1.7925547331406204+s[5]*1.7015875595365062+s[6]*2.255633060777646+s[7]*.01805203313602992+-.15331597611366352,s[10]=l[0](u[10]),u[11]=s[0]*-19.43067537504266+s[1]*8.73022147952729+s[2]*4.820819354033675+s[3]*2.709578269559789+s[4]*1.978560568303787+s[5]*1.9830323294564676+s[6]*2.5745137738069044+s[7]*.09334179618953584+-3.9014381563163276,s[11]=l[0](u[11]),u[12]=s[0]*-5.048452581794674+s[1]*14.938163257617958+s[2]*8.784340440836452+s[3]*4.64012793867896+s[4]*3.1756670528730058+s[5]*2.620356039948262+s[6]*3.7942580850886625+s[7]*-.029713142657160185+-8.435484630228766,s[12]=l[0](u[12]),u[13]=s[0]*-21.10308480104038+s[1]*-.18020886205098594+s[2]*-.03715917747193107+s[3]*-.014443058733183056+s[4]*.08847178195128587+s[5]*.142772115586438+s[6]*-.0069832531579266015+s[7]*-.0921071783400488+-2.46036474659533,s[13]=l[0](u[13]),u[14]=s[0]*-24.614999084523344+s[1]*-.5706213316377333+s[2]*-.5315686923846422+s[3]*-.41561197239084546+s[4]*-.4622208593249528+s[5]*-.47076637110996444+s[6]*-.5160286139457088+s[7]*.09458872769476198+-2.6088308248117476,s[14]=l[0](u[14]),u[15]=s[0]*-10.646367946852898+s[1]*9.894069563224784+s[2]*6.38876106194455+s[3]*4.440529733916467+s[4]*3.4585448009421538+s[5]*3.1241038175984204+s[6]*3.6086610959448384+s[7]*-.05630455554937189+-7.177235541823454,s[15]=l[0](u[15]),u[16]=s[0]*169.19579326461104+s[1]*10.173311065987626+s[2]*4.643577083747655+s[3]*2.5947613769479383+s[4]*1.8128565992680805+s[5]*1.7184203818262473+s[6]*2.2652341722655147+s[7]*-.013828130098586827+1.5337510562070056,s[16]=l[0](u[16]),u[17]=s[0]*-18.836521088957262+s[1]*.07459368402448659+s[2]*.060777588023931+s[3]*.18289413867450946+s[4]*.16801985006774095+s[5]*.16611109930358084+s[6]*.09992971037111033+s[7]*.01144813346735582+-3.8840384945617203,s[17]=l[0](u[17]),u[18]=s[8]*-10.700053978575285+s[9]*-137.47854623908006+s[10]*11.958608720277157+s[11]*-7.615750916889078+s[12]*-5.975976449386021+s[13]*-10.809028988340401+s[14]*-11.738069079393329+s[15]*-5.935205222074537+s[16]*-38.98332368718187+s[17]*-9.626144857503322+25.07046089429775,s[18]=l[0](u[18]),[s[18]]}i.default=e}),66);
__d("VideoPlayerLocalBandwidthEstimator",["EventEmitter","EventListener","ShakaConstants","SubscriptionsHandler","VideoPlayerShakaBandwidthUtils","VideoStreamingTaskQueueProvider","getBandwidthPenaltyFactorForScheduledVideoCount","getNeuralBandwidthEstimate","guid","requireWeak"],(function(t,n,r,o,a,i,l){var e;r("requireWeak")("Shaka",function(t){t&&t.util&&(e=t.util.EWMACacheBandwidthEstimator)});var s=(function(e){function t(t,n,o){var a;return a=e.call(this)||this,a.$VideoPlayerLocalBandwidthEstimator$p_3=t,a.$VideoPlayerLocalBandwidthEstimator$p_1=n,a.$VideoPlayerLocalBandwidthEstimator$p_4=o,a.$VideoPlayerLocalBandwidthEstimator$p_5=[],a.$VideoPlayerLocalBandwidthEstimator$p_6=null,a.$VideoPlayerLocalBandwidthEstimator$p_7=r("guid")(),a.$VideoPlayerLocalBandwidthEstimator$p_10=new(r("SubscriptionsHandler")),a.$VideoPlayerLocalBandwidthEstimator$p_10.addSubscriptions(r("EventListener").listen(a.$VideoPlayerLocalBandwidthEstimator$p_1,"bandwidth",function(e){return a.emit("bandwidth",e)})),a}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.destroy=function(){this.$VideoPlayerLocalBandwidthEstimator$p_10!=null&&this.$VideoPlayerLocalBandwidthEstimator$p_10.release()},n.setRepresentationID=function(t){this.$VideoPlayerLocalBandwidthEstimator$p_6=t},n.sample=function(t,n,r,o,a,i,l){var e;l===void 0&&(l=!1),r&&this.$VideoPlayerLocalBandwidthEstimator$p_6&&this.$VideoPlayerLocalBandwidthEstimator$p_11(t,n,this.$VideoPlayerLocalBandwidthEstimator$p_6,this.$VideoPlayerLocalBandwidthEstimator$p_3.getVideoTracks());var s=[t,n,r,o,a,i,l,!1];if((e=this.$VideoPlayerLocalBandwidthEstimator$p_1).sample.apply(e,s),this.$VideoPlayerLocalBandwidthEstimator$p_2){var u;(u=this.$VideoPlayerLocalBandwidthEstimator$p_2).sample.apply(u,s)}},n.getRecentSamples=function(){return this.$VideoPlayerLocalBandwidthEstimator$p_1.getRecentSamples()},n.supportsCaching=function(){return this.$VideoPlayerLocalBandwidthEstimator$p_1.supportsCaching()},n.getEstimator=function(){return this.$VideoPlayerLocalBandwidthEstimator$p_1},n.getBandwidth=function(t){var e=0,n=this.$VideoPlayerLocalBandwidthEstimator$p_12(),a=r("ShakaConstants").numbers.minimum_sample_count_to_use_new_estimator,i=r("ShakaConstants").numbers.minimum_sample_count_to_use_deviation_penalty;if(a>0){var l=this.getRecentSamples();if(l.length>=a){var s=o("VideoPlayerShakaBandwidthUtils").getBandwidthEstimate(l.map(function(e){return{bytes:e[0],timeInMs:e[1]}}),r("ShakaConstants").numbers.new_estimator_half_life,r("ShakaConstants").numbers.new_estimator_standard_deviation_exclusion_factor,r("ShakaConstants").numbers.bandwidth_standard_deviation_penalty_factor);if(s>0)return n*s}}else if(i>0){var u=this.getRecentSamples();if(u.length>=i){var c=o("VideoPlayerShakaBandwidthUtils").getStandardDeviationOfBandwidth(u.map(function(e){return{bytes:e[0],timeInMs:e[1]}}));e=c*r("ShakaConstants").numbers.bandwidth_standard_deviation_penalty_factor}}var d=r("ShakaConstants").numbers.neural_estimate_weight;return d>0?n*this.$VideoPlayerLocalBandwidthEstimator$p_13():n*this.$VideoPlayerLocalBandwidthEstimator$p_1.getBandwidth(t)-e},n.setResolutionConstraint=function(t,n){this.$VideoPlayerLocalBandwidthEstimator$p_8=t,this.$VideoPlayerLocalBandwidthEstimator$p_9=n},n.$VideoPlayerLocalBandwidthEstimator$p_12=function(){var e=r("getBandwidthPenaltyFactorForScheduledVideoCount")(o("VideoStreamingTaskQueueProvider").getQueue("video").getLength(),r("ShakaConstants").numbers.multiple_videos_queue_penalty_start_count,this.$VideoPlayerLocalBandwidthEstimator$p_4.getNumber("bandwidth_penalty_per_additional_video",0),r("ShakaConstants").numbers.bandwidth_penalty_decay_per_video);return e>0&&e<=1?e:1},n.$VideoPlayerLocalBandwidthEstimator$p_13=function(t){var e=r("ShakaConstants").numbers.minimum_samples_to_use_neural_estimate,n=this.$VideoPlayerLocalBandwidthEstimator$p_1.getRecentSamples(),o=this.$VideoPlayerLocalBandwidthEstimator$p_1.getBandwidth(t);if(e>n.length)return o;n.reverse();var a=r("getNeuralBandwidthEstimate")(n.map(function(e){return e[0]/e[1]*8e3})),i=r("ShakaConstants").numbers.neural_estimate_weight;return a*i+o*(1-i)},n.$VideoPlayerLocalBandwidthEstimator$p_11=function(t,n,r,o){var e=this,a=8e3*n/t,i=o.filter(function(t){return t.width<=e.$VideoPlayerLocalBandwidthEstimator$p_8||t.height<=e.$VideoPlayerLocalBandwidthEstimator$p_9}),l=this.$VideoPlayerLocalBandwidthEstimator$p_14(a,o),s=this.$VideoPlayerLocalBandwidthEstimator$p_14(a,i),u=o.find(function(e){return e.streamInfoID===r});if(u){var c=u.id,d=this.$VideoPlayerLocalBandwidthEstimator$p_15(l,c),m=this.$VideoPlayerLocalBandwidthEstimator$p_15(s,c);d!==m&&d==="conservative"&&m==="ideal"&&(d="conservative_resolution_constrained"),this.$VideoPlayerLocalBandwidthEstimator$p_5.push(d)}},n.$VideoPlayerLocalBandwidthEstimator$p_14=function(t,n){for(var e=0,r=0;r<n.length&&!(t<=n[r].bandwidth);r++)e=n[r].id;return e},n.$VideoPlayerLocalBandwidthEstimator$p_15=function(t,n){return t===n?"ideal":t>n?"conservative":"aggressive"},n.flushABREvaluationSet=function(){var e=this.$VideoPlayerLocalBandwidthEstimator$p_5;return this.$VideoPlayerLocalBandwidthEstimator$p_5=[],e},t})(r("EventEmitter"));l.default=s}),98);
__d("VideoPushParametersHelper",["ShakaConstants","URI","VideoPlayerShakaGlobalConfig"],(function(t,n,r,o,a,i,l){var e,s=/(.*)\.(xx|fna)\.fbcdn\.net/,u=(function(){function t(t){return this.$1=new(e||(e=r("URI")))(t),this}var n=t.prototype;return n.setStreamEndOffset=function(t){return this.$2=Math.min(Math.floor(t)+1,r("ShakaConstants").numbers.live_max_segments_to_push),this.$4=Math.floor(t)+1,this},n.setSegmentStartTime=function(t){return this.$3=t,this},n.setPushVideoRepresentationID=function(t){return this.$5=t,this},n.setPushAudioRepresentationID=function(t){return this.$6=t,this},n.setUseLongCacheForManifest=function(t){return this.$7=t,this},n.getURL=function(){var e=this,t=this.getPushQueryParameters();return t.forEach(function(t,n){e.$1.addQueryData(n,t)}),this.$1.toString()},n.getPushQueryParameters=function(){var e=new Map,t=s.test(this.$1.toString());return t&&o("VideoPlayerShakaGlobalConfig").getBool("live_send_push_headers",!0)&&(this.$2!=null&&e.set("_nc_p_n",this.$2),this.$3!=null?e.set("_nc_p_ts",this.$3):this.$4!=null&&e.set("_nc_p_o",this.$4),this.$5!=null&&this.$6!=null&&(e.set("_nc_p_rid",this.$5),e.set("_nc_p_arid",this.$6)),this.$7&&e.set("_nc_nc","1")),e},n.getSegmentsToPush=function(){return this.$2},n.getSegmentStartTime=function(){return this.$3},n.getSegmentOffset=function(){return this.$4},n.getPushVideoRepresentationID=function(){return this.$5},n.getPushAudioRepresentationID=function(){return this.$6},n.getUseLongCacheForManifest=function(){return this.$7},t})();l.default=u}),98);
__d("crc16",[],(function(t,n,r,o,a,i){var e=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];function l(t){for(var n=65535,r,o=0;o<t.length;o++){var a=t.charCodeAt(o);if(a>255)throw new RangeError;r=(a^n>>8)&255,n=e[r]^n<<8}return(n^0)&65535}function s(e){return l(e).toString(16).padStart(4,"0")}l.hex=s;var u=l;i.default=u}),66);
__d("VideoPushTracker",["URI","crc16"],(function(t,n,r,o,a,i,l){var e,s=(function(){function t(){this.$1=0,this.$2=new Map}var n=t.prototype;return n.addPushDataFromXHR=function(t){var e=this,n=t.getResponseHeader("X-FB-Debug-Num-Pushed"),r=t.getResponseHeader("X-FB-Debug-List-Pushed");if(!(!r||!n)){var o=parseInt(n,10),a=[];if(r.length%4){r.length;return}for(var i=r.length/4,l=0;l<i;l++)a.push(r.substr(l*4,4));o!=a.length,o&&(this.$1+=o,a.forEach(function(t){e.$2.set(t,(e.$2.get(t)||0)+1)}))}},n.getPushCountForUrl=function(n){var t=new(e||(e=r("URI")))(n),o=r("crc16").hex(t.getPath());return this.$2.get(o)||0},t})();l.default=s}),98);
__d("FetchStreamStateTracker",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.setNextRequestInfo=function(t){this.$1=this.$2,this.$2=t},t.setFetchRange=function(t){this.$3=t},t.isNextRequestContinuous=function(){return this.$2||s(0,3883),!(!this.$1||this.$1.baseUrl!==this.$2.baseUrl||(this.$1.endByte||0)+1!==(this.$2.startByte||0))},t.isNextRequestInRange=function(){if(this.$2||s(0,3883),!this.$3)return!1;var e=1/0,t=this.$3.endByte;return t!=null&&(e=t),(this.$2.endByte||0)<=e},e})();l.default=e}),98);
__d("NetworkErrorTransformStream",["ReadableStream","WritableStream","pipeErrorTo"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.writable=new(r("WritableStream"))({start:function(n){e.$2=n},write:function(n){e.$3(n)},close:function(){e.$1.close()},abort:function(n){var t=n;n instanceof TypeError&&(t={type:"net",status:0,message:"Network failure."}),r("pipeErrorTo")(e.$1,t)}}),this.readable=new(r("ReadableStream"))({start:function(n){e.$1=n},cancel:function(n){r("pipeErrorTo")(e.$2,n)}})}var t=e.prototype;return t.$3=function(t){this.$1.enqueue(t)},e})();l.default=e}),98);
__d("StreamBandwidthReporter",["EventEmitter","ReadableStream","ShakaConstants","WritableStream","performanceNow","pipeErrorTo"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(t){function n(n,o,a){var i;return i=t.call(this)||this,i.$StreamBandwidthReporter$p_2=null,i.$StreamBandwidthReporter$p_3=0,i.$StreamBandwidthReporter$p_4=0,i.$StreamBandwidthReporter$p_8=0,i.$StreamBandwidthReporter$p_9=1/0,i.$StreamBandwidthReporter$p_1=n,i.$StreamBandwidthReporter$p_2=i.$StreamBandwidthReporter$p_1.getNumber("streaming_bandwidth_update_interval",18e4),i.$StreamBandwidthReporter$p_7=a,i.$StreamBandwidthReporter$p_9=o,i.$StreamBandwidthReporter$p_2&&(i.$StreamBandwidthReporter$p_10=i.$StreamBandwidthReporter$p_9,i.$StreamBandwidthReporter$p_14()),i.writable=new(r("WritableStream"))({start:function(n){i.$StreamBandwidthReporter$p_5=i.$StreamBandwidthReporter$p_6=(e||(e=r("performanceNow")))(),i.$StreamBandwidthReporter$p_12=n},write:function(t){t.length!=null&&(i.$StreamBandwidthReporter$p_3+=t.length),i.$StreamBandwidthReporter$p_15(),i.$StreamBandwidthReporter$p_13(t)},close:function(){i.$StreamBandwidthReporter$p_11.close(),i.$StreamBandwidthReporter$p_16()},abort:function(t){r("pipeErrorTo")(i.$StreamBandwidthReporter$p_11,t)}}),i.readable=new(r("ReadableStream"))({start:function(t){i.$StreamBandwidthReporter$p_11=t},cancel:function(t){r("pipeErrorTo")(i.$StreamBandwidthReporter$p_12,t)}}),i}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.$StreamBandwidthReporter$p_13=function(t){this.$StreamBandwidthReporter$p_11.enqueue(t)},o.$StreamBandwidthReporter$p_17=function(){var t=r("ShakaConstants").numbers.max_bandwidth_update_interval;return t>0?(e||(e=r("performanceNow")))()>this.$StreamBandwidthReporter$p_5+t:!1},o.$StreamBandwidthReporter$p_15=function(){var e=this.$StreamBandwidthReporter$p_9+this.$StreamBandwidthReporter$p_3,t=this.$StreamBandwidthReporter$p_18();(this.$StreamBandwidthReporter$p_17()||t!=null&&e>=t)&&this.$StreamBandwidthReporter$p_16()},o.$StreamBandwidthReporter$p_16=function(){if(this.$StreamBandwidthReporter$p_4!==this.$StreamBandwidthReporter$p_3){var t=(e||(e=r("performanceNow")))();this.$StreamBandwidthReporter$p_14(),this.emit("bandwidthUpdate",{bytesRead:this.$StreamBandwidthReporter$p_3-this.$StreamBandwidthReporter$p_4,timeTaken:t-this.$StreamBandwidthReporter$p_5}),this.$StreamBandwidthReporter$p_5=t,this.$StreamBandwidthReporter$p_4=this.$StreamBandwidthReporter$p_3}},o.$StreamBandwidthReporter$p_18=function(){return this.$StreamBandwidthReporter$p_10!=null?this.$StreamBandwidthReporter$p_10:this.$StreamBandwidthReporter$p_7[this.$StreamBandwidthReporter$p_8]},o.$StreamBandwidthReporter$p_14=function(){this.$StreamBandwidthReporter$p_17()?this.$StreamBandwidthReporter$p_10=this.$StreamBandwidthReporter$p_9+this.$StreamBandwidthReporter$p_3+this.$StreamBandwidthReporter$p_2:this.$StreamBandwidthReporter$p_10!=null?this.$StreamBandwidthReporter$p_10+=this.$StreamBandwidthReporter$p_2:this.$StreamBandwidthReporter$p_8++},n})(r("EventEmitter"));l.default=s}),98);
__d("StreamFetchRequestLogger",["PausableRangeStream","ReadableStream","VideoPlayerResourceTimer","WritableStream","performanceNow","pipeErrorTo"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(t,n,o,a,i,l,s){var u=this;this.$6=0,this.$9=null,this.$10=0,this.$3=o,this.$2=l,this.$1=t,this.$4=n,this.$5=i,this.$11=a,this.$8=s,this.writable=new(r("WritableStream"))({start:function(t){u.$14(),u.$13=t},write:function(n){u.$6+=n.byteLength,u.$9&&(u.$10=Math.round(Math.max(u.$10,(e||(e=r("performanceNow")))()-(u.$9||1/0)))),u.$9=(e||(e=r("performanceNow")))(),u.$15(n)},close:function(){u.$12.close(),u.$16()},abort:function(t){r("pipeErrorTo")(u.$12,t),u.$17(t)}}),this.readable=new(r("ReadableStream"))({start:function(t){u.$12=t},cancel:function(t){r("pipeErrorTo")(u.$13,t);var e={type:t===r("PausableRangeStream").STREAM_PAUSED?"paused":"aborted",status:0,url:u.$3};u.$17(e)}})}var n=t.prototype;return n.$14=function(){this.$7=this.$1.getOperationLogger("fetch_stream").setSegmentStartTime(this.$11.startTime).setSegmentEndTime(this.$11.endTime).setResource(this.$3).start(),this.$7.setPriorityFloat(this.$8);var e=this.$5,t=e.endByte,n=e.startByte,r=t===null?null:(t||0)+1-n;this.$7.setType(this.$4).setExpectedLength(r)},n.$17=function(t){this.$7.setError(t).setTimeBetweenBytesMax(this.$10).setLength(this.$6).log()},n.$16=function(){var t=o("VideoPlayerResourceTimer").getResourceTimingEntry(this.$3,this.$2,(e||(e=r("performanceNow")))());if(t){var n=t.timeToFirstByte,a=t.timeToLastByte,i=t.timeToRequestStart;this.$7.setTimeToFirstByte(Math.round(n)).setTimeToLastByte(Math.round(a)).setTimeToRequestStart(Math.round(i)).setLength(this.$6)}this.$7.setTimeBetweenBytesMax(this.$10).log()},n.$15=function(t){this.$12.enqueue(t)},t})();l.default=s}),98);
__d("VideoPriorityUpdater",["EventEmitter","ShakaConstants","VideoPriorityCalculator"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return n===void 0&&(n=[]),r=e.call(this)||this,r.$VideoPriorityUpdater$p_3=0,r.$VideoPriorityUpdater$p_4=[],r.$VideoPriorityUpdater$p_1=t,r.$VideoPriorityUpdater$p_4=n.slice(0),n.forEach(function(e){return e.setOnPriorityChanged(function(){r.$VideoPriorityUpdater$p_5()})}),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updatePriorityWithNewPlayhead=function(t){return this.$VideoPriorityUpdater$p_2&&(this.$VideoPriorityUpdater$p_2.playhead=t),this.$VideoPriorityUpdater$p_5(),this},n.updatePriorityWithNewPlayingState=function(t){return this.$VideoPriorityUpdater$p_2&&(this.$VideoPriorityUpdater$p_2.isPlaying=t),this.$VideoPriorityUpdater$p_5(),this},n.updatePriorityWithNewPlayerState=function(t){return this.$VideoPriorityUpdater$p_2=t,this.$VideoPriorityUpdater$p_5(),this},n.$VideoPriorityUpdater$p_5=function(){if(this.$VideoPriorityUpdater$p_2){var e=r("ShakaConstants").numbers.global_scheduler_priority_downgrade_bufferahead_threshold,t=r("ShakaConstants").numbers.global_scheduler_priority_threshold;this.$VideoPriorityUpdater$p_3>=o("VideoPriorityCalculator").getMaxPriority()&&e&&(t=e);var n=this.$VideoPriorityUpdater$p_4.reduce(function(e,t){return e+t.getPriorityAdjustment()},0),a=o("VideoPriorityCalculator").calculate(this.$VideoPriorityUpdater$p_2,t)+n;a!==this.$VideoPriorityUpdater$p_3&&(this.$VideoPriorityUpdater$p_3=a,this.emit("priority_updated",a))}},t})(r("EventEmitter"));l.default=e}),98);
__d("createErrorStream",["oz-player/networks/OzCreateErrorStream"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("oz-player/networks/OzCreateErrorStream")}),98);
__d("VideoSegmentStreamByFetch",["invariant","VideoAkamaiRequestHelper","VideoClientEdgeCooperation","VideoSegmentInfoHelper","createErrorStream"],(function(t,n,r,o,a,i,l,s){"use strict";var e=window.fetch,u=(function(){function t(e){this.$1=e}var n=t.prototype;return n.getResourceUrl=function(t){var e=this.$2(t),n=o("VideoSegmentInfoHelper").getRequestUri(e);return n.toString()},n.startStream=function(n){var t=this.getResourceUrl(n),a={};if(o("VideoAkamaiRequestHelper").isAkamai(t)){var i=this.$2(n);a=o("VideoAkamaiRequestHelper").getRequestHeaders(i)||{}}return e(t,{headers:a}).then(function(e){o("VideoClientEdgeCooperation").updateFromResponse(e);var n=e.body,a=e.ok,i=e.status;return a?(n.getReader||s(0,3287),n):r("createErrorStream")({type:"net",status:i,url:t,message:"HTTP error."})}).catch(function(e){return e instanceof TypeError?r("createErrorStream")({type:"net",status:0,url:t,message:"Network failure."}):r("createErrorStream")({type:"stream_processing",status:0,url:t,message:"Stream processing error."+e})})},n.$2=function(t){return{baseUrl:this.$1,startByte:t.startByte,endByte:t.endByte===null?void 0:t.endByte}},t})();l.default=u}),98);
__d("VideoStreamingManager",["ChunkableContinuousRangeStream","ContinuousPausableStreamTask","EventEmitter","FetchStreamStateTracker","FixedSizeTransform","MaybeNativePromise","NetworkErrorTransformStream","PausableRangeStream","ReadableStream","ShakaConstants","StreamBandwidthReporter","StreamFetchRequestLogger","SubscriptionsHandler","VideoPriorityCalculator","VideoPriorityUpdater","VideoSegmentStreamByFetch","VideoStreamingTaskQueueProvider","WritableStream","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(t){function n(e,n,a,i,l){var s;return a===void 0&&(a="video"),i===void 0&&(i=null),l===void 0&&(l=[]),s=t.call(this)||this,s.$VideoStreamingManager$p_9=[],s.$VideoStreamingManager$p_10=null,s.$VideoStreamingManager$p_13=new(r("SubscriptionsHandler")),s.$VideoStreamingManager$p_14=1/0,s.$VideoStreamingManager$p_16=null,s.$VideoStreamingManager$p_17=!1,s.$VideoStreamingManager$p_20=function(e,t){s.$VideoStreamingManager$p_17=!1},s.$VideoStreamingManager$p_19=function(e){if(e!==s.$VideoStreamingManager$p_14){s.$VideoStreamingManager$p_14=e,s.$VideoStreamingManager$p_5&&s.$VideoStreamingManager$p_5.getEventLogger("priority_changed").setPriorityFloat(s.$VideoStreamingManager$p_14).log();var t=s.$VideoStreamingManager$p_10;if(t){t.updatePriority(s.$VideoStreamingManager$p_14);var n=s.$VideoStreamingManager$p_6;!n||n.isClosed()||(e>=o("VideoPriorityCalculator").getMaxPriority()?s.$VideoStreamingManager$p_15&&s.$VideoStreamingManager$p_25(s.$VideoStreamingManager$p_15):n.removeQueuedRange(),s.$VideoStreamingManager$p_11&&s.$VideoStreamingManager$p_11.updatePriority(t,s.$VideoStreamingManager$p_14))}}},s.$VideoStreamingManager$p_1=e,s.$VideoStreamingManager$p_4=new(r("FetchStreamStateTracker")),s.$VideoStreamingManager$p_3=n,s.$VideoStreamingManager$p_5=i,s.$VideoStreamingManager$p_7=a,s.$VideoStreamingManager$p_11=o("VideoStreamingTaskQueueProvider").getQueue(a),s.$VideoStreamingManager$p_12=new(r("VideoPriorityUpdater"))(s.$VideoStreamingManager$p_1,l),s.$VideoStreamingManager$p_13.addSubscriptions(s.$VideoStreamingManager$p_12.addListener("priority_updated",s.$VideoStreamingManager$p_19)),s.$VideoStreamingManager$p_3.setOnSegmentsUpdated(s.$VideoStreamingManager$p_20),s}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.getStream=function(t){return this.$VideoStreamingManager$p_1.getBool("use_continuous_streaming",!0)?this.$VideoStreamingManager$p_21(t):this.$VideoStreamingManager$p_22(t)},a.getPriorityUpdater=function(){return this.$VideoStreamingManager$p_12},a.getProgressTracker=function(){return this.$VideoStreamingManager$p_16},a.resumeVideoFetching=function(){this.$VideoStreamingManager$p_17=!1,this.$VideoStreamingManager$p_23()},a.stopUntilSegmentsUpdate=function(){this.$VideoStreamingManager$p_10&&this.$VideoStreamingManager$p_10.cancelOnCurrentStreamDone(),this.$VideoStreamingManager$p_17=!0},a.updatePlayerState=function(t){this.$VideoStreamingManager$p_18=t,this.$VideoStreamingManager$p_12.updatePriorityWithNewPlayerState(t)},a.destroy=function(){this.$VideoStreamingManager$p_16!=null&&this.$VideoStreamingManager$p_16.destroy(),this.$VideoStreamingManager$p_13.release(),this.$VideoStreamingManager$p_10&&this.$VideoStreamingManager$p_10.cancel(),this.$VideoStreamingManager$p_10&&this.$VideoStreamingManager$p_11&&this.$VideoStreamingManager$p_11.remove(this.$VideoStreamingManager$p_10),this.$VideoStreamingManager$p_24(),this.$VideoStreamingManager$p_3&&this.$VideoStreamingManager$p_3.clearOnSegmentsUpdated()},a.$VideoStreamingManager$p_24=function(){this.$VideoStreamingManager$p_6&&this.$VideoStreamingManager$p_6.destroy(),this.$VideoStreamingManager$p_6=null},a.$VideoStreamingManager$p_26=function(){var e=this,t=function(){if(!e.$VideoStreamingManager$p_9.length)return r("MaybeNativePromise").resolve(null);var n=e.$VideoStreamingManager$p_9[0];return n().then(function(n){return n||(e.$VideoStreamingManager$p_9.length===1?null:(e.$VideoStreamingManager$p_9.shift(),t()))})};return t},a.$VideoStreamingManager$p_23=function(){var e=this;if(!(this.$VideoStreamingManager$p_10||this.$VideoStreamingManager$p_17)){var t=new(r("ContinuousPausableStreamTask"))(this.$VideoStreamingManager$p_26(),this.$VideoStreamingManager$p_7,this.$VideoStreamingManager$p_14,this.$VideoStreamingManager$p_5,{uncancellablePriority:1/0,disableAudioStreamPause:!1,yieldOnLowPriStream:!1,lowPriTaskYieldCheckInterval:r("ShakaConstants").numbers.low_pri_task_yield_check_interval,lowPriTaskMinBytesToYield:r("ShakaConstants").numbers.low_pri_task_min_bytes_to_yield,lowPriTaskYieldsPerTask:r("ShakaConstants").numbers.low_pri_task_yields_per_task});this.$VideoStreamingManager$p_10=t;var n;this.$VideoStreamingManager$p_11?(this.$VideoStreamingManager$p_11.enqueue(t,this.$VideoStreamingManager$p_14),n=t.getPromise()):n=t.run(),n.then(function(){e.$VideoStreamingManager$p_10=null}).catch(function(t){e.$VideoStreamingManager$p_10=null,t.message==="cancelled"&&e.$VideoStreamingManager$p_23()})}},a.$VideoStreamingManager$p_27=function(t,n){var e=t.endByte,r=t.startByte;return n>=o("VideoPriorityCalculator").getMaxPriority()?this.$VideoStreamingManager$p_3.getFetchRanges(t):[{startByte:r,endByte:e}]},a.$VideoStreamingManager$p_28=function(t){this.$VideoStreamingManager$p_15=t;var e=t.baseUrl;this.$VideoStreamingManager$p_8&&this.$VideoStreamingManager$p_8!==e&&this.$VideoStreamingManager$p_24(),this.$VideoStreamingManager$p_8=e},a.$VideoStreamingManager$p_29=function(t){this.$VideoStreamingManager$p_6==null&&(this.$VideoStreamingManager$p_6=this.$VideoStreamingManager$p_30(t)),this.$VideoStreamingManager$p_25(t)},a.$VideoStreamingManager$p_21=function(t){var e=this;this.$VideoStreamingManager$p_28(t),this.$VideoStreamingManager$p_29(t);var n=t.endByte,o=t.startByte;return this.$VideoStreamingManager$p_6?this.$VideoStreamingManager$p_6.getReservedChunkStream({startByte:o,endByte:n}).then(function(t){return e.$VideoStreamingManager$p_23(),t}).catch(function(r){return e.$VideoStreamingManager$p_6=e.$VideoStreamingManager$p_30(t),e.$VideoStreamingManager$p_6.getReservedChunkStream({startByte:o,endByte:n}).then(function(t){return e.$VideoStreamingManager$p_23(),t})}):r("MaybeNativePromise").reject()},a.$VideoStreamingManager$p_30=function(t){var e=this.$VideoStreamingManager$p_3.getSegmentsBoundaries(t),n=this.$VideoStreamingManager$p_31(t.baseUrl,e),o=new(r("ChunkableContinuousRangeStream"))(n,{disableStreamAutoStart:!0,enableStreamRangeConcat:!1,disableDeferredBufferArrayShift:!1,fixFixedSizeTransformOnNullEndByte:!0,useNativePromiseInDeferredBuffer:!0,fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStart:!0,fixPausePreReadableStream:!1,enableFactoryDestroy:!1});return this.$VideoStreamingManager$p_9.push(o.getPausableStreamFactory()),o},a.$VideoStreamingManager$p_25=function(t){var e=this.$VideoStreamingManager$p_6;if(e){var n=this.$VideoStreamingManager$p_27(t,this.$VideoStreamingManager$p_14);for(var r of n){var o=e.updateRangeStream(r),a=e.getCurrentStreamRange();if(o==="closed")this.$VideoStreamingManager$p_6=this.$VideoStreamingManager$p_30(t),this.$VideoStreamingManager$p_25(t);else if(a&&a.endByte===r.endByte)continue;return}}},a.$VideoStreamingManager$p_22=function(t){var e=this,n=t.endByte,o=t.startByte;if(o===void 0)return r("MaybeNativePromise").reject("request range does not exist");var a=function(){e.$VideoStreamingManager$p_4.setNextRequestInfo(t),(!e.$VideoStreamingManager$p_4.isNextRequestContinuous()||!e.$VideoStreamingManager$p_4.isNextRequestInRange()||!e.$VideoStreamingManager$p_2)&&(e.$VideoStreamingManager$p_2&&e.$VideoStreamingManager$p_2.cancel("reset stream"),e.$VideoStreamingManager$p_2=e.$VideoStreamingManager$p_32(t));var r;return n==null?r=void 0:r=n-o+1,e.$VideoStreamingManager$p_2.getNextFixedSizeStream(r)};return a().catch(function(){return e.$VideoStreamingManager$p_33(),a()})},a.$VideoStreamingManager$p_32=function(t){var e=this.$VideoStreamingManager$p_3.getSegmentsBoundaries(t),n=this.$VideoStreamingManager$p_31(t.baseUrl,e),o=this.$VideoStreamingManager$p_3.getFetchRanges(t)[0];this.$VideoStreamingManager$p_4.setFetchRange(o);var a=new(r("PausableRangeStream"))(r("ReadableStream"),r("WritableStream"),o,n,{fixStreamingUndefinedEndByte:!0}),i=new(r("FixedSizeTransform"))({fixFixedSizeTransformOnNullEndByte:!0});return a.startStream(),a.getStream().pipeTo(i.getSink()),i},a.$VideoStreamingManager$p_31=function(t,n){var e=this,o=new(r("VideoSegmentStreamByFetch"))(t),a=function(t){return o.getResourceUrl(t)},i=function(n){return e.$VideoStreamingManager$p_3.getTimeRange(n)},l=o,s=this.$VideoStreamingManager$p_34(l);return l=this.$VideoStreamingManager$p_35(s,a,i),this.$VideoStreamingManager$p_7==="video"&&(l=this.$VideoStreamingManager$p_36(l,n)),l},a.$VideoStreamingManager$p_34=function(t){return{startStream:function(n){var e=new(r("NetworkErrorTransformStream"));return t.startStream(n).then(function(t){return t.pipeThrough(e)})}}},a.$VideoStreamingManager$p_36=function(t,n){var e=this;return{startStream:function(a){var o=n[0].startByte,i=new(r("StreamBandwidthReporter"))(e.$VideoStreamingManager$p_1,o,n.filter(function(e){return e!==null}).map(function(e){return e.endByte||0}));return i.addListener("bandwidthUpdate",function(t){return e.emit("bandwidthUpdate",t)}),t.startStream(a).then(function(e){return e.pipeThrough(i)})}}},a.$VideoStreamingManager$p_35=function(n,o,a){var t=this,i=this.$VideoStreamingManager$p_5;return i?{startStream:function(s){var l=new(r("StreamFetchRequestLogger"))(i,t.$VideoStreamingManager$p_7,o(s),a(s),s,(e||(e=r("performanceNow")))(),t.$VideoStreamingManager$p_14);return n.startStream(s).then(function(e){return e.pipeThrough(l)})}}:n},a.$VideoStreamingManager$p_33=function(){this.$VideoStreamingManager$p_4=new(r("FetchStreamStateTracker"))},n})(r("EventEmitter"));l.default=s}),98);
__d("ViewportPriorityAdjuster",["Event","SubscriptionsHandler","getElementPosition","getViewportDimensions","throttle"],(function(t,n,r,o,a,i,l){"use strict";var e=500,s=800,u=(function(){function t(t){var n=this;this.$1=function(){},this.$2=new(r("SubscriptionsHandler")),this.$3=t,this.$2.addSubscriptions(r("Event").listen(window,"scroll",r("throttle")(function(){return n.$4(t)},e)))}var n=t.prototype;return n.$5=function(t){if(!t.paused)return 0;var e=r("getViewportDimensions")(),n=r("getElementPosition")(t),o=n.y,a=n.height,i=e.height;return!o&&!a||o+a<0?-2:o>=0&&o+a<=i+s||o<=0&&o+a>=0?0:-1},n.$4=function(t){this.$1(this.$5(t))},n.setOnPriorityChanged=function(t){this.$1=t},n.getPriorityAdjustment=function(){return this.$5(this.$3)},n.cleanup=function(){this.$1=function(){},this.$2.release()},t})();l.default=u}),98);
__d("canUseFetchStream",[],(function(t,n,r,o,a,i){"use strict";function e(){var e=!!window.fetch,t=!!(window.ReadableStream&&window.WritableStream),n=!!(window.ReadableStream&&window.ReadableStream.prototype.pipeTo);return e&&t&&n}i.default=e}),66);
__d("concatArrayBuffer",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}i.default=e}),66);
__d("extractCEA608",["JSResource"],(function(t,n,r,o,a,i,l){var e=null;function s(t){return e||(e=r("JSResource")("CEA608Extractor").__setRef("extractCEA608").load()),e.then(function(e){return e.extract(t)})}s.prepare=function(){},l.default=s}),98);
__d("getSeekRangeGapsFromShakaReferences",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=[],r=0;r<e.length;++r)if(e[r].timescaledGapInfo&&e[r].timescaledGapInfo.gapDistance>0){var o=0;e[r].unscaledStartTime&&(o=e[r].startTime-e[r].unscaledStartTime/t),n.push({start:e[r].timescaledGapInfo.segmentOriginalEndTime+o,end:e[r].endTime})}return n}i.default=e}),66);
__d("logLongAkamaiRequest",["CurrentUser","FBLogger"],(function(t,n,r,o,a,i,l){var e=!1,s=2,u=[];function c(t){r("CurrentUser").isEmployee()&&!e&&(u=u.filter(function(e){var t=e.time;return Date.now()-t<1e3*60*2}),u.push({data:t,time:Date.now()}),u.length>=s&&(e=!0,r("FBLogger")("shaka").warn("Long latency video request to akamai: %s",u.map(function(e){var t=e.data;return t}).join(" ; "))))}l.default=c}),98);
__d("maybeConvertHiveErrorToShakaNetError",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e&&e.type==="Hive"&&e.status!=null&&(e.type="net"),e}i.default=e}),66);
__d("mergeSeekRangeGaps",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=[];if(e.length){e.sort(function(e,t){return e.start-t.start});for(var n=e[0].start,r=e[0].end,o=1;o<e.length;++o)e[o].start<=r?r=Math.max(r,e[o].end):(t.push({startTime:n,endTime:r}),n=e[o].start,r=e[o].end);t.push({startTime:n,endTime:r})}return t}i.default=e}),66);
__d("getBandwidthUpgradeTargetFactor",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r){return t<n||n<=0?1:1-e/t*r}i.default=e}),66);
__d("getVideoTracksWithoutSmoothPlayback",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r){if(!window.navigator||window.navigator.mediaCapabilities==null||typeof window.navigator.mediaCapabilities.decodingInfo!="function")return(e||(e=n("Promise"))).resolve([]);var o=window.navigator.mediaCapabilities.decodingInfo,a={type:"media-source",audio:{contentType:(r.mimeType||"")+'; codecs="'+(r.codecs||"")+'"',channels:String(r.channels),bitrate:r.bandwidth,samplerate:r.samplingRate}};return(e||(e=n("Promise"))).all(t.map(function(e){return o(babelHelpers.extends({},a,{video:{contentType:(e.mimeType||"")+'; codecs="'+(e.codecs||"")+'"',width:e.width,height:e.height,bitrate:e.bandwidth,framerate:e.frameRate}}))})).then(function(e){var n=[];return t.forEach(function(t,r){(!e[r].supported||!e[r].smooth)&&n.push(t)}),n}).catch(function(e){return[]})}i.default=l}),66);
__d("CustomAbrManager",["invariant","AbrEvaluationSignal","RlAbrModel","RlAbrUtils","Shaka","ShakaConstants","SubscriptionsHandler","VideoClientEdgeCooperation","VideoDashPrefetchCache","VideoPlaybackQuality","VideoPlayerConnectionQuality","VideoPlayerLocalBandwidthEstimator","VideoQualityClasses","asyncToGeneratorRuntime","getBandwidthUpgradeTargetFactor","getBufferedAheadOf","getVideoTracksWithoutSmoothPlayback"],(function(t,n,r,o,a,i,l,s){var e=window.devicePixelRatio||1,u=(function(){function t(e){this.$38=!1,this.$2=null,this.$3=null,this.$4=e.shakaConfig,this.$5=e.performanceLogger,this.$7=new(r("SubscriptionsHandler")),this.$8=!0,this.$9=!1,this.$6=e.isSpherical,this.$10=e.width,this.$11=e.height,this.$13=e.resolutionConstraintMaxWidth,this.$12=e.resolutionConstraintMaxHeight,this.$14=e.minPlayQuality?e.minPlayQuality:null,this.$15=e.maxPlayQuality?e.maxPlayQuality:null,this.$16=e.initiallyForcedRepresentations||r("VideoDashPrefetchCache").getCachedRepresentations(e.videoID),this.$17=e.video,this.$18=e.videoID,this.$29=null,this.$27=null,this.$28=null,this.$40=!1,this.$30=e.getSource,this.$36=typeof e.useStrictTrackDimensionsExclusionLogic=="boolean"?e.useStrictTrackDimensionsExclusionLogic:!1,e.enableAdaptation&&(this.$19=e.bandwidthModel,this.$20=e.bandwidthDowngradeTarget,this.$21=e.bandwidthUpgradeTarget,this.$22=e.useNewBandwidthBandLogic,this.$23=e.hvqUpgradeAggressiveness,this.$24=e.hvqInlineUpgradeAggressiveness,this.$25=e.preHvqUpgradeAggressiveness,this.$26=e.preHvqInlineUpgradeAggressiveness,this.$31=e.enableReinforcementLearning,this.$33=e.rlModelId,this.$32=e.rlUseShortFeatures,this.$39=e.videoWatchTimeTracker,this.$41=new(r("RlAbrModel"))(this.$4),this.$43=e.chosenVideoTrackChangedCallback)}var a=t.prototype;return a.destroy=function(){this.$1&&(this.$1.destroy(),this.$1=null),this.$7.release(),this.$7.engage(),this.$2=null,this.$3=null,this.$8=!1},a.setDimensions=function(t,n){this.$10=t,this.$11=n,this.$2&&this.$2.setResolutionConstraint(this.$45(),this.$46());var e=this.$17.paused?r("ShakaConstants").numbers.clear_buffer_on_constraint_change_paused_offset:r("ShakaConstants").numbers.clear_buffer_on_constraint_change_offset;this.$47({clearBufferIfUpgrading:!1,clearBufferOffset:e})},a.initialize=function(t,n){this.$2||this.$3||(this.$2=t,this.$3=n,t.setResolutionConstraint(this.$45(),this.$46()))},a.start=function(){var e=this;!this.$2||!this.$3||this.$9||(this.$2&&(this.$1=new(r("AbrEvaluationSignal"))(this.$17,this.$2,this.$3,{minEvalInterval:this.$4.getNumber("min_eval_interval",1e3),minSwitchInterval:this.$4.getNumber("min_switch_interval",5e3),ignoreTimeLimitForInitialSample:!0,useLowBufferVelocityInterval:!1,lowBufferVelocityIntervalBufferThreshold:r("ShakaConstants").numbers.low_buffer_velocity_abr_interval_buffer_threshold,lowBufferVelocityAbrInterval:r("ShakaConstants").numbers.low_buffer_velocity_abr_interval,evaluateAbrOnFetchEnd:this.$4.getBool("evaluate_abr_on_fetch_end",!1),evaluateAbrOnTracksAndBandwidthChange:this.$4.getBool("evaluate_abr_on_tracks_and_bandwidth_change",!0),ignoreRecentBandwidthEvalOnFetchEnd:this.$4.getBool("ignore_recent_bandwidth_eval_on_fetch_end",!1)}),this.$1.addListener("evaluate",function(t){return e.$48(t)})),this.$9=!0)},a.$49=function(){return this.$16||(this.$16=r("VideoDashPrefetchCache").getCachedRepresentations(this.$18)),this.$16},a.$48=function(t){this.$47(t)},a.$50=function(){var t=this.$4.getNumber("resolution_constraint_factor",2);return t*e},a.$45=function(){return this.$6?1/0:Math.min(this.$10*this.$50(),this.$13)},a.$46=function(){return this.$6?1/0:Math.min(this.$11*this.$50(),this.$12)},a.setPreferredVideoTrack=function(t){this.$29=t,this.$47({clearBufferIfUpgrading:!0,clearBufferOffset:0})},a.unsetPreferredVideoTrack=function(){this.$29=null,this.$47()},a.enable=function(t){this.$8=t},a.getInitialVideoTrackId=function(){if(!this.$2||!this.$3)return null;var e=this.$51();return e?e.id:null},a.getInitialSwitchReason=function(){return this.$28},a.getInitialAudioTrackId=function(){if(!this.$2||!this.$3)return null;var e=this.$52();return e?e.id:null},a.selectVideoTrack=function(o,a,i,l){if(this.$9){var e=r("ShakaConstants").numbers.abr_abort_when_fetch_estimate_exceeds_buffer_factor,s=r("ShakaConstants").numbers.abr_abort_when_fetch_estimate_exceeds_time,u=r("ShakaConstants").numbers.abr_abort_on_zero_stream_progress_below_threshold,c=this.$3.getVideoStreamProgressTracker(),d=t.$53(this.$3.getVideoTracks()),m=!(d&&n("Shaka").player.VideoTrack.compare(d,o)<0);if(c&&c.canTrackProgress()&&c.hasStarted()){var p=r("getBufferedAheadOf")(this.$17),_=c.getEstimatedTimeRemainingOfStream(),f=e>0&&_>p*e,g=s>0&&_>s,h=u>-1?c.getProgress()<=u:!1;if(m&&(f||g||h)){this.$3.selectVideoTrack(o.id,a,i,l,!0);return}}this.$3.selectVideoTrack(o.id,a,i,l,!1)}},t.$53=function(t){for(var e=0;e<t.length;++e)if(t[e].active)return t[e];return null},a.$54=function(t){var e,n=(e=r("ShakaConstants")).numbers.live_predictive_abr_up_buffer,o=e.numbers.live_predictive_abr_down_buffer,a=e.numbers.live_predictive_abr_up_retry_interval,i=e.numbers.live_predictive_abr_ttfb_ratio,l=e.numbers.live_predictive_abr_floor_ttfb_ratio,s=e.numbers.live_predictive_abr_floor_swich_lanes,u=this.$55();this.$56(u),u=this.$57(u);var c=r("getBufferedAheadOf")(this.$17),d=0;if(!this.$40)return this.$51(u);l>0&&t.streamFetchTimeMs>t.segmentLengthMs*l?(d=s<-100?-1/0:s,this.$27="download_longer_than_duration"):i>0&&t.streamFetchTimeMs>t.segmentLengthMs*i?(d=-1,this.$27="download_longer_than_duration"):c<o/1e3?(d=-1,this.$27="low_buffer_availability"):c>=n/1e3&&this.$42+a<Date.now()&&(d=1,this.$27="high_buffer_availability"),d<0&&(this.$42=Date.now());var m=u[Math.max(Math.min(this.$35+d,u.length-1),0)];return d!=0&&this.$58(this.$27,m,u),m},a.$59=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=[];this.$4.getBool("exclude_tracks_without_smooth_playback",!1)&&(e=yield r("getVideoTracksWithoutSmoothPlayback")(this.$55(),this.$60()));var t=null;return this.$31?t=yield this.$61():t=this.$51(e),t});function t(){return e.apply(this,arguments)}return t})(),a.$47=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e===void 0&&(e={clearBufferIfUpgrading:!1,clearBufferOffset:0}),!!this.$8){var r=e,o=r.clearBufferIfUpgrading,a=r.clearBufferOffset,i=null;if(e&&e.streamFetchTimeMs&&e.segmentLengthMs&&this.$4.getBool("shaka_buffer_abr",!1)?i=this.$54({streamFetchTimeMs:e.streamFetchTimeMs,segmentLengthMs:e.segmentLengthMs}):i=yield this.$59(),i){if(i.active)return;var l=!1;if(o){var s=t.$53(this.$3.getVideoTracks());l=s?n("Shaka").player.VideoTrack.compare(s,i)<0:!1}this.$1&&this.$1.notifySwitch(),this.selectVideoTrack(i,l,a,this.$27)}}});function r(t){return e.apply(this,arguments)}return r})(),a.$62=function(){var e=this;return this.$38=this.$38||o("VideoPlayerConnectionQuality").evaluate(function(){return e.$63()})==="POOR",this.$38},a.$64=function(){if(!this.$3)return!1;var e=this.$3.getBufferVelocity();return e!==null&&e<r("ShakaConstants").numbers.low_buffer_velocity_threshold},a.$58=function(n,r,o){var e=this.$34||t.$53(o);this.$5&&this.$5.getEventLogger("abr_evaluation").setDynamicBitrate(r.bandwidth).setStreamSwitchReason(n).setInitiator(e?e.streamInfoID:null).setConcluder(r.streamInfoID).setResult(r.active?"paused":"success").log()},a.$60=function(){return this.$3.getAudioTracks().find(function(e){return e.active})},a.$55=function(){return this.$3.getVideoTracks({useLocalBitrate:!1})},a.$56=function(n){this.$34=t.$53(n),this.$35=this.$34?n.indexOf(this.$34):-1},a.$57=function(t){var e=this;if(t.length===0)return[];t=t.filter(function(t){return!(t.avoidOnPoorConnection&&e.$62())});var o=this.$49();if(!this.$9){for(var a=0;a<t.length;a++)if(o&&o.includes(t[a].streamInfoID))return this.$27="forced",this.$28="forced",this.$58(this.$27,t[a],[t[a]]),[t[a]]}if(this.$29){var i=this.$29.id,l=t.find(function(e){return e.id===i});if(l)return this.$27="user",this.$58(this.$27,l,[l]),[l]}if(t.sort(n("Shaka").player.VideoTrack.compare),this.$14!==null||this.$15!==null){var s=this.$14,u=this.$15,c=s!=null?r("VideoQualityClasses").indexOf(s):0,d=u!=null?r("VideoQualityClasses").indexOf(u):r("VideoQualityClasses").length-1;if(c<=d){var m=t.filter(function(e){return r("VideoQualityClasses").indexOf(e.fbQualityClass)>=c&&r("VideoQualityClasses").indexOf(e.fbQualityClass)<=d});if(this.$27="prefer_quality_class",!m.length)return this.$58(this.$27,t[t.length-1],[t[t.length-1]]),[t[t.length-1]];var p=r("VideoQualityClasses").indexOf("sd");if(t.length===2&&m.length===2&&d<=p)return this.$58(this.$27,t[0],[t[0]]),[t[0]];t=m}}return t},a.$65=function(t){var e=this,n=this.$46(),r=this.$45();return t=t.filter(function(t){return e.$36?(t.width||0)<=r&&(t.height||0)<=n:(t.width||0)<=r||(t.height||0)<=n}),t},a.$66=function(t,n){return n.length===0?t:t.filter(function(e){return!n.find(function(t){return e.id===t.id})})},a.$67=function(){if(this.$3===null)return!1;var e=r("ShakaConstants").numbers.buffer_velocity_time_in_past_to_consider>0;return!!(e&&!this.$64())},a.$68=function(t){this.$43&&((t==null&&this.$44!=null||t!=null&&this.$44==null||t!=null&&this.$44!=null&&this.$44.streamInfoID!=t.streamInfoID)&&this.$43(t),this.$44=t)},a.$51=function(n){n===void 0&&(n=[]);var e=this.$55();this.$56(e),e=this.$57(e);var a=this.$63();if(e.length===0)return this.$68(null),null;if(e.length===1)return this.$68(e[0]),e[0];this.$40=!0;var i=e[0];e=this.$66(e,n);var l=e.reduce(function(e,t){return e>(t.bandwidth||0)?e:t.bandwidth||0},0);a=o("VideoClientEdgeCooperation").applyBandwidthLimit(a,l),e=this.$65(e);var s=t.$53(this.$3.getAudioTracks()),u=s?s.bandwidth:0,c=r("getBufferedAheadOf")(this.$17);if(c<this.$4.getNumber("force_lowest_representation_threshold",0)&&!this.$67()){var d=0;return this.$35>-1&&(d=Math.floor(this.$35*this.$4.getNumber("force_lower_representation_step_ratio",0))),d>=e.length&&(d=e.length-1),this.$27="low_buffer_availability",i=e[d]||i,this.$58(this.$27,i,e),this.$68(i),i}else{for(var m=0,p=0;p<e.length;p++){var _=e[p],f=p+1<e.length?e[p+1]:{bandwidth:Number.POSITIVE_INFINITY};if(_.bandwidth){var g=this.$69(_,f,c,this.$30&&this.$30()),h=this.$22?m:(_.bandwidth+u)/this.$20,y=(f.bandwidth+u)/g;if(m=y,a>=h&&a<=y&&(i=_,i.active))break}}this.$27="bandwidth"}return this.$58(this.$27,i,e),this.$68(i),i},a.$63=function(){return this.$2 instanceof r("VideoPlayerLocalBandwidthEstimator")||s(0,2969),this.$2.getBandwidth(this.$19)},a.$69=function(t,n,a,i){var e=1;!t.isInlineHVQ&&n.isInlineHVQ?e=this.$26:t.isInlineHVQ&&i==="inline"?e=this.$24:t.isHVQ&&(e=this.$23);var l=r("ShakaConstants").numbers.buffer_target,s=l>-1;if(s){var u=a>l,c=u?r("ShakaConstants").numbers.buffer_target_overflow_upgrade_aggressiveness:r("ShakaConstants").numbers.buffer_target_underflow_upgrade_aggressiveness;e*=c}var d=r("ShakaConstants").numbers.frame_drop_penalty_minimum_frame_count;return d>0&&(e*=r("getBandwidthUpgradeTargetFactor")(o("VideoPlaybackQuality").getDroppedFrames(this.$17),o("VideoPlaybackQuality").getTotalFrames(this.$17),d,r("ShakaConstants").numbers.frame_drop_penalty_factor)),this.$21*e},a.$52=function(){var e=this.$3.getAudioTracks();if(e.length===0)return null;var t=this.$49();if(!this.$9){for(var n=0;n<e.length;n++)if(t&&t.includes(e[n].streamInfoID))return e[n]}return null},a.$61=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t=this.$55();if(this.$56(t),t=this.$57(t),t.length===0)return null;if(t.length===1)return t[0];if(t=this.$65(t),t.length===0)return null;if(t.length===1)return t[0];this.$27="forced";var n=t[0],a=r("getBufferedAheadOf")(this.$17),i=this.$63(),l=this.$32?o("RlAbrUtils").getRlAbrShortFeatures(this.$17,t,a,i):o("RlAbrUtils").getRlAbrFeatures(this.$17,t,a,i,this.$39);if(!l)return this.$51();var s=this.$45(),u=this.$46();try{if(this.$32){var c=yield o("RlAbrUtils").genRlAbrShortFeaturesRecommendation(l,this.$4.getNumber("min_eval_interval",1e3),this.$33);if(!c||c.length===0)throw new Error("RL service not available.");for(var d=function*(a){var r=t.find(function(e){var t=o("RlAbrUtils").getQualityLabelBracket(e.fbQualityLabel,this.$32);return t===c[a]&&(e.width<=s||e.height<=u)});if(r)return n=r,e.$27="rl_decision",1},m=0;m<c.length&&!(yield*d(m));m++);}else{var p=this.$39?this.$39.getGuid():null;if(p===null)return this.$51();var _=o("RlAbrUtils").getRlAbrAvailableBitrates(t);if(_.length>r("ShakaConstants").numbers.rl_max_number_of_bitrates)return this.$51();var f=r("ShakaConstants").numbers.rl_request_timeout;if(f=Math.min(f,(a-1)*1e3),f<0)return this.$51();var g=r("ShakaConstants").strings.rl_smc_tier;if(this.$41.modelFetched()){var h=this.$41.getPolicyReportExperience(p,g,l,_,t,f);n=t[h],this.$27="rl_decision"}else return this.$41.fetchIfNotExist(p,g,f),this.$51()}}catch(e){return this.$51()}return this.$37=l,this.$58(this.$27,n,t),n});function t(){return e.apply(this,arguments)}return t})(),t})();l.default=u}),98);
__d("ErrorMetadata",["fb-error"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t.addGlobalMetadata=function(n,r,o){e.addGlobalMetadata.call(this,n,r,o)},t})(r("fb-error").ErrorMetadata);l.default=e}),98);
__d("LiveClockQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9914749891938652"}),null);
__d("LiveClockQuery.graphql",["LiveClockQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"client_time"}],t=[{alias:null,args:[{kind:"Variable",name:"client_time",variableName:"client_time"}],concreteType:"LiveClock",kind:"LinkedField",name:"live_video_clock",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"server_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_time",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LiveClockQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LiveClockQuery",selections:t},params:{id:n("LiveClockQuery_facebookRelayOperation"),metadata:{},name:"LiveClockQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("LiveClockWWWTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.log=function(t){n("GeneratedLoggerUtils").log("logger:LiveClockWWWLoggerConfig",this.$1,n("Banzai").BASIC,t)},t.logVital=function(t){n("GeneratedLoggerUtils").log("logger:LiveClockWWWLoggerConfig",this.$1,n("Banzai").VITAL,t)},t.logImmediately=function(t){n("GeneratedLoggerUtils").log("logger:LiveClockWWWLoggerConfig",this.$1,{signal:!0},t)},t.clear=function(){return this.$1={},this},t.getData=function(){return babelHelpers.extends({},this.$1)},t.updateData=function(t){return this.$1=babelHelpers.extends({},this.$1,t),this},t.setClientReceiveTimeMs=function(t){return this.$1.client_receive_time_ms=t,this},t.setClientSendTimeMs=function(t){return this.$1.client_send_time_ms=t,this},t.setRequestTimeMs=function(t){return this.$1.request_time_ms=t,this},t.setServerTimeMs=function(t){return this.$1.server_time_ms=t,this},e})(),l={client_receive_time_ms:!0,client_send_time_ms:!0,request_time_ms:!0,server_time_ms:!0};i.default=e}),66);
__d("LiveClock",["LiveClockQuery.graphql","LiveClockWWWTypedLogger","RelayFBEnvironment","RelayModern","asyncToGeneratorRuntime","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=5e3,u=12e4,c=5,d=2e3,m=50,p=1e4,_=1e4,f=e!==void 0?e:e=n("LiveClockQuery.graphql"),g=(function(){function e(){this.$1=null,this.$2=!1,this.$4=0,this.$5=_,this.$6=0,this.$7=0,this.$8=!1,this.$3=0,this.$10(0)}var t=e.prototype;return t.$10=function(t){this.$6=0},t.startClock=function(t){this.$8||(this.$8=!0,t!=null&&(this.$1=t),r("promiseDone")(this.$11()))},t.stopClock=function(){this.$8=!1,window.clearTimeout(this.$9)},t.$11=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$8){var e=this.currentTimeMillis();yield this.fetchTimes(e)}});function t(){return e.apply(this,arguments)}return t})(),t.$12=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var o=(t-e+(n-r))/2,a=r-e-(n-t);if(this.$13(e,t,n,r),this.$14(o,a),yield this.$15(o,a),!this.$2){this.$2=!0;var i=this.currentTimeMillis();this.$1!=null&&this.$1(i)}});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),t.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this.$16(e);n||(this.$7=0),n?(this.$7++,this.$5=m,this.$7>c&&(this.$5=d)):this.$17(t)?this.$5=_:(this.$5*=2,this.$5>u&&(this.$5=u),this.$5<_&&(this.$5=_))});function t(t,n){return e.apply(this,arguments)}return t})(),t.$14=function(t,n){if(this.$17(n)){this.$4==0&&(this.$6+=t);return}this.$6+=t,this.$4++},t.fetchTimes=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this;r("promiseDone")(o("RelayModern").fetchQuery(r("RelayFBEnvironment"),f,{client_time:e},{force:!0}).then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e){var n=e.live_video_clock.client_time,o=e.live_video_clock.server_time*1e3,a=e.live_video_clock.request_time*1e3,i=t.currentTimeMillis();yield t.$12(n,a,o,i),t.$9=window.setTimeout(function(){r("promiseDone")(t.$11())},t.$5)}else return});return function(t){return e.apply(this,arguments)}})()))});function t(t){return e.apply(this,arguments)}return t})(),t.currentTimeMillis=function(){return this.elapsedRealTimeMillis()+this.$3+this.$6},t.elapsedRealTimeMillis=function(){return Date.now()},t.$16=function(t){return Math.abs(t)>s},t.$17=function(t){return t>p},t.isRunning=function(){return this.$8},t.isReady=function(){return this.$2},t.$13=function(t,n,o,a){new(r("LiveClockWWWTypedLogger"))().setClientSendTimeMs(t).setRequestTimeMs(n).setServerTimeMs(o).setClientReceiveTimeMs(a).log()},e})();l.default=g}),98);
__d("LowLatencyPlayheadManager",["clearInterval","setIntervalAcrossTransitions"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r,o,a){this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=o,this.$6=a,this.$11=0,this.$9=0}var t=e.prototype;return t.$12=function(t){var e=this.$4.getLowLatencyWorldTiming();return this.$11=e.worldCurrentTimeMs,t-e.worldCurrentTimeMs+e.worldLastVideoFrameMs},t.$13=function(t){var e=this.$12(t);return e-this.$6.lowLatencyMs},t.getLowLatencyPlayheadMs=function(){var e=this.$5.currentTimeMillis();return this.$13(e)},t.startFixedLatencySync=function(){var e=this;this.$7=r("setIntervalAcrossTransitions")(function(){return e.adjustPlaybackForLowLatency()},this.$6.lowLatencyAdjustPlaybackIntervalMs)},t.stopFixedLatencySync=function(){r("clearInterval")(this.$7)},t.setState=function(t){this.$10=t},t.state=function(){return this.$10},t.adjustPlaybackForLowLatency=function(){if(this.$4.isReady()&&this.$4.isLive()&&this.$5.isReady()){var e=this.$5.currentTimeMillis(),t=this.$13(e),n=t/1e3;this.$10=="playing"&&this.$2.currentTime<n-this.$6.lowLatencyThresholdMs/1e3?(this.$2.currentTime=n+this.$6.lowLatencySeekForwardMs/1e3,this.$2.paused&&(this.$10="playing",this.$1.play()),this.$8=Date.now(),this.$9++):this.$10=="playing"&&this.$2.currentTime>n+this.$6.lowLatencyThresholdMs/1e3?(this.$1.pause(),this.$10="paused"):this.$10=="paused"&&(this.$10="playing",this.$1.play())}},e})();l.default=e}),98);
__d("LowLatencyShakaTimingProvider",["Shaka"],(function(t,n,r,o,a,i){"use strict";var e=n("Shaka").player.Player,l=(function(){function e(e){this.$1=e}var t=e.prototype;return t.getLowLatencyWorldTiming=function(){var e=this.$1.getManifest();return{worldCurrentTimeMs:e.currentServerTimeMs,worldLastVideoFrameMs:e.lastVideoFrameTs}},t.isReady=function(){return this.$1.getManifest()!=null},t.isLive=function(){return this.$1.getManifest().type=="dynamic"},e})();i.default=l}),66);
__d("PerformanceResourceBuffer",["EventEmitter","ODS"],(function(t,n,r,o,a,i){"use strict";var e,l=t.__isResourceTimingBufferFull;delete t.__isResourceTimingBufferFull,performance.onresourcetimingbufferfull=function(){l=!0,s&&s.emit("full")};var s,u=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isBufferFull=function(){return l},t})(n("EventEmitter"));s=new u,s.isBufferFull()?(e||(e=n("ODS"))).bumpEntityKey(2966,"performance","resourcetimingbufferfull"):s.addListener("full",function(){return(e||(e=n("ODS"))).bumpEntityKey(2966,"performance","resourcetimingbufferfull")}),a.exports=s}),null);
/**
 * License: https://www.facebook.com/legal/license/bBuG3-YeY7O/
 */
__d("stream-helpers",["ManagedError","Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(e){n("ManagedError").prototype.constructor.apply(this,arguments)}l.prototype=new(n("ManagedError")),l.prototype.constructor=l,i.AssertionError=l;function s(e,t){if(typeof e!="boolean"||!e)throw new l(t);return e}i.assert=s;function u(e){return typeof e=="string"||typeof e=="symbol"}i.typeIsObject=function(e){return typeof e=="object"&&e!==null||typeof e=="function"},i.createDataProperty=function(e,t,n){s(i.typeIsObject(e)),Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})},i.createArrayFromList=function(e){return e.slice()},i.ArrayBufferCopy=function(e,t,n,r,o){new Uint8Array(e).set(new Uint8Array(n,r,o),t)},i.CreateIterResultObject=function(e,t){s(typeof t=="boolean");var n={};return Object.defineProperty(n,"value",{value:e,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(n,"done",{value:t,enumerable:!0,writable:!0,configurable:!0}),n},i.IsFiniteNonNegativeNumber=function(e){return!(Number.isNaN(e)||e===1/0||e<0)};function c(e,t,n){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}i.InvokeOrNoop=function(e,t,n){s(e!==void 0),s(u(t)),s(Array.isArray(n));var r=e[t];if(r!==void 0)return c(r,e,n)},i.PromiseInvokeOrNoop=function(t,r,o){s(t!==void 0),s(u(r)),s(Array.isArray(o));try{return(e||(e=n("Promise"))).resolve(i.InvokeOrNoop(t,r,o))}catch(t){return(e||(e=n("Promise"))).reject(t)}},i.PromiseInvokeOrPerformFallback=function(t,r,o,a,i){s(t!==void 0),s(u(r)),s(Array.isArray(o)),s(Array.isArray(i));var l;try{l=t[r]}catch(t){return(e||(e=n("Promise"))).reject(t)}if(l===void 0)return a.apply(void 0,i);try{return(e||(e=n("Promise"))).resolve(c(l,t,o))}catch(t){return(e||(e=n("Promise"))).reject(t)}},i.TransferArrayBuffer=function(e){return e.slice()},i.ValidateAndNormalizeHighWaterMark=function(e){if(e=Number(e),Number.isNaN(e)||e<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return e},i.ValidateAndNormalizeQueuingStrategy=function(e,t){if(e!==void 0&&typeof e!="function")throw new TypeError("size property of a queuing strategy must be a function");return t=i.ValidateAndNormalizeHighWaterMark(t),{size:e,highWaterMark:t}}}),null);
/**
 * License: https://www.facebook.com/legal/license/bBuG3-YeY7O/
 */
__d("stream-queue-with-sizes",["stream-helpers"],(function(t,n,r,o,a,i){"use strict";var e=n("stream-helpers").assert,l=n("stream-helpers").IsFiniteNonNegativeNumber;i.DequeueValue=function(t){e("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),e(t._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var n=t._queue.shift();return t._queueTotalSize-=n.size,t._queueTotalSize<0&&(t._queueTotalSize=0),n.value},i.EnqueueValueWithSize=function(t,n,r){if(e("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),r=Number(r),!l(r))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:n,size:r}),t._queueTotalSize+=r},i.PeekQueueValue=function(t){e("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),e(t._queue.length>0,"Spec-level failure: should never peek at an empty queue.");var n=t._queue[0];return n.value},i.ResetQueue=function(t){e("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),t._queue=[],t._queueTotalSize=0}}),null);
/**
 * License: https://www.facebook.com/legal/license/YAfwycJzyi9/
 */
__d("stream-utils",["stream-helpers"],(function(t,n,r,o,a,i,l){var e=function(t){t&&t.constructor===o("stream-helpers").AssertionError&&setTimeout(function(){throw t},0)};l.rethrowAssertionErrorRejection=e}),98);
/**
 * License: https://www.facebook.com/legal/license/wg-Fdn5liPr/
 */
__d("WritableStreamPolyfill",["MaybeNativePromise","stream-helpers","stream-queue-with-sizes","stream-utils"],(function(t,n,r,o,a,i){"use strict";var e,l,s=(e=n("stream-helpers")).InvokeOrNoop,u=e.PromiseInvokeOrNoop,c=e.ValidateAndNormalizeQueuingStrategy,d=e.typeIsObject,m=e.assert,p=n("stream-utils").rethrowAssertionErrorRejection,_=(l=n("stream-queue-with-sizes")).DequeueValue,f=l.EnqueueValueWithSize,g=l.PeekQueueValue,h=l.ResetQueue,y="[[StartSteps]]",C="[[AbortSteps]]",b="[[ErrorSteps]]",v=(function(){function e(e,t){e===void 0&&(e={});var n=t===void 0?{}:t,r=n.size,o=n.highWaterMark,a=o===void 0?1:o;this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1;var i=e.type;if(i!==void 0)throw new RangeError("Invalid type is specified");this._writableStreamController=new X(this,e,r,a),this._writableStreamController[y](),Object.defineProperty&&Object.defineProperty(this,"locked",{get:this._isLocked.bind(this)})}var t=e.prototype;return t._isLocked=function(){if(R(this)===!1)throw se("locked");return L(this)},t.abort=function(t){return R(this)===!1?n("MaybeNativePromise").reject(se("abort")):L(this)===!0?n("MaybeNativePromise").reject(new TypeError("Cannot abort a stream that already has a writer")):E(this,t)},t.getWriter=function(){if(R(this)===!1)throw se("getWriter");return S(this)},e})();a.exports={AcquireWritableStreamDefaultWriter:S,IsWritableStream:R,IsWritableStreamLocked:L,WritableStream:v,WritableStreamAbort:E,WritableStreamDefaultControllerError:le,WritableStreamDefaultWriterCloseWithErrorPropagation:H,WritableStreamDefaultWriterRelease:K,WritableStreamDefaultWriterWrite:Q,WritableStreamCloseQueuedOrInFlight:M};function S(e){return new W(e)}function R(e){return!(!d(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController"))}function L(e){return m(R(e)===!0,"IsWritableStreamLocked should only be used on known writable streams"),e._writer!==void 0}function E(e,t){var r=e._state;if(r==="closed")return n("MaybeNativePromise").resolve(void 0);if(r==="errored")return n("MaybeNativePromise").reject(e._storedError);var o=new TypeError("Requested to abort");if(e._pendingAbortRequest!==void 0)return n("MaybeNativePromise").reject(o);m(r==="writable"||r==="erroring","state must be writable or erroring");var a=!1;r==="erroring"&&(a=!0,t=void 0);var i=new(n("MaybeNativePromise"))(function(n,r){e._pendingAbortRequest={_resolve:n,_reject:r,_reason:t,_wasAlreadyErroring:a}});return a===!1&&T(e,o),i}function k(e){m(L(e)===!0),m(e._state==="writable");var t=new(n("MaybeNativePromise"))(function(t,n){var r={_resolve:t,_reject:n};e._writeRequests.push(r)});return t}function I(e,t){var n=e._state;if(n==="writable"){T(e,t);return}m(n==="erroring"),D(e)}function T(e,t){m(e._storedError===void 0,"stream._storedError === undefined"),m(e._state==="writable","state must be writable");var n=e._writableStreamController;m(n!==void 0,"controller must not be undefined"),e._state="erroring",e._storedError=t;var r=e._writer;r!==void 0&&z(r,t),w(e)===!1&&n._started===!0&&D(e)}function D(e){m(e._state==="erroring","stream._state === erroring"),m(w(e)===!1,"WritableStreamHasOperationMarkedInFlight(stream) === false"),e._state="errored",e._writableStreamController[b]();var t=e._storedError;for(var n of e._writeRequests)n._reject(t);if(e._writeRequests=[],e._pendingAbortRequest===void 0){O(e);return}var r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring===!0){r._reject(t),O(e);return}var o=e._writableStreamController[C](r._reason);o.then(function(){r._resolve(),O(e)},function(t){r._reject(t),O(e)})}function x(e){m(e._inFlightWriteRequest!==void 0),e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function $(e,t){m(e._inFlightWriteRequest!==void 0),e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,m(e._state==="writable"||e._state==="erroring"),I(e,t)}function P(e){m(e._inFlightCloseRequest!==void 0),e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var t=e._state;m(t==="writable"||t==="erroring"),t==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var n=e._writer;n!==void 0&&ge(n),m(e._pendingAbortRequest===void 0,"stream._pendingAbortRequest === undefined"),m(e._storedError===void 0,"stream._storedError === undefined")}function N(e,t){m(e._inFlightCloseRequest!==void 0),e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,m(e._state==="writable"||e._state==="erroring"),e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),I(e,t)}function M(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function w(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function A(e){m(e._inFlightCloseRequest===void 0),m(e._closeRequest!==void 0),e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function F(e){m(e._inFlightWriteRequest===void 0,"there must be no pending write request"),m(e._writeRequests.length!==0,"writeRequests must not be empty"),e._inFlightWriteRequest=e._writeRequests.shift()}function O(e){m(e._state==="errored",'_stream_.[[state]] is `"errored"`'),e._closeRequest!==void 0&&(m(e._inFlightCloseRequest===void 0),e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;t!==void 0&&(_e(t,e._storedError),t._closedPromise.catch(function(){}))}function B(e,t){m(e._state==="writable"),m(M(e)===!1);var n=e._writer;n!==void 0&&t!==e._backpressure&&(t===!0?ve(n):(m(t===!1),Re(n))),e._backpressure=t}var W=(function(){function e(e){if(R(e)===!1)throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(L(e)===!0)throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var t=e._state;if(t==="writable")M(e)===!1&&e._backpressure===!0?he(this):Ce(this),de(this);else if(t==="erroring")ye(this,e._storedError),this._readyPromise.catch(function(){}),de(this);else if(t==="closed")Ce(this),pe(this);else{m(t==="errored","state must be errored");var n=e._storedError;ye(this,n),this._readyPromise.catch(function(){}),me(this,n),this._closedPromise.catch(function(){})}Object.defineProperty&&(Object.defineProperty(this,"closed",{get:this._isClosed.bind(this)}),Object.defineProperty(this,"desiredSize",{get:this._getDesiredSize.bind(this)}),Object.defineProperty(this,"ready",{get:this._isReady.bind(this)}))}var t=e.prototype;return t._isClosed=function(){return q(this)===!1?n("MaybeNativePromise").reject(ue("closed")):this._closedPromise},t._getDesiredSize=function(){if(q(this)===!1)throw ue("desiredSize");if(this._ownerWritableStream===void 0)throw ce("desiredSize");return j(this)},t._isReady=function(){return q(this)===!1?n("MaybeNativePromise").reject(ue("ready")):this._readyPromise},t.abort=function(t){return q(this)===!1?n("MaybeNativePromise").reject(ue("abort")):this._ownerWritableStream===void 0?n("MaybeNativePromise").reject(ce("abort")):U(this,t)},t.close=function(){if(q(this)===!1)return n("MaybeNativePromise").reject(ue("close"));var e=this._ownerWritableStream;return e===void 0?n("MaybeNativePromise").reject(ce("close")):M(e)===!0?n("MaybeNativePromise").reject(new TypeError("cannot close an already-closing stream")):V(this)},t.releaseLock=function(){if(q(this)===!1)throw ue("releaseLock");var e=this._ownerWritableStream;e!==void 0&&(m(e._writer!==void 0),K(this))},t.write=function(t){return q(this)===!1?n("MaybeNativePromise").reject(ue("write")):this._ownerWritableStream===void 0?n("MaybeNativePromise").reject(ce("write to")):Q(this,t)},e})();function q(e){return!(!d(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream"))}function U(e,t){var n=e._ownerWritableStream;return m(n!==void 0),E(n,t)}function V(e){var t=e._ownerWritableStream;m(t!==void 0);var r=t._state;if(r==="closed"||r==="errored")return n("MaybeNativePromise").reject(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));m(r==="writable"||r==="erroring"),m(M(t)===!1);var o=new(n("MaybeNativePromise"))(function(e,n){var r={_resolve:e,_reject:n};t._closeRequest=r});return t._backpressure===!0&&r==="writable"&&Re(e),Y(t._writableStreamController),o}function H(e){var t=e._ownerWritableStream;m(t!==void 0);var r=t._state;return M(t)===!0||r==="closed"?n("MaybeNativePromise").resolve():r==="errored"?n("MaybeNativePromise").reject(t._storedError):(m(r==="writable"||r==="erroring"),V(e))}function G(e,t){e._closedPromiseState==="pending"?_e(e,t):fe(e,t),e._closedPromise.catch(function(){})}function z(e,t){e._readyPromiseState==="pending"?be(e,t):Se(e,t),e._readyPromise.catch(function(){})}function j(e){var t=e._ownerWritableStream,n=t._state;return n==="errored"||n==="erroring"?null:n==="closed"?0:Z(t._writableStreamController)}function K(e){var t=e._ownerWritableStream;m(t!==void 0),m(t._writer===e);var n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");z(e,n),G(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function Q(e,t){var r=e._ownerWritableStream;m(r!==void 0);var o=r._writableStreamController,a=J(o,t);if(r!==e._ownerWritableStream)return n("MaybeNativePromise").reject(ce("write to"));var i=r._state;if(i==="errored")return n("MaybeNativePromise").reject(r._storedError);if(M(r)===!0||i==="closed")return n("MaybeNativePromise").reject(new TypeError("The stream is closing or closed and cannot be written to"));if(i==="erroring")return n("MaybeNativePromise").reject(r._storedError);m(i==="writable");var l=k(r);return ee(o,t,a),l}var X=(function(){function e(e,t,n,r){if(R(e)===!1)throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(e._writableStreamController!==void 0)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=e,this._underlyingSink=t,this._queue=void 0,this._queueTotalSize=void 0,h(this),this._started=!1;var o=c(n,r);this._strategySize=o.size,this._strategyHWM=o.highWaterMark;var a=ie(this);B(e,a)}var t=e.prototype;return t.error=function(t){if(te(this)===!1)throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var e=this._controlledWritableStream._state;e==="writable"&&le(this,t)},t[C]=function(e){return u(this._underlyingSink,"abort",[e])},t[b]=function(){h(this)},t[y]=function(){var e=this,t=s(this._underlyingSink,"start",[this]),r=this._controlledWritableStream;n("MaybeNativePromise").resolve(t).then(function(){m(r._state==="writable"||r._state==="erroring"),e._started=!0,ne(e)},function(t){m(r._state==="writable"||r._state==="erroring"),e._started=!0,I(r,t)}).catch(p)},e})();function Y(e){f(e,"close",0),ne(e)}function J(e,t){var n=e._strategySize;if(n===void 0)return 1;try{return n(t)}catch(t){return re(e,t),1}}function Z(e){return e._strategyHWM-e._queueTotalSize}function ee(e,t,n){var r={chunk:t};try{f(e,r,n)}catch(t){re(e,t);return}var o=e._controlledWritableStream;if(M(o)===!1&&o._state==="writable"){var a=ie(e);B(o,a)}ne(e)}function te(e){return!(!d(e)||!Object.prototype.hasOwnProperty.call(e,"_underlyingSink"))}function ne(e){var t=e._controlledWritableStream;if(e._started!==!1&&t._inFlightWriteRequest===void 0){var n=t._state;if(!(n==="closed"||n==="errored")){if(n==="erroring"){D(t);return}if(e._queue.length!==0){var r=g(e);r==="close"?oe(e):ae(e,r.chunk)}}}}function re(e,t){e._controlledWritableStream._state==="writable"&&le(e,t)}function oe(e){var t=e._controlledWritableStream;A(t),_(e),m(e._queue.length===0,"queue must be empty once the final write record is dequeued");var n=u(e._underlyingSink,"close",[]);n.then(function(){P(t)},function(e){N(t,e)}).catch(p)}function ae(e,t){var n=e._controlledWritableStream;F(n);var r=u(e._underlyingSink,"write",[t,e]);r.then(function(){x(n);var t=n._state;if(m(t==="writable"||t==="erroring"),_(e),M(n)===!1&&t==="writable"){var r=ie(e);B(n,r)}ne(e)},function(e){$(n,e)}).catch(p)}function ie(e){var t=Z(e);return t<=0}function le(e,t){var n=e._controlledWritableStream;m(n._state==="writable"),T(n,t)}function se(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function ue(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function ce(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function de(e){e._closedPromise=new(n("MaybeNativePromise"))(function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"})}function me(e,t){e._closedPromise=n("MaybeNativePromise").reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}function pe(e){e._closedPromise=n("MaybeNativePromise").resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}function _e(e,t){m(e._closedPromise_resolve!==void 0,"writer._closedPromise_resolve !== undefined"),m(e._closedPromise_reject!==void 0,"writer._closedPromise_reject !== undefined"),m(e._closedPromiseState==="pending","writer._closedPromiseState is pending"),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}function fe(e,t){m(e._closedPromise_resolve===void 0,"writer._closedPromise_resolve === undefined"),m(e._closedPromise_reject===void 0,"writer._closedPromise_reject === undefined"),m(e._closedPromiseState!=="pending","writer._closedPromiseState is not pending"),e._closedPromise=n("MaybeNativePromise").reject(t),e._closedPromiseState="rejected"}function ge(e){m(e._closedPromise_resolve!==void 0,"writer._closedPromise_resolve !== undefined"),m(e._closedPromise_reject!==void 0,"writer._closedPromise_reject !== undefined"),m(e._closedPromiseState==="pending","writer._closedPromiseState is pending"),e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}function he(e){e._readyPromise=new(n("MaybeNativePromise"))(function(t,n){e._readyPromise_resolve=t,e._readyPromise_reject=n}),e._readyPromiseState="pending"}function ye(e,t){e._readyPromise=n("MaybeNativePromise").reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}function Ce(e){e._readyPromise=n("MaybeNativePromise").resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}function be(e,t){m(e._readyPromise_resolve!==void 0,"writer._readyPromise_resolve !== undefined"),m(e._readyPromise_reject!==void 0,"writer._readyPromise_reject !== undefined"),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}function ve(e){m(e._readyPromise_resolve===void 0,"writer._readyPromise_resolve === undefined"),m(e._readyPromise_reject===void 0,"writer._readyPromise_reject === undefined"),e._readyPromise=new(n("MaybeNativePromise"))(function(t,n){e._readyPromise_resolve=t,e._readyPromise_reject=n}),e._readyPromiseState="pending"}function Se(e,t){m(e._readyPromise_resolve===void 0,"writer._readyPromise_resolve === undefined"),m(e._readyPromise_reject===void 0,"writer._readyPromise_reject === undefined"),e._readyPromise=n("MaybeNativePromise").reject(t),e._readyPromiseState="rejected"}function Re(e){m(e._readyPromise_resolve!==void 0,"writer._readyPromise_resolve !== undefined"),m(e._readyPromise_reject!==void 0,"writer._readyPromise_reject !== undefined"),e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}}),null);
/**
 * License: https://www.facebook.com/legal/license/wg-Fdn5liPr/
 */
__d("ReadableStreamPolyfill",["MaybeNativePromise","WritableStreamPolyfill","stream-helpers","stream-queue-with-sizes","stream-utils"],(function(t,n,r,o,a,i){"use strict";var e,l,s=(e=n("stream-helpers")).ArrayBufferCopy,u=e.CreateIterResultObject,c=e.IsFiniteNonNegativeNumber,d=e.InvokeOrNoop,m=e.PromiseInvokeOrNoop,p=e.TransferArrayBuffer,_=e.ValidateAndNormalizeQueuingStrategy,f=e.ValidateAndNormalizeHighWaterMark,g=e.createArrayFromList,h=e.createDataProperty,y=e.typeIsObject,C=e.assert,b=n("stream-utils").rethrowAssertionErrorRejection,v=n("stream-queue-with-sizes").DequeueValue,S=n("stream-queue-with-sizes").EnqueueValueWithSize,R=n("stream-queue-with-sizes").ResetQueue,L=(l=n("WritableStreamPolyfill")).AcquireWritableStreamDefaultWriter,E=l.IsWritableStream,k=l.IsWritableStreamLocked,I=l.WritableStreamAbort,T=l.WritableStreamDefaultWriterCloseWithErrorPropagation,D=l.WritableStreamDefaultWriterRelease,x=l.WritableStreamDefaultWriterWrite,$=l.WritableStreamCloseQueuedOrInFlight,P="[[CancelSteps]]",N="[[PullSteps]]",M=(function(){function e(e,t){e===void 0&&(e={});var n=t===void 0?{}:t,r=n.size,o=n.highWaterMark;this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var a=e.type,i=String(a);if(i==="bytes")o===void 0&&(o=0),this._readableStreamController=new be(this,e,o);else if(a===void 0)o===void 0&&(o=1),this._readableStreamController=new ce(this,e,r,o);else throw new RangeError("Invalid type is specified");Object.defineProperty&&Object.defineProperty(this,"locked",{get:this._isLocked.bind(this)})}var t=e.prototype;return t._isLocked=function(){if(F(this)===!1)throw Ge("locked");return B(this)},t.cancel=function(t){return F(this)===!1?n("MaybeNativePromise").reject(Ge("cancel")):B(this)===!0?n("MaybeNativePromise").reject(new TypeError("Cannot cancel a stream that already has a reader")):z(this,t)},t.getReader=function(t){var e=t===void 0?{}:t,n=e.mode;if(F(this)===!1)throw Ge("getReader");if(n===void 0)return A(this);if(n=String(n),n==="byob")return w(this);throw new RangeError("Invalid mode is specified")},t.pipeThrough=function(t,n){var e=t.writable,r=t.readable;if(e===void 0||r===void 0)throw new TypeError("readable and writable arguments must be defined");var o=this.pipeTo(e,n);return ot(o),r},t.pipeTo=function(t,r){var e=this,o=r===void 0?{}:r,a=o.preventClose,i=o.preventAbort,l=o.preventCancel;if(F(this)===!1)return n("MaybeNativePromise").reject(Ge("pipeTo"));if(E(t)===!1)return n("MaybeNativePromise").reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(a=!!a,i=!!i,l=!!l,B(this)===!0)return n("MaybeNativePromise").reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(k(t)===!0)return n("MaybeNativePromise").reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var s=A(this),u=L(t),c=!1,d=n("MaybeNativePromise").resolve();return new(n("MaybeNativePromise"))(function(r,o){function m(){return d=n("MaybeNativePromise").resolve(),c===!0?n("MaybeNativePromise").resolve():u._readyPromise.then(function(){return ue(s).then(function(e){var t=e.value,n=e.done;n!==!0&&(d=x(u,t).catch(function(){}))})}).then(m)}if(f(e,s._closedPromise,function(e){i===!1?h(function(){return I(t,e)},!0,e):y(!0,e)}),f(t,u._closedPromise,function(t){l===!1?h(function(){return z(e,t)},!0,t):y(!0,t)}),g(e,s._closedPromise,function(){a===!1?h(function(){return T(u)}):y()}),$(t)===!0||t._state==="closed"){var p=new TypeError("the destination writable stream closed before all data could be piped to it");l===!1?h(function(){return z(e,p)},!0,p):y(!0,p)}m().catch(function(e){d=n("MaybeNativePromise").resolve(),b(e)});function _(){var e=d;return d.then(function(){return e!==d?_():void 0})}function f(e,t,n){e._state==="errored"?n(e._storedError):t.catch(n).catch(b)}function g(e,t,n){e._state==="closed"?n():t.then(n).catch(b)}function h(e,n,r){if(c===!0)return;c=!0,t._state==="writable"&&$(t)===!1?_().then(o):o();function o(){e().then(function(){return C(n,r)},function(e){return C(!0,e)}).catch(b)}}function y(e,n){c!==!0&&(c=!0,t._state==="writable"&&$(t)===!1?_().then(function(){return C(e,n)}).catch(b):C(e,n))}function C(e,t){D(u),le(s),e?o(t):r(void 0)}})},t.tee=function(){if(F(this)===!1)throw Ge("tee");var e=W(this,!1);return g(e)},e})();a.exports={ReadableStream:M,IsReadableStreamDisturbed:O,ReadableStreamDefaultControllerClose:_e,ReadableStreamDefaultControllerEnqueue:fe,ReadableStreamDefaultControllerError:ge,ReadableStreamDefaultControllerGetDesiredSize:ye};function w(e){return new ne(e)}function A(e){return new te(e)}function F(e){return!(!y(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController"))}function O(e){return C(F(e)===!0,"IsReadableStreamDisturbed should only be used on known readable streams"),e._disturbed}function B(e){return C(F(e)===!0,"IsReadableStreamLocked should only be used on known readable streams"),e._reader!==void 0}function W(e,t){C(F(e)===!0),C(typeof t=="boolean");var r=A(e),o={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};o.promise=new(n("MaybeNativePromise"))(function(e){o._resolve=e});var a=q();a._reader=r,a._teeState=o,a._cloneForBranch2=t;var i=U();i._stream=e,i._teeState=o;var l=V();l._stream=e,l._teeState=o;var s=Object.create(Object.prototype);h(s,"pull",a),h(s,"cancel",i);var u=new M(s),c=Object.create(Object.prototype);h(c,"pull",a),h(c,"cancel",l);var d=new M(c);return a._branch1=u._readableStreamController,a._branch2=d._readableStreamController,r._closedPromise.catch(function(e){o.closedOrErrored!==!0&&(ge(a._branch1,e),ge(a._branch2,e),o.closedOrErrored=!0)}),[u,d]}function q(){function e(){var t=e._reader,n=e._branch1,r=e._branch2,o=e._teeState;return ue(t).then(function(e){C(y(e));var t=e.value,a=e.done;if(C(typeof a=="boolean"),a===!0&&o.closedOrErrored===!1&&(o.canceled1===!1&&_e(n),o.canceled2===!1&&_e(r),o.closedOrErrored=!0),o.closedOrErrored!==!0){var i=t,l=t;o.canceled1===!1&&fe(n,i),o.canceled2===!1&&fe(r,l)}})}return e}function U(){function e(t){var n=e._stream,r=e._teeState;if(r.canceled1=!0,r.reason1=t,r.canceled2===!0){var o=g([r.reason1,r.reason2]),a=z(n,o);r._resolve(a)}return r.promise}return e}function V(){function e(t){var n=e._stream,r=e._teeState;if(r.canceled2=!0,r.reason2=t,r.canceled1===!0){var o=g([r.reason1,r.reason2]),a=z(n,o);r._resolve(a)}return r.promise}return e}function H(e){C(re(e._reader)===!0),C(e._state==="readable"||e._state==="closed");var t=new(n("MaybeNativePromise"))(function(t,n){var r={_resolve:t,_reject:n};e._reader._readIntoRequests.push(r)});return t}function G(e){C(oe(e._reader)===!0),C(e._state==="readable");var t=new(n("MaybeNativePromise"))(function(t,n){var r={_resolve:t,_reject:n};e._reader._readRequests.push(r)});return t}function z(e,t){if(e._disturbed=!0,e._state==="closed")return n("MaybeNativePromise").resolve(void 0);if(e._state==="errored")return n("MaybeNativePromise").reject(e._storedError);j(e);var r=e._readableStreamController[P](t);return r.then(function(){})}function j(e){C(e._state==="readable"),e._state="closed";var t=e._reader;if(t!==void 0){if(oe(t)===!0){for(var n of t._readRequests){var r=n._resolve;r(u(void 0,!0))}t._readRequests=[]}Ze(t)}}function K(e,t){C(F(e)===!0,"stream must be ReadableStream"),C(e._state==="readable","state must be readable"),e._state="errored",e._storedError=t;var n=e._reader;if(n!==void 0){if(oe(n)===!0){for(var r of n._readRequests)r._reject(t);n._readRequests=[]}else{C(re(n),"reader must be ReadableStreamBYOBReader");for(var o of n._readIntoRequests)o._reject(t);n._readIntoRequests=[]}Ye(n,t),n._closedPromise.catch(function(){})}}function Q(e,t,n){var r=e._reader;C(r._readIntoRequests.length>0);var o=r._readIntoRequests.shift();o._resolve(u(t,n))}function X(e,t,n){var r=e._reader;C(r._readRequests.length>0);var o=r._readRequests.shift();o._resolve(u(t,n))}function Y(e){return e._reader._readIntoRequests.length}function J(e){return e._reader._readRequests.length}function Z(e){var t=e._reader;return!(t===void 0||re(t)===!1)}function ee(e){var t=e._reader;return!(t===void 0||oe(t)===!1)}var te=(function(){function e(e){if(F(e)===!1)throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(B(e)===!0)throw new TypeError("This stream has already been locked for exclusive reading by another reader");ae(this,e),this._readRequests=[],Object.defineProperty&&Object.defineProperty(this,"closed",{get:this._isClosed.bind(this)})}var t=e.prototype;return t._isClosed=function(){return oe(this)===!1?n("MaybeNativePromise").reject(je("closed")):this._closedPromise},t.cancel=function(t){return oe(this)===!1?n("MaybeNativePromise").reject(je("cancel")):this._ownerReadableStream===void 0?n("MaybeNativePromise").reject(ze("cancel")):ie(this,t)},t.read=function(){return oe(this)===!1?n("MaybeNativePromise").reject(je("read")):this._ownerReadableStream===void 0?n("MaybeNativePromise").reject(ze("read from")):ue(this)},t.releaseLock=function(){if(oe(this)===!1)throw je("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");le(this)}},e})(),ne=(function(){function e(e){if(!F(e))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(ve(e._readableStreamController)===!1)throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(B(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ae(this,e),this._readIntoRequests=[],Object.defineProperty&&Object.defineProperty(this,"closed",{get:this._isClosed.bind(this)})}var t=e.prototype;return t._isClosed=function(){return re(this)?this._closedPromise:n("MaybeNativePromise").reject(et("closed"))},t.cancel=function(t){return re(this)?this._ownerReadableStream===void 0?n("MaybeNativePromise").reject(ze("cancel")):ie(this,t):n("MaybeNativePromise").reject(et("cancel"))},t.read=function(t){return re(this)?this._ownerReadableStream===void 0?n("MaybeNativePromise").reject(ze("read from")):ArrayBuffer.isView(t)?t.byteLength===0?n("MaybeNativePromise").reject(new TypeError("view must have non-zero byteLength")):se(this,t):n("MaybeNativePromise").reject(new TypeError("view must be an array buffer view")):n("MaybeNativePromise").reject(et("read"))},t.releaseLock=function(){if(!re(this))throw et("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");le(this)}},e})();function re(e){return!(!y(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests"))}function oe(e){return!(!y(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests"))}function ae(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Ke(e):t._state==="closed"?Xe(e):(C(t._state==="errored","state must be errored"),Qe(e,t._storedError),e._closedPromise.catch(function(){}))}function ie(e,t){var n=e._ownerReadableStream;return C(n!==void 0),z(n,t)}function le(e){C(e._ownerReadableStream!==void 0),C(e._ownerReadableStream._reader===e),e._ownerReadableStream._state==="readable"?Ye(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Je(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._closedPromise.catch(function(){}),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function se(e,t){var r=e._ownerReadableStream;return C(r!==void 0),r._disturbed=!0,r._state==="errored"?n("MaybeNativePromise").reject(r._storedError):Ne(r._readableStreamController,t)}function ue(e){var t=e._ownerReadableStream;return C(t!==void 0),t._disturbed=!0,t._state==="closed"?n("MaybeNativePromise").resolve(u(void 0,!0)):t._state==="errored"?n("MaybeNativePromise").reject(t._storedError):(C(t._state==="readable"),t._readableStreamController[N]())}var ce=(function(){function e(e,t,r,o){if(F(e)===!1)throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(e._readableStreamController!==void 0)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=e,this._underlyingSource=t,this._queue=void 0,this._queueTotalSize=void 0,R(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var a=_(r,o);this._strategySize=a.size,this._strategyHWM=a.highWaterMark;var i=this,l=d(t,"start",[this]);n("MaybeNativePromise").resolve(l).then(function(){i._started=!0,C(i._pulling===!1),C(i._pullAgain===!1),me(i)},function(e){he(i,e)}).catch(b),Object.defineProperty&&Object.defineProperty(this,"desiredSize",{get:this._getDesiredSize.bind(this)})}var t=e.prototype;return t._getDesiredSize=function(){if(de(this)===!1)throw tt("desiredSize");return ye(this)},t.close=function(){if(de(this)===!1)throw tt("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if(e!=="readable")throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");_e(this)},t.enqueue=function(t){if(de(this)===!1)throw tt("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if(e!=="readable")throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");return fe(this,t)},t.error=function(t){if(de(this)===!1)throw tt("error");var e=this._controlledReadableStream;if(e._state!=="readable")throw new TypeError("The stream is "+e._state+" and so cannot be errored");ge(this,t)},t[P]=function(e){return R(this),m(this._underlyingSource,"cancel",[e])},t[N]=function(){var e=this._controlledReadableStream;if(this._queue.length>0){var t=v(this);return this._closeRequested===!0&&this._queue.length===0?j(e):me(this),n("MaybeNativePromise").resolve(u(t,!1))}var r=G(e);return me(this),r},e})();function de(e){return!(!y(e)||!Object.prototype.hasOwnProperty.call(e,"_underlyingSource"))}function me(e){var t=pe(e);if(t!==!1){if(e._pulling===!0){e._pullAgain=!0;return}C(e._pullAgain===!1),e._pulling=!0;var n=m(e._underlyingSource,"pull",[e]);n.then(function(){if(e._pulling=!1,e._pullAgain===!0)return e._pullAgain=!1,me(e)},function(t){he(e,t)}).catch(b)}}function pe(e){var t=e._controlledReadableStream;if(t._state==="closed"||t._state==="errored"||e._closeRequested===!0||e._started===!1)return!1;if(B(t)===!0&&J(t)>0)return!0;var n=ye(e);return n>0}function _e(e){var t=e._controlledReadableStream;C(e._closeRequested===!1),C(t._state==="readable"),e._closeRequested=!0,e._queue.length===0&&j(t)}function fe(e,t){var n=e._controlledReadableStream;if(C(e._closeRequested===!1),C(n._state==="readable"),B(n)===!0&&J(n)>0)X(n,t,!1);else{var r=1;if(e._strategySize!==void 0){var o=e._strategySize;try{r=o(t)}catch(t){throw he(e,t),t}}try{S(e,t,r)}catch(t){throw he(e,t),t}}me(e)}function ge(e,t){var n=e._controlledReadableStream;C(n._state==="readable"),R(e),K(n,t)}function he(e,t){e._controlledReadableStream._state==="readable"&&ge(e,t)}function ye(e){var t=e._controlledReadableStream,n=t._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}var Ce=(function(){function e(e,t){this._associatedReadableByteStreamController=e,this._view=t,Object.defineProperty&&Object.defineProperty(this,"view",{get:this._getView.bind(this)})}var t=e.prototype;return t._getView=function(){return this._view},t.respond=function(t){if(Se(this)===!1)throw nt("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ve(this._associatedReadableByteStreamController,t)},t.respondWithNewView=function(t){if(Se(this)===!1)throw nt("respond");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");He(this._associatedReadableByteStreamController,t)},e})(),be=(function(){function e(e,t,r){if(F(e)===!1)throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(e._readableStreamController!==void 0)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=e,this._underlyingByteSource=t,this._pullAgain=!1,this._pulling=!1,Le(this),this._queue=this._queueTotalSize=void 0,R(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=f(r);var o=t.autoAllocateChunkSize;if(o!==void 0&&(Number.isInteger(o)===!1||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=o,this._pendingPullIntos=[];var a=this,i=d(t,"start",[this]);n("MaybeNativePromise").resolve(i).then(function(){a._started=!0,C(a._pulling===!1),C(a._pullAgain===!1),Re(a)},function(t){e._state==="readable"&&qe(a,t)}).catch(b),Object.defineProperty&&(Object.defineProperty(this,"byobRequest",{get:this._getByobRequest.bind(this)}),Object.defineProperty(this,"desiredSize",{get:this._getByobRequest.bind(this)}))}var t=e.prototype;return t._getByobRequest=function(){if(ve(this)===!1)throw rt("byobRequest");if(this._byobRequest===void 0&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos[0],t=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled);this._byobRequest=new Ce(this,t)}return this._byobRequest},t._getDesiredSize=function(){if(ve(this)===!1)throw rt("desiredSize");return Ue(this)},t.close=function(){if(ve(this)===!1)throw rt("close");if(this._closeRequested===!0)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if(e!=="readable")throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");Be(this)},t.enqueue=function(t){if(ve(this)===!1)throw rt("enqueue");if(this._closeRequested===!0)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if(e!=="readable")throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");We(this,t)},t.error=function(t){if(ve(this)===!1)throw rt("error");var e=this._controlledReadableStream;if(e._state!=="readable")throw new TypeError("The stream is "+e._state+" and so cannot be errored");qe(this,t)},t[P]=function(e){if(this._pendingPullIntos.length>0){var t=this._pendingPullIntos[0];t.bytesFilled=0}return R(this),m(this._underlyingByteSource,"cancel",[e])},t[N]=function(){var e=this._controlledReadableStream;if(C(ee(e)===!0),this._queueTotalSize>0){C(J(e)===0);var t=this._queue.shift();this._queueTotalSize-=t.byteLength,xe(this);var r;try{r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}catch(e){return n("MaybeNativePromise").reject(e)}return n("MaybeNativePromise").resolve(u(r,!1))}var o=this._autoAllocateChunkSize;if(o!==void 0){var a;try{a=new ArrayBuffer(o)}catch(e){return n("MaybeNativePromise").reject(e)}var i={buffer:a,byteOffset:0,byteLength:o,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(i)}var l=G(e);return Re(this),l},e})();function ve(e){return!(!y(e)||!Object.prototype.hasOwnProperty.call(e,"_underlyingByteSource"))}function Se(e){return!(!y(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController"))}function Re(e){var t=Oe(e);if(t!==!1){if(e._pulling===!0){e._pullAgain=!0;return}C(e._pullAgain===!1),e._pulling=!0;var n=m(e._underlyingByteSource,"pull",[e]);n.then(function(){e._pulling=!1,e._pullAgain===!0&&(e._pullAgain=!1,Re(e))},function(t){e._controlledReadableStream._state==="readable"&&qe(e,t)}).catch(b)}}function Le(e){$e(e),e._pendingPullIntos=[]}function Ee(e,t){C(e._state!=="errored","state must not be errored");var n=!1;e._state==="closed"&&(C(t.bytesFilled===0),n=!0);var r=ke(t);t.readerType==="default"?X(e,r,n):(C(t.readerType==="byob"),Q(e,r,n))}function ke(e){var t=e.bytesFilled,n=e.elementSize;return C(t<=e.byteLength),C(t%n===0),new e.ctor(e.buffer,e.byteOffset,t/n)}function Ie(e,t,n,r){e._queue.push({buffer:t,byteOffset:n,byteLength:r}),e._queueTotalSize+=r}function Te(e,t){var n=t.elementSize,r=t.bytesFilled-t.bytesFilled%n,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),a=t.bytesFilled+o,i=a-a%n,l=o,u=!1;i>r&&(l=i-t.bytesFilled,u=!0);for(var c=e._queue;l>0;){var d=c[0],m=Math.min(l,d.byteLength),p=t.byteOffset+t.bytesFilled;s(t.buffer,p,d.buffer,d.byteOffset,m),d.byteLength===m?c.shift():(d.byteOffset+=m,d.byteLength-=m),e._queueTotalSize-=m,De(e,m,t),l-=m}return u===!1&&(C(e._queueTotalSize===0,"queue must be empty"),C(t.bytesFilled>0),C(t.bytesFilled<t.elementSize)),u}function De(e,t,n){C(e._pendingPullIntos.length===0||e._pendingPullIntos[0]===n),$e(e),n.bytesFilled+=t}function xe(e){C(e._controlledReadableStream._state==="readable"),e._queueTotalSize===0&&e._closeRequested===!0?j(e._controlledReadableStream):Re(e)}function $e(e){e._byobRequest!==void 0&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=void 0,e._byobRequest=void 0)}function Pe(e){for(C(e._closeRequested===!1);e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;var t=e._pendingPullIntos[0];Te(e,t)===!0&&(Fe(e),Ee(e._controlledReadableStream,t))}}function Ne(e,t){var r=e._controlledReadableStream,o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);var a=t.constructor,i={buffer:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,ctor:a,readerType:"byob"};if(e._pendingPullIntos.length>0)return i.buffer=p(i.buffer),e._pendingPullIntos.push(i),H(r);if(r._state==="closed"){var l=new t.constructor(i.buffer,i.byteOffset,0);return n("MaybeNativePromise").resolve(u(l,!0))}if(e._queueTotalSize>0){if(Te(e,i)===!0){var s=ke(i);return xe(e),n("MaybeNativePromise").resolve(u(s,!1))}if(e._closeRequested===!0){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");return qe(e,c),n("MaybeNativePromise").reject(c)}}i.buffer=p(i.buffer),e._pendingPullIntos.push(i);var d=H(r);return Re(e),d}function Me(e,t){t.buffer=p(t.buffer),C(t.bytesFilled===0,"bytesFilled must be 0");var n=e._controlledReadableStream;if(Z(n)===!0)for(;Y(n)>0;){var r=Fe(e);Ee(n,r)}}function we(e,t,n){if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range");if(De(e,t,n),!(n.bytesFilled<n.elementSize)){Fe(e);var r=n.bytesFilled%n.elementSize;if(r>0){var o=n.byteOffset+n.bytesFilled,a=n.buffer.slice(o-r,o);Ie(e,a,0,a.byteLength)}n.buffer=p(n.buffer),n.bytesFilled-=r,Ee(e._controlledReadableStream,n),Pe(e)}}function Ae(e,t){var n=e._pendingPullIntos[0],r=e._controlledReadableStream;if(r._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");Me(e,n)}else C(r._state==="readable"),we(e,t,n)}function Fe(e){var t=e._pendingPullIntos.shift();return $e(e),t}function Oe(e){var t=e._controlledReadableStream;return t._state!=="readable"||e._closeRequested===!0||e._started===!1?!1:ee(t)===!0&&J(t)>0||Z(t)===!0&&Y(t)>0||Ue(e)>0}function Be(e){var t=e._controlledReadableStream;if(C(e._closeRequested===!1),C(t._state==="readable"),e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){var n=e._pendingPullIntos[0];if(n.bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");throw qe(e,r),r}}j(t)}function We(e,t){var n=e._controlledReadableStream;C(e._closeRequested===!1),C(n._state==="readable");var r=t.buffer,o=t.byteOffset,a=t.byteLength,i=p(r);if(ee(n)===!0)if(J(n)===0)Ie(e,i,o,a);else{C(e._queue.length===0);var l=new Uint8Array(i,o,a);X(n,l,!1)}else Z(n)===!0?(Ie(e,i,o,a),Pe(e)):(C(B(n)===!1,"stream must not be locked"),Ie(e,i,o,a))}function qe(e,t){var n=e._controlledReadableStream;C(n._state==="readable"),Le(e),R(e),K(n,t)}function Ue(e){var t=e._controlledReadableStream,n=t._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ve(e,t){if(t=Number(t),c(t)===!1)throw new RangeError("bytesWritten must be a finite");C(e._pendingPullIntos.length>0),Ae(e,t)}function He(e,t){C(e._pendingPullIntos.length>0);var n=e._pendingPullIntos[0];if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.byteLength!==t.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");n.buffer=t.buffer,Ae(e,t.byteLength)}function Ge(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function ze(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function je(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}function Ke(e){e._closedPromise=new(n("MaybeNativePromise"))(function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n})}function Qe(e,t){e._closedPromise=n("MaybeNativePromise").reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function Xe(e){e._closedPromise=n("MaybeNativePromise").resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function Ye(e,t){C(e._closedPromise_resolve!==void 0),C(e._closedPromise_reject!==void 0),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function Je(e,t){C(e._closedPromise_resolve===void 0),C(e._closedPromise_reject===void 0),e._closedPromise=n("MaybeNativePromise").reject(t)}function Ze(e){C(e._closedPromise_resolve!==void 0),C(e._closedPromise_reject!==void 0),e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function et(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function tt(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function nt(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function rt(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function ot(e){try{n("MaybeNativePromise").prototype.then.call(e,void 0,function(){})}catch(e){}}}),null);
__d("SkywalkerHelpers",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.split("/").slice(0,-1);return t.some(function(e){return/\d/.test(e)})?null:t.join("_")}i.topicToUseCaseName=e}),66);
__d("SkywalkerManager",["Bootloader","Promise","SkywalkerHelpers","TransportSelectingClientSingleton","TransportSelectingClientUtils","asyncToGeneratorRuntime","nullthrows","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){var e,s="request_stream",u="mqtt_skywalker",c="dgw_request_stream",d=(function(){function t(){}var a=t.prototype;return a.subscribe=function(t,n,o){o===void 0&&(o={});var e=this.$3(t,n,o);return r("promiseDone")(e),{getTopic:function(){return t},getContext:function(){return o.context},isUnsubscribed:function(){return this.$4},unsubscribe:function(){return this.$4=!0,e.then(function(e){return e.unsubscribe()})},$4:!1}},a.once=function(t,n,r){r===void 0&&(r={});var e=this.subscribe(t,function(){e.isUnsubscribed()||(e.unsubscribe(),n.apply(this,arguments))},r);return e},a.getSubscriptionType=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return t!=null&&t.headers!=null?s:c});function t(t,n){return e.apply(this,arguments)}return t})(),a.getSubscriptions=function(){var e=[],t=this.$1;return t!=null&&(e=t.getSubscriptions().map(function(e){return{getTopic:function(){return e.getTopic()},getMessageListener:function(){return e.getMessageListener()},getCreationTime:function(){return e.getCreationTime()},isUnsubscribed:function(){return!t.isSubscribed(e)}}})),e},a.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield this.getSubscriptionType(e,n);if(a===s){var i=n.headers!=null?n.headers.method:null;return this.$5(r("nullthrows")(i),e,t,n)}else if(a===c){var l,u=n==null||(l=n.headers)==null?void 0:l.method;if(u==null){var d=o("SkywalkerHelpers").topicToUseCaseName(e);d!=null?u="SKY:"+d:u="SKY"}return this.$5(r("nullthrows")(u),e,t,n)}else return this.$6(e,t,n)});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.$6=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield this.$7();return r.subscribe(e,t,n)});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.$5=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,o,a){var i=yield this.$8(),l=i.patchContext(a.context),s=babelHelpers.extends({},a.headers||{},{method:e,topic:t}),u={onData:function(n){var e=JSON.parse(n),r=t!=null?t:e.topic;o({topic:r,payload:e.payload})},onTermination:function(t){a.onTermination&&a.onTermination(t)},onLog:function(t){},onFlowStatus:function(t){}},c=yield r("TransportSelectingClientSingleton").requestStream(s,JSON.stringify(l),u,a.instrumentationData);return a.onSubscribe&&a.onSubscribe({data:{},error:null}),{unsubscribe:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){a.onUnsubscribeEager&&a.onUnsubscribeEager(),c.cancel(),a.onUnsubscribe&&a.onUnsubscribe({data:{},error:null})});function t(){return e.apply(this,arguments)}return t})()}});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),a.$7=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$1!=null)return this.$1;var t=new(e||(e=n("Promise")))(function(e){r("Bootloader").loadModules(["MqttSkywalkerManager"],e,"SkywalkerManager")}),o=yield t;return this.$1=o,o});function o(){return t.apply(this,arguments)}return o})(),a.$8=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$2!=null)return this.$2;var t=new(e||(e=n("Promise")))(function(e){r("requireDeferred")("SkywalkerUtils").__setRef("SkywalkerManager").onReady(function(t){e(t)})}),o=yield t;return this.$2=o,o});function o(){return t.apply(this,arguments)}return o})(),t})(),m=new d;l.default=m}),98);
__d("TaggedTimeRanges",["oz-player/utils/OzTaggedTimeRanges"],(function(t,n,r,o,a,i,l){l.default=r("oz-player/utils/OzTaggedTimeRanges")}),98);
__d("XVideoDataAsyncController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/video/video_data_async/",{video_id:{type:"String",required:!0},width:{type:"Int"},height:{type:"Int"},scrubbing_preference:{type:"Int"},source:{type:"String"},preferred_projection:{type:"Enum",enumType:1},supports_html5_video:{type:"Bool",defaultValue:!0},is_ad:{type:"Bool",defaultValue:!1},force_flash:{type:"Bool",defaultValue:!1},is_omnistab_preview_select_revert:{type:"Bool",defaultValue:!1},allow_dash_prefetch:{type:"Bool",defaultValue:!1},force_hd:{type:"Bool",defaultValue:!1},host_number:{type:"Int"},include_extra_drm_info:{type:"Bool",defaultValue:!0}})}),null);
__d("VideoDataAsyncControllerUri",["XVideoDataAsyncController"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.getURI=function(t,n,o,a,i,l,s,u){var e=r("XVideoDataAsyncController").getURIBuilder().setString("video_id",t.toString()).setBool("supports_html5_video",n);return o!==void 0&&(e=e.setBool("force_flash",o)),a!==void 0&&(e=e.setBool("allow_dash_prefetch",a)),i!==void 0&&(e=e.setBool("force_hd",i)),l!==void 0&&(e=e.setInt("host_number",l)),s!==void 0&&(e=e.setBool("include_extra_drm_info",s)),u!==void 0&&(e=e.setString("source",u)),e.getURI()},e})();l.default=e}),98);
__d("VideoPlayerLiveStreamState",["EventEmitter","SkywalkerManager"],(function(t,n,r,o,a,i,l){"use strict";var e={interrupt:"streamInterruptAt",ended:"endedAt"},s=(function(t){function n(e){var n;return n=t.call(this)||this,n.$VideoPlayerLiveStreamState$p_2=e,n.$VideoPlayerLiveStreamState$p_1=[],n}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.subscribe=function(){var t=this;this.$VideoPlayerLiveStreamState$p_1=[];var n=function(o){t.$VideoPlayerLiveStreamState$p_1.push(r("SkywalkerManager").subscribe("video_broadcast/"+o+"_"+t.$VideoPlayerLiveStreamState$p_2,function(n){return t.$VideoPlayerLiveStreamState$p_3(e[o],n)}))};for(var o in e)n(o)},o.unsubscribe=function(){for(var e of this.$VideoPlayerLiveStreamState$p_1)e.unsubscribe();this.$VideoPlayerLiveStreamState$p_1=[]},o.$VideoPlayerLiveStreamState$p_3=function(t,n){var e=JSON.parse(n.payload||"{}")||{},r=e.time_position;typeof r=="number"&&(r/=1e3,this.emit(t,r))},n})(r("EventEmitter"));l.default=s}),98);
__d("VideoPlayerMetaData",["ActorURI","AsyncRequest","ErrorMetadata","ErrorSerializer","FBLogger","Promise","TimeSlice","VideoData","VideoDataAsyncControllerUri","asyncToGeneratorRuntime","clearTimeout","err","getErrorSafe","gkx","isHTML5VideoImplementationUnavailable","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s={},u=12e4,c=(function(){function t(e,t){if(this.$3=null,this.$3=t,!/^[0-9]+$/.test(e)){var n,o,a,i,l=r("err")("VideoPlayerMetaData constructor called with invalid video ID: %s",e);if(((n=this.$3)==null?void 0:n.reactComponentStack)!=null){var s;r("ErrorSerializer").aggregateError(l,{componentStack:(s=this.$3)==null?void 0:s.reactComponentStack})}l.project="www_blue_video_player";var u=(o=l.messageFormat)!=null?o:l.message,c=l.messageFormat!=null?(a=l.messageParams)!=null?a:[]:[];(i=r("FBLogger")(l.project).catching(l)).warn.apply(i,[u].concat(c))}this.videoID=e}var a=t.prototype;return a.getVideoID=function(){return this.videoID},a.genVideoData=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var o=this;try{var a=this.$1;return(!a||e.forceRefetch===!0)&&(this.$2&&(r("clearTimeout")(this.$2),this.$2=null),a=this.$1=this.$4(e,t),this.$2=r("setTimeout")(r("TimeSlice").guard(function(){o.$1=null,n()},"VideoPlayerMetaData cacheTimeout",{propagationType:r("TimeSlice").PropagationType.ORPHAN}),e.cacheTimeout!=null&&e.cacheTimeout!==0?e.cacheTimeout:u)),yield a}catch(e){throw e}});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.$4=function(a,i){var t,l=this,s=(t=a==null?void 0:a.uriBuilder)!=null?t:new(r("VideoDataAsyncControllerUri")),u=a.allowDashPrefetch,c=a.callerContext,d=a.forceFlash,m=a.forceHD,p=a.hostNumber,_=a.includeExtraDRMInfo,f=a.source,g=s.getURI(this.videoID,!r("isHTML5VideoImplementationUnavailable")(!0),d,u,m,p,_,f);return i!=null&&(g=o("ActorURI").create(g,i)),new(e||(e=n("Promise")))(function(e,t){return new(r("AsyncRequest"))(g).setMethod("GET").setURI(g).setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(n){var o=n.payload;if(typeof o!="object"||o==null||o.error!=null||typeof o.video_id!="string"){var a,i,s,u,d,m,p=n.error!==0?r("getErrorSafe")(n.toError()):null,_=o!=null&&o.error!=null?r("getErrorSafe")(o.error):null,f=r("err")("VideoPlayerMetaData invalid response."+(p!=null?" Response error: "+r("ErrorSerializer").toReadableMessage(p):" No response error.")+(_!=null?" Payload error: "+r("ErrorSerializer").toReadableMessage(_):typeof o!="object"||o==null?" Payload is "+String(o)+".":" Payload is invalid: "+Object.keys(o).join(","))+" Video ID: %s",l.videoID),g=(a=c==null?void 0:c.reactComponentStack)!=null?a:(i=l.$3)==null?void 0:i.reactComponentStack;g!=null&&r("ErrorSerializer").aggregateError(f,{componentStack:g});var h=(s=f.metadata)!=null?s:new(r("ErrorMetadata"));h.addEntry("COMET_VIDEO","VIDEO_ID",l.videoID),f.metadata=h,f.project="www_blue_video_player";var y=(u=f.messageFormat)!=null?u:f.message,C=f.messageFormat!=null?(d=f.messageParams)!=null?d:[]:[];(m=r("FBLogger")(f.project).catching(f)).info.apply(m,[y].concat(C)),t(f);return}var b=o;e(new(r("VideoData"))(b))}).setErrorHandler(function(e){var n,o,a,i,s=e.error,u=s!==0?r("getErrorSafe")(e.toError()):null,c=null,d="VideoPlayerMetaData request failed."+(u!=null?" Response error: "+r("ErrorSerializer").toReadableMessage(u):"")+" Video ID: %s";r("gkx")("16515")?c=r("err")(d+" Status code: %s",l.videoID,s):c=r("err")(d,l.videoID);var m=(n=c.metadata)!=null?n:new(r("ErrorMetadata"));m.addEntry("COMET_VIDEO","VIDEO_ID",l.videoID),c.metadata=m,c.project="www_blue_video_player";var p=(o=c.messageFormat)!=null?o:c.message,_=c.messageFormat!=null?(a=c.messageParams)!=null?a:[]:[];(i=r("FBLogger")(c.project).catching(c)).info.apply(i,[p].concat(_)),t(c)}).send()})},t.get=function(n,r){return s[n]||(s[n]=new t(n,r)),s[n]},t.genVideoData=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n,r,o){var a;return n===void 0&&(n={}),r===void 0&&(r=void 0),o===void 0&&(o=function(){}),yield t.get(e,(a=n)==null?void 0:a.callerContext).genVideoData(n,r,o)});function r(t,n,r,o){return e.apply(this,arguments)}return r})(),t})();l.default=c}),98);
__d("dispatchCustomEvent",[],(function(t,n,r,o,a,i){function e(e,n,r){var o;typeof t.CustomEvent=="function"?o=new t.CustomEvent(n,{detail:r}):(o=t.document.createEvent("CustomEvent"),o.initCustomEvent(n,!0,!0,r)),e.dispatchEvent(o)}a.exports=e}),null);
__d("getVideoPlayerShakaSeekableRanges",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=[];if(e.seekRangeGaps.length===0)t.push({startTime:e.start,endTime:e.end});else{for(var n=e.start,r,o=0;o<e.seekRangeGaps.length;++o)r=e.seekRangeGaps[o].startTime,t.push({startTime:n,endTime:r}),n=e.seekRangeGaps[o].endTime;r=e.end,t.push({startTime:n,endTime:r})}return t}i.default=e}),66);
__d("VideoPlayerHTML5Shaka",["invariant","CustomAbrManager","EventEmitter","EventListener","FBLogger","LiveClock","LowLatencyPlayheadManager","LowLatencyShakaTimingProvider","P2PPlaybackSessionLogger","PerformanceResourceBuffer","Promise","Shaka","ShakaConstants","SubscriptionsHandler","TaggedTimeRanges","TimeRanges","URI","VideoDashPrefetchCache","VideoPlayerConnectionQuality","VideoPlayerLiveStreamState","VideoPlayerMemLeakExperiments","VideoPlayerMetaData","VideoPlayerPlayLogger","VideoPlayerQualitiesArray","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaPerformanceLogger","VideoPriorityCalculator","VideoStreamingTaskQueueProvider","asyncToGeneratorRuntime","clearInterval","dangerouslyOverrideMediaElementEndedProperty","dispatchCustomEvent","dispatchEvent","getErrorSafe","getVideoPlayerShakaSeekableRanges","nullthrows","qex","throttle"],(function(t,n,r,o,a,i,l,s){var e,u,c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",d="com.widevine.alpha",m="urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",p="com.microsoft.playready";n("PerformanceResourceBuffer"),n("Shaka");var _=r("VideoPlayerShakaBandwidthEstimator").getEstimator(),f=function(t,n,r){return t.addEventListener(n,r),{remove:function(){t.removeEventListener(n,r)}}},g=(function(t){function a(e,n,i){var l,s=i.accessToken,u=i.config,c=i.desiredLatencyMs,d=i.disableAbr,m=i.disableLogging,p=i.disableStreaming,_=i.getSource,g=i.graphApiVideoLicenseUri,h=i.height,y=i.isLive,C=i.isServableViaFbms,b=i.isSpherical,v=i.latencyToleranceMs,S=i.manifest,R=i.manifestUrl,L=i.maxPlayQuality,E=i.minPlayQuality,k=i.p2pSettings,I=i.playerInstanceKey,T=i.playerOrigin,D=i.playerSuborigin,x=i.resolutionConstraintMaxHeight,$=i.resolutionConstraintMaxWidth,P=i.startTimestamp,N=i.streamPriorityAdjuster,M=i.videoID,w=i.videoLicenseUriMap,A=i.videoLiveTrace,F=i.videoWatchTimeTracker,O=i.vpcPlayingStateEmitter,B=i.widevineCert,W=i.width;l=t.call(this)||this,l.$VideoPlayerHTML5Shaka$p_32=null,l.$VideoPlayerHTML5Shaka$p_45=new(r("SubscriptionsHandler")),l.$VideoPlayerHTML5Shaka$p_59=!1,l.$VideoPlayerHTML5Shaka$p_2=u,l.$VideoPlayerHTML5Shaka$p_5=E,l.$VideoPlayerHTML5Shaka$p_6=L,l.$VideoPlayerHTML5Shaka$p_7=!1,l.$VideoPlayerHTML5Shaka$p_8=null,l.$VideoPlayerHTML5Shaka$p_9=1,l.$VideoPlayerHTML5Shaka$p_10=!1,l.$VideoPlayerHTML5Shaka$p_11=y,l.$VideoPlayerHTML5Shaka$p_12=y,l.$VideoPlayerHTML5Shaka$p_13=C,l.$VideoPlayerHTML5Shaka$p_14=!1,l.$VideoPlayerHTML5Shaka$p_15=b,l.$VideoPlayerHTML5Shaka$p_51=!!d,k&&(l.$VideoPlayerHTML5Shaka$p_60=k.community_info,l.$VideoPlayerHTML5Shaka$p_52=k.ticket,l.$VideoPlayerHTML5Shaka$p_55=k.hive_initialization_options,l.$VideoPlayerHTML5Shaka$p_53=k.config),l.$VideoPlayerHTML5Shaka$p_59=m!=null?m:!1,l.$VideoPlayerHTML5Shaka$p_17=W,l.$VideoPlayerHTML5Shaka$p_18=h,l.$VideoPlayerHTML5Shaka$p_46=w,l.$VideoPlayerHTML5Shaka$p_47=g,l.$VideoPlayerHTML5Shaka$p_49=B,l.$VideoPlayerHTML5Shaka$p_32=S||R,l.$VideoPlayerHTML5Shaka$p_40=F,l.$VideoPlayerHTML5Shaka$p_43=(typeof x=="number"?x:r("ShakaConstants").numbers.resolution_constraint_max_height)||1/0,l.$VideoPlayerHTML5Shaka$p_44=(typeof $=="number"?$:r("ShakaConstants").numbers.resolution_constraint_max_width)||1/0,l.$VideoPlayerHTML5Shaka$p_3=n,l.$VideoPlayerHTML5Shaka$p_35=null,l.$VideoPlayerHTML5Shaka$p_20=_;var q=l.$VideoPlayerHTML5Shaka$p_35;if(l.$VideoPlayerHTML5Shaka$p_4=M,l.$VideoPlayerHTML5Shaka$p_48=s,l.$VideoPlayerHTML5Shaka$p_59?l.$VideoPlayerHTML5Shaka$p_26=null:l.$VideoPlayerHTML5Shaka$p_26=r("VideoPlayerShakaPerformanceLogger").shouldInitialize()?new(r("VideoPlayerShakaPerformanceLogger"))({videoID:M,video:e,representationId:q,isLive:y,isServableViaFbms:C,accessToken:s,playerOrigin:T,playerSuborigin:D,playerVersion:l.getPlayerVersion(),uniqueID:I,getBandwidthEstimate:function(t){return r("VideoPlayerShakaBandwidthEstimator").getBandwidthByVideoType(t)},getApproximateFBLSToPlayerDisplayLatency:function(){return null},getPreferredEdgeLatency:function(){return null},isDrm:l.isDrm()}):null,l.$VideoPlayerHTML5Shaka$p_26&&(l.$VideoPlayerHTML5Shaka$p_28=new(r("VideoPlayerPlayLogger"))(e,l.$VideoPlayerHTML5Shaka$p_26)),l.$VideoPlayerHTML5Shaka$p_61(),r("VideoPlayerMemLeakExperiments").www_videos_memleak_on_tv){var U;l.$VideoPlayerHTML5Shaka$p_45.addSubscriptions((U=r("EventListener")).listen(e,"playing",function(){return l.$VideoPlayerHTML5Shaka$p_62()}),U.listen(e,"timeupdate",function(e){l.$VideoPlayerHTML5Shaka$p_63(e.target.currentTime)}),U.listen(e,"pause",function(){return l.$VideoPlayerHTML5Shaka$p_64()}),U.listen(e,"play",function(){return l.$VideoPlayerHTML5Shaka$p_65()}),U.listen(e,"ended",function(){return l.disableP2PPlayback()}))}else{var U;(U=r("EventListener")).listen(e,"playing",function(){return l.$VideoPlayerHTML5Shaka$p_62()}),U.listen(e,"timeupdate",function(e){l.$VideoPlayerHTML5Shaka$p_63(e.target.currentTime)}),U.listen(e,"pause",function(){return l.$VideoPlayerHTML5Shaka$p_64()}),U.listen(e,"play",function(){return l.$VideoPlayerHTML5Shaka$p_65()}),U.listen(e,"ended",function(){return l.disableP2PPlayback()})}if(l.$VideoPlayerHTML5Shaka$p_31=Date.now(),l.$VideoPlayerHTML5Shaka$p_22=o("VideoPlayerQualitiesArray").ensureVideoPlayerQualitiesArray([]),l.$VideoPlayerHTML5Shaka$p_23=null,l.$VideoPlayerHTML5Shaka$p_24=null,l.$VideoPlayerHTML5Shaka$p_37=O,l.$VideoPlayerHTML5Shaka$p_38=N,l.$VideoPlayerHTML5Shaka$p_19=new(r("Shaka")).player.Player(e,l.$VideoPlayerHTML5Shaka$p_2,l.$VideoPlayerHTML5Shaka$p_26,null,l.$VideoPlayerHTML5Shaka$p_37,l.$VideoPlayerHTML5Shaka$p_38,A),l.$VideoPlayerHTML5Shaka$p_12&&l.$VideoPlayerHTML5Shaka$p_2.getBool("is_low_latency",!1)){var V=new(r("LiveClock"));V.startClock();var H=l.$VideoPlayerHTML5Shaka$p_50=new(r("LowLatencyPlayheadManager"))(l,e,l.$VideoPlayerHTML5Shaka$p_4,new(r("LowLatencyShakaTimingProvider"))(l.$VideoPlayerHTML5Shaka$p_19),V,{lowLatencyMs:c||l.$VideoPlayerHTML5Shaka$p_2.getNumber("ll_desired_latency_ms",7e3),lowLatencyThresholdMs:v||l.$VideoPlayerHTML5Shaka$p_2.getNumber("ll_latency_behind_threshold_ms",500),lowLatencySeekForwardMs:l.$VideoPlayerHTML5Shaka$p_2.getNumber("ll_latency_seek_forward_ms",400),lowLatencyAdjustPlaybackIntervalMs:l.$VideoPlayerHTML5Shaka$p_2.getNumber("ll_adjust_playback_interval_ms",250)});l.$VideoPlayerHTML5Shaka$p_50.setState("stopped")}r("VideoPlayerMemLeakExperiments").www_videos_memleak_on_tv?l.$VideoPlayerHTML5Shaka$p_45.addSubscriptions(f(l.$VideoPlayerHTML5Shaka$p_19,"seekrangechanged",function(){return l.$VideoPlayerHTML5Shaka$p_66()}),f(l.$VideoPlayerHTML5Shaka$p_19,"bufferingStart",function(){return l.$VideoPlayerHTML5Shaka$p_67()}),f(l.$VideoPlayerHTML5Shaka$p_19,"bufferingEnd",function(){return l.$VideoPlayerHTML5Shaka$p_68()}),f(l.$VideoPlayerHTML5Shaka$p_19,"bufferingProgress",function(e){return l.$VideoPlayerHTML5Shaka$p_69(e)}),f(l.$VideoPlayerHTML5Shaka$p_19,"error",function(e){return l.$VideoPlayerHTML5Shaka$p_70(e)}),f(l.$VideoPlayerHTML5Shaka$p_19,"adaptation",function(e){return l.$VideoPlayerHTML5Shaka$p_71(e)}),f(l.$VideoPlayerHTML5Shaka$p_19,"trackschanged",function(){return l.$VideoPlayerHTML5Shaka$p_72()}),f(l.$VideoPlayerHTML5Shaka$p_19,"debug/dashPlayerEvent",function(e){return l.emit("debug/dashPlayerEvent",e.detail)}),f(l.$VideoPlayerHTML5Shaka$p_19,"manifestwrapped",function(){return l.$VideoPlayerHTML5Shaka$p_73()}),f(l.$VideoPlayerHTML5Shaka$p_19,"cea608CaptionsBytesReceived",function(e){l.emit("cea608CaptionsBytesReceived",e.detail)}),f(l.$VideoPlayerHTML5Shaka$p_19,"cea608AvailabilityChanged",function(){l.emit("cea608AvailabilityChanged")}),f(l.$VideoPlayerHTML5Shaka$p_19,"manifestIsUpdating",function(){return l.$VideoPlayerHTML5Shaka$p_74()}),f(l.$VideoPlayerHTML5Shaka$p_19,"replicaswitch",l.$VideoPlayerHTML5Shaka$p_75.bind(l)),f(l.$VideoPlayerHTML5Shaka$p_19,"initiallivemanifestrequestfailure",l.$VideoPlayerHTML5Shaka$p_76.bind(l)),f(l.$VideoPlayerHTML5Shaka$p_19,"networkinterrupted",function(){return l.$VideoPlayerHTML5Shaka$p_77()}),f(l.$VideoPlayerHTML5Shaka$p_19,"networkresumed",function(){return l.$VideoPlayerHTML5Shaka$p_78()})):(l.$VideoPlayerHTML5Shaka$p_19.addEventListener("seekrangechanged",function(){return l.$VideoPlayerHTML5Shaka$p_66()}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("bufferingStart",function(){return l.$VideoPlayerHTML5Shaka$p_67()}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("bufferingEnd",function(){return l.$VideoPlayerHTML5Shaka$p_68()}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("bufferingProgress",function(e){return l.$VideoPlayerHTML5Shaka$p_69(e)}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("error",function(e){return l.$VideoPlayerHTML5Shaka$p_70(e)}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("adaptation",function(e){return l.$VideoPlayerHTML5Shaka$p_71(e)}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("trackschanged",function(){return l.$VideoPlayerHTML5Shaka$p_72()}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("debug/dashPlayerEvent",function(e){return l.emit("debug/dashPlayerEvent",e.detail)}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("manifestwrapped",function(){return l.$VideoPlayerHTML5Shaka$p_73()}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("cea608CaptionsBytesReceived",function(e){l.emit("cea608CaptionsBytesReceived",e.detail)}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("cea608AvailabilityChanged",function(){l.emit("cea608AvailabilityChanged")}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("manifestIsUpdating",function(){return l.$VideoPlayerHTML5Shaka$p_74()}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("replicaswitch",function(e){return l.$VideoPlayerHTML5Shaka$p_75(e)}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("initiallivemanifestrequestfailure",function(e){return l.$VideoPlayerHTML5Shaka$p_76(e)}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("networkinterrupted",function(){return l.$VideoPlayerHTML5Shaka$p_77()}),l.$VideoPlayerHTML5Shaka$p_19.addEventListener("networkresumed",function(){return l.$VideoPlayerHTML5Shaka$p_78()}));var G=!1,z=null,j=null;l.$VideoPlayerHTML5Shaka$p_41=l.$VideoPlayerHTML5Shaka$p_2.getBool("live_send_push_headers",!0),l.$VideoPlayerHTML5Shaka$p_42=R,S?l.$VideoPlayerHTML5Shaka$p_34=r("Shaka").dash.mpd.parseMpd(S,l.$VideoPlayerHTML5Shaka$p_42):(l.$VideoPlayerHTML5Shaka$p_34=l.$VideoPlayerHTML5Shaka$p_42,G=l.$VideoPlayerHTML5Shaka$p_42&&l.$VideoPlayerHTML5Shaka$p_42.indexOf("dash-abr")!==-1),G&&(l.$VideoPlayerHTML5Shaka$p_41=l.$VideoPlayerHTML5Shaka$p_2.getBool("live_abr_send_push_headers",!0),l.$VideoPlayerHTML5Shaka$p_41&&(z=r("ShakaConstants").strings.live_abr_initial_push_representation,j=r("ShakaConstants").strings.live_abr_audio_push_representation,l.$VideoPlayerHTML5Shaka$p_3=[r("ShakaConstants").strings.live_abr_initial_push_representation])),l.$VideoPlayerHTML5Shaka$p_1=e,l.$VideoPlayerHTML5Shaka$p_39=l.$VideoPlayerHTML5Shaka$p_79(),l.$VideoPlayerHTML5Shaka$p_25=l.$VideoPlayerHTML5Shaka$p_80();var K=l.$VideoPlayerHTML5Shaka$p_12?l.$VideoPlayerHTML5Shaka$p_2.getBool("enable_request_pipelining_for_live",!0):l.$VideoPlayerHTML5Shaka$p_2.getBool("enable_request_pipelining_for_vod",!0);if(l.$VideoPlayerHTML5Shaka$p_52&&y&&l.$VideoPlayerHTML5Shaka$p_53&&(l.$VideoPlayerHTML5Shaka$p_53.delay_p2p_until_play||l.$VideoPlayerHTML5Shaka$p_81(),K=!1),l.$VideoPlayerHTML5Shaka$p_19.configure({enableAdaptation:l.getIsAbrEnabled(),appendPlayingQueryParam:!0,endBufferingOnPlaying:!1,usePlaybackRateForBuffering:!0,streamBufferSize:l.$VideoPlayerHTML5Shaka$p_82(),initialStreamBufferSize:a.isAutoplayBandwidthRestrained(y)?r("ShakaConstants").numbers.initial_stream_buffer_size_for_blocked_autoplay:l.$VideoPlayerHTML5Shaka$p_83(),dynamicStreamBufferSize:y?r("ShakaConstants").numbers.live_dynamic_stream_buffer_size:null,includeStreamBufferSizeInStartOffset:!0,minMpdRefreshInterval:r("ShakaConstants").numbers.min_mpd_refresh_interval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:!0,liveStreamEndTimeout:r("ShakaConstants").numbers.live_stream_end_timeout,enableLiveInterruptionDetection:!0,liveInterruptionConsecutiveUpdatesWithoutChange:r("ShakaConstants").numbers.live_interruption_consecutive_updates_without_change,liveInterruptionConsecutiveUpdatesWithChange:r("ShakaConstants").numbers.live_interruption_consecutive_updates_with_change,liveMaxSegmentsToPush:r("ShakaConstants").numbers.live_max_segments_to_push,liveSendPushHeaders:a.isAutoplayBandwidthRestrained(y)?!1:l.$VideoPlayerHTML5Shaka$p_84(),liveMaxManifestFetchesWithPush:r("ShakaConstants").numbers.live_max_manifest_fetches_with_push,resolveVideoTimeUpdateOnFragmentedTimeRanges:l.$VideoPlayerHTML5Shaka$p_2.getBool("resolve_video_time_update_on_fragmented_time_ranges",!0),enableManifestDebug:l.$VideoPlayerHTML5Shaka$p_2.getBool("enable_video_debug",!1),reappendInitSegmentAfterAbort:l.$VideoPlayerHTML5Shaka$p_2.getBool("reappend_init_segment_after_abort",!1),useInlineInitSegment:!1,currentTimeDuringReadyStateZeroThrows:l.$VideoPlayerHTML5Shaka$p_2.getBool("current_time_during_ready_state_zero_throws",!1),liveInitialPushRepresentation:z,liveAudioPushRepresentation:j,jumpToLiveThreshold:r("ShakaConstants").numbers.jump_to_live_threshold,liveDataFetchMaxRetries:r("ShakaConstants").numbers.live_data_fetch_max_retries,liveSourceBufferClearMaxRetries:r("ShakaConstants").numbers.live_source_buffer_clear_max_retries,useLongCacheForManifest:!1,jumpToEarliestPositionInCurrentBlock:!0,ignoreMinBufferTime:!1,playheadFragmentedGapDiffAllowance:r("ShakaConstants").numbers.playhead_fragmented_gap_diff_allowance,fixBufferingGoalDetermination:!0,skipEmptySegments:!1,useMicroTaskTimeouts:!0,enableRequestPipelining:K,enableStreaming:!p&&(l.$VideoPlayerHTML5Shaka$p_12?!1:l.$VideoPlayerHTML5Shaka$p_2.getBool("enable_streaming_for_vod",!0)),enableContentProtection:l.$VideoPlayerHTML5Shaka$p_2.getBool("enable_content_protection",!1)}),y){var Q=new(r("VideoPlayerLiveStreamState"))(M);l.$VideoPlayerHTML5Shaka$p_36=Q,r("VideoPlayerMemLeakExperiments").www_videos_memleak_on_tv?l.$VideoPlayerHTML5Shaka$p_45.addSubscriptions(f(l.$VideoPlayerHTML5Shaka$p_19,"liveheadIdleAt",function(e){var t=e.seconds;t>(l.$VideoPlayerHTML5Shaka$p_8||0)&&(l.$VideoPlayerHTML5Shaka$p_85(t),l.$VideoPlayerHTML5Shaka$p_27&&l.$VideoPlayerHTML5Shaka$p_86()&&(l.$VideoPlayerHTML5Shaka$p_87(),l.emit("bufferingEnd")))})):l.$VideoPlayerHTML5Shaka$p_19.addEventListener("liveheadIdleAt",function(e){var t=e.seconds;t>(l.$VideoPlayerHTML5Shaka$p_8||0)&&(l.$VideoPlayerHTML5Shaka$p_85(t),l.$VideoPlayerHTML5Shaka$p_27&&l.$VideoPlayerHTML5Shaka$p_86()&&(l.$VideoPlayerHTML5Shaka$p_87(),l.emit("bufferingEnd")))}),l.addListenersToLiveStreamState(Q)}return P&&l.$VideoPlayerHTML5Shaka$p_19.setPlaybackStartTime(P),l.$VideoPlayerHTML5Shaka$p_58=l.$VideoPlayerHTML5Shaka$p_19.load(l.$VideoPlayerHTML5Shaka$p_25).then(function(){l.$VideoPlayerHTML5Shaka$p_58=null}).catch(function(e){if(l.$VideoPlayerHTML5Shaka$p_58=null,!(l.$VideoPlayerHTML5Shaka$p_7&&l.$VideoPlayerHTML5Shaka$p_2.getBool("ignore_errors_after_unload",!0)))throw e}),l.$VideoPlayerHTML5Shaka$p_50&&l.$VideoPlayerHTML5Shaka$p_50.startFixedLatencySync(),l}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.$VideoPlayerHTML5Shaka$p_81=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t=this.$VideoPlayerHTML5Shaka$p_57;if(t==null){var n,o,a,i;this.$VideoPlayerHTML5Shaka$p_57=t=new(r("P2PPlaybackSessionLogger"))(this.$VideoPlayerHTML5Shaka$p_4,{communityId:(n=(o=this.$VideoPlayerHTML5Shaka$p_60)==null?void 0:o.community_id)!=null?n:"unknowncustomer",communityName:(a=(i=this.$VideoPlayerHTML5Shaka$p_60)==null?void 0:i.community_name)!=null?a:"Unknown Customer"})}try{t.logEnableP2P();var l=this.$VideoPlayerHTML5Shaka$p_55?this.$VideoPlayerHTML5Shaka$p_55:{},s=l.HiveJS?l.HiveJS:{};s.renderStatsCallback=function(t){e.emit("debug/dashPlayerEvent",{type:"P2PStats",event:t}),r("nullthrows")(e.$VideoPlayerHTML5Shaka$p_57).setCurrentHiveStats(t)},l.onActiveSession=function(t){e.$VideoPlayerHTML5Shaka$p_57&&e.$VideoPlayerHTML5Shaka$p_57.logSessionActive(t.tech),e.emit("debug/dashPlayerEvent",{type:"P2PTech",event:t.tech})};var u=l.hiveTechOrder!=null?l.hiveTechOrder.indexOf("HiveJava"):-1;this.$VideoPlayerHTML5Shaka$p_53&&this.$VideoPlayerHTML5Shaka$p_53.disable_hivejava_for_livevc&&this.$VideoPlayerHTML5Shaka$p_34&&this.$VideoPlayerHTML5Shaka$p_34.startsWith("https://livestream-lookaside")&&l.hiveTechOrder&&u!==-1&&l.hiveTechOrder.splice(u,1),l.HiveJS=s,l.telemetryId=t.getSessionID(),l.onError=function(t){return e.$VideoPlayerHTML5Shaka$p_88(t)},window.HiveConfig.SensitiveInfo.restrictedConnectivityInfo=!0;var c=new window.HiveFacebook(this.$VideoPlayerHTML5Shaka$p_19,this.$VideoPlayerHTML5Shaka$p_1,l);if(!this.$VideoPlayerHTML5Shaka$p_34)return;var d=this.$VideoPlayerHTML5Shaka$p_34.substring(this.$VideoPlayerHTML5Shaka$p_34.indexOf("?"));this.$VideoPlayerHTML5Shaka$p_54=c.initSession(r("nullthrows")(this.$VideoPlayerHTML5Shaka$p_52)+d);var m=this.$VideoPlayerHTML5Shaka$p_54=yield this.$VideoPlayerHTML5Shaka$p_54;if(!this.$VideoPlayerHTML5Shaka$p_19)return;m.manifest!=this.$VideoPlayerHTML5Shaka$p_34&&t.logManifestMismatch(m.manifest,this.$VideoPlayerHTML5Shaka$p_34),t.logSessionInit(m.tech,this.$VideoPlayerHTML5Shaka$p_34),this.$VideoPlayerHTML5Shaka$p_56=c,this.$VideoPlayerHTML5Shaka$p_54=m,this.emit("p2pPluginReady")}catch(e){t.logError(r("getErrorSafe")(e)),this.$VideoPlayerHTML5Shaka$p_54=void 0}});function t(){return e.apply(this,arguments)}return t})(),i.$VideoPlayerHTML5Shaka$p_88=function(t){this.$VideoPlayerHTML5Shaka$p_57&&this.$VideoPlayerHTML5Shaka$p_57.logHiveError(t)},i.disableP2PPlayback=function(){try{this.$VideoPlayerHTML5Shaka$p_57&&this.$VideoPlayerHTML5Shaka$p_57.logEndSession(),this.$VideoPlayerHTML5Shaka$p_56&&this.$VideoPlayerHTML5Shaka$p_56.closeHiveSession()}catch(t){var e=r("getErrorSafe")(t);r("FBLogger")("www_p2p_playback").warn(e.message)}this.$VideoPlayerHTML5Shaka$p_57=null,this.$VideoPlayerHTML5Shaka$p_56=null,this.$VideoPlayerHTML5Shaka$p_54=null,this.$VideoPlayerHTML5Shaka$p_52=null},i.setup=function(){},i.addListenersToLiveStreamState=function(t){var e=this;t.addListener("streamInterruptAt",function(t){return e.$VideoPlayerHTML5Shaka$p_85(t)}),["streamInterruptAt","commercialBreakAt","endedAt"].forEach(function(n){t.addListener(n,function(t){e.emit("debug/dashPlayerEvent",{type:n,event:t})})})},i.areInbandCaptionsExpected=function(){return this.$VideoPlayerHTML5Shaka$p_25.hasInlinedCea608Subtitles()},i.areInbandCaptionsAutogenerated=function(){return this.$VideoPlayerHTML5Shaka$p_25.isUsingASRCaptions()||this.$VideoPlayerHTML5Shaka$p_25.isUsingASRCaptionsEmployeeDogfooding()},i.setEnableInbandCaptionsParsing=function(t){this.$VideoPlayerHTML5Shaka$p_25.setEnableCea608Parsing(t)},i.getDebug=function(){return{manifest:this.$VideoPlayerHTML5Shaka$p_32,AbrManager:this.$VideoPlayerHTML5Shaka$p_39,VideoSource:this.$VideoPlayerHTML5Shaka$p_25,DashPlayer:this.$VideoPlayerHTML5Shaka$p_19,VideoTaskQueue:o("VideoStreamingTaskQueueProvider").getQueue("video"),VideoTaskScheduler:o("VideoStreamingTaskQueueProvider").getSchedulerForDebug("video")}},a.getEstimatedBandwidth=function(){return _.getBandwidth()},a.isAutoplayBandwidthRestrained=function(t){return r("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(t)},i.$VideoPlayerHTML5Shaka$p_61=function(){var e=this,t=this.$VideoPlayerHTML5Shaka$p_2.getNumber("connection_quality_context_throttle_frequency",0);t!==0&&this.$VideoPlayerHTML5Shaka$p_45.addSubscriptions(r("EventListener").listen(_,"bandwidth",r("throttle")(function(){e.$VideoPlayerHTML5Shaka$p_2.setContext("connection_quality",o("VideoPlayerConnectionQuality").evaluate(a.getEstimatedBandwidth))},t)))},i.$VideoPlayerHTML5Shaka$p_63=function(t){var e=this.$VideoPlayerHTML5Shaka$p_21.get(t);if(e){var n=e.id,r=e.performanceLogger,o=e.reason;if(!this.$VideoPlayerHTML5Shaka$p_35&&n)this.$VideoPlayerHTML5Shaka$p_35=n;else if(this.$VideoPlayerHTML5Shaka$p_35!==n){if(this.$VideoPlayerHTML5Shaka$p_1.paused){this.emit("blocked_paused_representation_ended");return}var a=this.$VideoPlayerHTML5Shaka$p_35;this.$VideoPlayerHTML5Shaka$p_35=n,r&&(r.setStreamSwitchReason(o),r.log()),this.emit("representation_ended",{representationID:a,nextRepresentationID:n,streamSwitchReason:o})}}},i.getVideoStreamInfoIDForTimePosition=function(t){var e=this.$VideoPlayerHTML5Shaka$p_21.get(t),n=null;return e&&(n=e.id),n},i.getAudioStreamInfoIDForTimePosition=function(t){return null},i.$VideoPlayerHTML5Shaka$p_89=function(t){return t.fbQualityLabel?t.fbQualityLabel:t.height?[t.height,"p"].join(""):null},i.$VideoPlayerHTML5Shaka$p_90=function(t,n){var e=this.$VideoPlayerHTML5Shaka$p_89(t);return e||(r("Shaka").player.VideoTrack.compare(t,n[0])==0?"SD":r("Shaka").player.VideoTrack.compare(t,n[n.length-1])==0?"HD":null)},i.getAvailableVideoQualities=function(){var e=this;if(this.$VideoPlayerHTML5Shaka$p_7)return this.$VideoPlayerHTML5Shaka$p_22;var t=this.$VideoPlayerHTML5Shaka$p_25.getVideoTracks();return t.sort(r("Shaka").player.VideoTrack.compare),o("VideoPlayerQualitiesArray").ensureVideoPlayerQualitiesArray(t.every(function(t){return e.$VideoPlayerHTML5Shaka$p_89(t)!==null})?t.map(function(t){return e.$VideoPlayerHTML5Shaka$p_89(t)}):t.length>1?["SD","HD"]:["SD"])},i.getVideoProjection=function(){return this.$VideoPlayerHTML5Shaka$p_25.getVideoProjection()},i.getIsAbrEnabled=function(){return!this.$VideoPlayerHTML5Shaka$p_51},i.getSelectedVideoQuality=function(){if(this.$VideoPlayerHTML5Shaka$p_7)return this.$VideoPlayerHTML5Shaka$p_23;var e=this.$VideoPlayerHTML5Shaka$p_25.getVideoTracks();e.sort(r("Shaka").player.VideoTrack.compare);var t=e.find(function(e){return e.active});return t?this.$VideoPlayerHTML5Shaka$p_90(t,e):null},i.clearBufferAfterSeekingIfLowerQuality=function(t){var e=this.$VideoPlayerHTML5Shaka$p_21.get(t),n=e&&e.id;if(n){var o=this.$VideoPlayerHTML5Shaka$p_25.getVideoTracks(),a=o.find(function(e){return e.active}),i=o.find(function(e){return e.streamInfoID===n});r("Shaka").player.VideoTrack.compare(a,i)>0&&this.$VideoPlayerHTML5Shaka$p_25.setClearBufferAfterSeeking()}},i.getDashAudioConfiguration=function(){return this.$VideoPlayerHTML5Shaka$p_25.getMpdAudioConfig()},i.canAutoSelectVideoQuality=function(){return!0},i.setPreloadDisabled=function(t){},i.restoreStreamBufferSize=function(){},i.$VideoPlayerHTML5Shaka$p_83=function(){return this.$VideoPlayerHTML5Shaka$p_11?this.$VideoPlayerHTML5Shaka$p_2.getNumber("live_initial_stream_buffer_size_float",3.5):this.$VideoPlayerHTML5Shaka$p_2.getNumber("initial_stream_buffer_size_float",7.5)},i.$VideoPlayerHTML5Shaka$p_82=function(){return this.$VideoPlayerHTML5Shaka$p_11?this.$VideoPlayerHTML5Shaka$p_2.getNumber("live_stream_buffer_size_float",3):this.$VideoPlayerHTML5Shaka$p_2.getNumber("stream_buffer_size_float",15)},i.$VideoPlayerHTML5Shaka$p_84=function(){return this.$VideoPlayerHTML5Shaka$p_41},i.setPreferredVideoQuality=function(t){var e=this,n=this.$VideoPlayerHTML5Shaka$p_25.getVideoTracks();n.sort(r("Shaka").player.VideoTrack.compare);var o=n.find(function(r){return t==e.$VideoPlayerHTML5Shaka$p_90(r,n)});o&&(this.$VideoPlayerHTML5Shaka$p_24=t,this.$VideoPlayerHTML5Shaka$p_39.setPreferredVideoTrack(o))},i.unsetPreferredVideoQuality=function(){this.$VideoPlayerHTML5Shaka$p_24=null,this.$VideoPlayerHTML5Shaka$p_39.unsetPreferredVideoTrack()},i.isDrm=function(){if(this.$VideoPlayerHTML5Shaka$p_16)return!0;if(this.$VideoPlayerHTML5Shaka$p_32&&this.$VideoPlayerHTML5Shaka$p_32!==this.$VideoPlayerHTML5Shaka$p_42)return this.$VideoPlayerHTML5Shaka$p_32.indexOf("<ContentProtection")>=0},i.pause=function(){this.$VideoPlayerHTML5Shaka$p_50&&this.$VideoPlayerHTML5Shaka$p_50.setState("stopped"),this.$VideoPlayerHTML5Shaka$p_1.pause()},i.play=function(){if(this.$VideoPlayerHTML5Shaka$p_14=!0,this.$VideoPlayerHTML5Shaka$p_28&&this.$VideoPlayerHTML5Shaka$p_28.playStarted(),this.$VideoPlayerHTML5Shaka$p_19.setPendingPlayRequest(!0),this.$VideoPlayerHTML5Shaka$p_4){var e=r("VideoDashPrefetchCache").getPrefetchTaskByID(""+this.$VideoPlayerHTML5Shaka$p_4);e&&o("VideoStreamingTaskQueueProvider").getQueue("video").updatePriority(e,o("VideoPriorityCalculator").getMaxPriority())}return this.$VideoPlayerHTML5Shaka$p_50&&this.$VideoPlayerHTML5Shaka$p_50.setState("playing"),this.$VideoPlayerHTML5Shaka$p_1.play()},i.$VideoPlayerHTML5Shaka$p_86=function(){var e=this.$VideoPlayerHTML5Shaka$p_8;if(e){var t=this.$VideoPlayerHTML5Shaka$p_1.currentTime,n=4,r=t>e-n,o=t>e;o?(this.emit("debug/dashPlayerEvent",{type:"streamResumedAt",event:this.$VideoPlayerHTML5Shaka$p_8}),this.$VideoPlayerHTML5Shaka$p_8=null):this.$VideoPlayerHTML5Shaka$p_27&&(this.$VideoPlayerHTML5Shaka$p_10=r)}return this.$VideoPlayerHTML5Shaka$p_10},i.$VideoPlayerHTML5Shaka$p_67=function(){this.$VideoPlayerHTML5Shaka$p_27=!0,this.$VideoPlayerHTML5Shaka$p_86()?this.$VideoPlayerHTML5Shaka$p_87():(this.$VideoPlayerHTML5Shaka$p_19.setResumeAfterBuffering(!0),this.emit("bufferingStart"))},i.$VideoPlayerHTML5Shaka$p_69=function(t){t.progress&&this.emit("bufferingProgress",t.progress)},i.$VideoPlayerHTML5Shaka$p_66=function(){this.emit("seekRangeChanged")},i.$VideoPlayerHTML5Shaka$p_76=function(t){this.emit("initialLiveManifestRequestFailure",{url:t.url,status:t.status})},i.$VideoPlayerHTML5Shaka$p_75=function(t){t.replica!=null&&this.emit("replicaSwitch",{replica:t.replica,url:t.url,status:t.status,timestamp:new Date().valueOf()})},i.$VideoPlayerHTML5Shaka$p_77=function(){this.emit("networkInterrupted")},i.$VideoPlayerHTML5Shaka$p_78=function(){this.emit("networkResumed")},i.$VideoPlayerHTML5Shaka$p_87=function(){this.$VideoPlayerHTML5Shaka$p_26&&!this.$VideoPlayerHTML5Shaka$p_29&&(this.$VideoPlayerHTML5Shaka$p_29=this.$VideoPlayerHTML5Shaka$p_26.getOperationLogger("stream_interrupted").start()),this.$VideoPlayerHTML5Shaka$p_25.setIsLiveInterrupted(!0),this.emit("streamInterrupted")},i.$VideoPlayerHTML5Shaka$p_68=function(){this.$VideoPlayerHTML5Shaka$p_27=!1,this.$VideoPlayerHTML5Shaka$p_29&&(this.$VideoPlayerHTML5Shaka$p_29.log(),this.$VideoPlayerHTML5Shaka$p_29=null),this.$VideoPlayerHTML5Shaka$p_25.setIsLiveInterrupted(!1),this.$VideoPlayerHTML5Shaka$p_10?this.$VideoPlayerHTML5Shaka$p_91():this.emit("bufferingEnd")},i.$VideoPlayerHTML5Shaka$p_70=function(t){var e=t.detail||{},n=e.status!==void 0?e.status:null,o=e.url||null;if(!(e.type==="Hive"&&this.$VideoPlayerHTML5Shaka$p_54&&(this.$VideoPlayerHTML5Shaka$p_88({message:e.message,code:n,severity:1}),r("qex")._("2105")))){this.$VideoPlayerHTML5Shaka$p_92();var a=r("ShakaConstants").strings.block_play_request_http_status_list.split(",");if(this.$VideoPlayerHTML5Shaka$p_11&&n!=null&&a.map(function(e){return parseInt(e,10)}).indexOf(n)!==-1)return this.$VideoPlayerHTML5Shaka$p_14&&(r("dispatchEvent")(this.$VideoPlayerHTML5Shaka$p_1,"playing"),this.$VideoPlayerHTML5Shaka$p_14=!1),this.$VideoPlayerHTML5Shaka$p_93();this.emit("error",{error:("SHAKA_"+e.type).toUpperCase(),message:e.message,httpStatus:n,url:o,stack:e.stack})}},i.getPlayerLoadPromise=function(){return this.$VideoPlayerHTML5Shaka$p_58},i.unload=function(){var e=this;return this.$VideoPlayerHTML5Shaka$p_58?this.$VideoPlayerHTML5Shaka$p_58.then(function(){return e.$VideoPlayerHTML5Shaka$p_94()}).catch(function(){return e.$VideoPlayerHTML5Shaka$p_94()}):this.$VideoPlayerHTML5Shaka$p_94()},i.$VideoPlayerHTML5Shaka$p_94=function(){var e=this;this.$VideoPlayerHTML5Shaka$p_23=this.getSelectedVideoQuality(),this.$VideoPlayerHTML5Shaka$p_22=this.getAvailableVideoQualities(),this.$VideoPlayerHTML5Shaka$p_25?this.$VideoPlayerHTML5Shaka$p_25.isLive()!==null&&(this.$VideoPlayerHTML5Shaka$p_11=this.$VideoPlayerHTML5Shaka$p_25.isLive()):this.$VideoPlayerHTML5Shaka$p_11=!1,this.$VideoPlayerHTML5Shaka$p_7=!0,r("clearInterval")(this.$VideoPlayerHTML5Shaka$p_33),this.$VideoPlayerHTML5Shaka$p_50&&this.$VideoPlayerHTML5Shaka$p_50.stopFixedLatencySync();var t=this.$VideoPlayerHTML5Shaka$p_36;if(t&&(t.unsubscribe(),t.removeAllListeners()),this.$VideoPlayerHTML5Shaka$p_28&&this.$VideoPlayerHTML5Shaka$p_28.unload(),this.$VideoPlayerHTML5Shaka$p_57&&this.$VideoPlayerHTML5Shaka$p_57.logUnload(),this.$VideoPlayerHTML5Shaka$p_45.release(),r("VideoPlayerMemLeakExperiments").www_videos_memleak_on_tv){var n=this.getLocalEstimator();n!=null&&n.destroy!=null&&n.destroy()}return this.$VideoPlayerHTML5Shaka$p_19.unload().catch(function(t){if(!e.$VideoPlayerHTML5Shaka$p_2.getBool("ignore_errors_after_unload",!0))throw t})},i.$VideoPlayerHTML5Shaka$p_79=function(){var e=this,t={shakaConfig:this.$VideoPlayerHTML5Shaka$p_2,performanceLogger:this.$VideoPlayerHTML5Shaka$p_26,enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka$p_5,maxPlayQuality:this.$VideoPlayerHTML5Shaka$p_6,width:this.$VideoPlayerHTML5Shaka$p_17,height:this.$VideoPlayerHTML5Shaka$p_18,resolutionConstraintMaxWidth:this.$VideoPlayerHTML5Shaka$p_44,resolutionConstraintMaxHeight:this.$VideoPlayerHTML5Shaka$p_43,isSpherical:this.$VideoPlayerHTML5Shaka$p_15,initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka$p_3,bandwidthModel:r("VideoPlayerShakaBandwidthEstimator").getBandwidthModel(this.$VideoPlayerHTML5Shaka$p_11),bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka$p_11?r("ShakaConstants").numbers.live_bandwidth_downgrade_target:r("ShakaConstants").numbers.bandwidth_downgrade_target,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka$p_11?this.$VideoPlayerHTML5Shaka$p_2.getNumber("live_bandwidth_upgrade_target",1):this.$VideoPlayerHTML5Shaka$p_2.getNumber("bandwidth_upgrade_target",.9),useNewBandwidthBandLogic:!0,hvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka$p_11?r("ShakaConstants").numbers.live_hvq_upgrade_aggressiveness:r("ShakaConstants").numbers.hvq_upgrade_aggressiveness,hvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka$p_11?r("ShakaConstants").numbers.live_hvq_inline_upgrade_aggressiveness:r("ShakaConstants").numbers.hvq_inline_upgrade_aggressiveness,preHvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka$p_11?r("ShakaConstants").numbers.live_pre_hvq_upgrade_aggressiveness:r("ShakaConstants").numbers.pre_hvq_upgrade_aggressiveness,preHvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka$p_11?r("ShakaConstants").numbers.live_pre_hvq_inline_upgrade_aggressiveness:r("ShakaConstants").numbers.pre_hvq_inline_upgrade_aggressiveness,video:this.$VideoPlayerHTML5Shaka$p_1,videoID:this.$VideoPlayerHTML5Shaka$p_4,getSource:this.$VideoPlayerHTML5Shaka$p_20,enableReinforcementLearning:!1,rlModelId:r("ShakaConstants").numbers.rl_model_id,rlUseShortFeatures:!1,useStrictTrackDimensionsExclusionLogic:!0,videoWatchTimeTracker:this.$VideoPlayerHTML5Shaka$p_40,chosenVideoTrackChangedCallback:function(n){e.$VideoPlayerHTML5Shaka$p_19.dispatchEventExtern({type:"bitrateswitch",data:n})}};return new(r("CustomAbrManager"))(t)},i.$VideoPlayerHTML5Shaka$p_95=function(){var e=this;if(!this.$VideoPlayerHTML5Shaka$p_2.getBool("enable_content_protection",!1))return null;var t=this.$VideoPlayerHTML5Shaka$p_4,n=null,o=!1,a=null,i=null,l=!0,s=null;this.$VideoPlayerHTML5Shaka$p_26&&(n=this.$VideoPlayerHTML5Shaka$p_26.getOperationLogger("request").setType("license")),this.$VideoPlayerHTML5Shaka$p_47!=null&&this.$VideoPlayerHTML5Shaka$p_48!==null&&this.$VideoPlayerHTML5Shaka$p_48!==void 0?(a=encodeURI(this.$VideoPlayerHTML5Shaka$p_47+"&access_token="+this.$VideoPlayerHTML5Shaka$p_48),o=!0,l=!1):"0"in this.$VideoPlayerHTML5Shaka$p_46?a=this.$VideoPlayerHTML5Shaka$p_46[0]:a="/video/drm/getlicense?video_id="+t,"PLAYREADY"in this.$VideoPlayerHTML5Shaka$p_46&&(i=this.$VideoPlayerHTML5Shaka$p_46.PLAYREADY);var _=function(t){if("body"in t&&delete t.body,"url"in t&&t.url.search("access_token=")!==-1)try{var e=new(u||(u=r("URI")))(t.url);e!=null?(e.removeQueryData(["access_token"]),t.url=e.toString()):delete t.url}catch(e){delete t.url}return JSON.stringify(t)},f=function(t){n&&n.start();var e="";if(t.key_system===p?e=window.btoa(t.body):e=window.btoa(String.fromCharCode.apply(null,new Uint8Array(t.body))),o){var r={request:e};t.body=JSON.stringify(r),t.headers["Content-Type"]="application/json"}else t.body=e,t.headers["Content-Type"]="application/text";t.method="POST"},g=function(t){var e=null,r=String.fromCharCode.apply(null,t),o=null,a=null,i;try{i=JSON.parse(r)}catch(e){i=void 0}if(i!==void 0&&i.data!==void 0&&i.data.length===1){var l=i.data[0];l.error!=null?a=_(l.error):o=l.license}else o=r;if(o!==null&&o!==""){var s=window.atob(o);s!==null&&s!==""&&(e=new Uint8Array(s.split("").map(function(e){return e.charCodeAt(0)})))}if(n){a!==null&&n.setError(a);var u=e!==null?"success":"failed";n.setResult(u).log()}return e},h=function(t){var e=null;return t===c?e=d:t===m&&(e=p),e},y=function(t){return t===c?a:t===m?i:""};return function(t,n){e.$VideoPlayerHTML5Shaka$p_16=!0;var r=null;if(e.$VideoPlayerHTML5Shaka$p_49!=null&&e.$VideoPlayerHTML5Shaka$p_49!==""){var o=window.atob(e.$VideoPlayerHTML5Shaka$p_49);r=new Uint8Array(o.split("").map(function(e){return e.charCodeAt(0)}))}s=h(t);var a=y(t);return s!==null&&a!==null&&a!==""?[{keySystem:s,licenseServerUrl:a,withCredentials:l,licensePreProcessor:f,licensePostProcessor:g,videoRobustness:"",audioRobustness:"",serverCertificate:r}]:null}},i.$VideoPlayerHTML5Shaka$p_96=function(){var e=this,t={onRequestSend:function(n,r,o){e.$VideoPlayerHTML5Shaka$p_19.dispatchEventExtern({type:"segmentrequestfinished",data:{failed:!n,mimeType:r,bytes:o||0}})}};return this.$VideoPlayerHTML5Shaka$p_19.getRequestPromise&&(t.createPromise=function(t,n){var r=e.$VideoPlayerHTML5Shaka$p_54;if(r&&(r.tech==="HiveJS"||r.tech==="StatsJS")){if(e.$VideoPlayerHTML5Shaka$p_19.getRequestPromise!=null)return e.$VideoPlayerHTML5Shaka$p_19.getRequestPromise(t,n);e.$VideoPlayerHTML5Shaka$p_57&&e.$VideoPlayerHTML5Shaka$p_57.logMissingGetRequestPromise()}return null}),t},i.$VideoPlayerHTML5Shaka$p_80=function(){this.$VideoPlayerHTML5Shaka$p_39||s(0,5841),this.$VideoPlayerHTML5Shaka$p_34||s(0,5842);var e=null,t=this.$VideoPlayerHTML5Shaka$p_34,n=this.$VideoPlayerHTML5Shaka$p_54;n&&(e=this.$VideoPlayerHTML5Shaka$p_96(),t=r("nullthrows")(this.$VideoPlayerHTML5Shaka$p_54).manifest);var o=new(r("Shaka")).player.DashVideoSource(t,this.$VideoPlayerHTML5Shaka$p_2,this.$VideoPlayerHTML5Shaka$p_95(),_,this.$VideoPlayerHTML5Shaka$p_39,this.$VideoPlayerHTML5Shaka$p_50,e);return this.$VideoPlayerHTML5Shaka$p_21=new(r("TaggedTimeRanges"))(function(e,t){return e.id===t.id&&e.reason===t.reason}),o.setTaggedTimeRanges(this.$VideoPlayerHTML5Shaka$p_21),n&&this.$VideoPlayerHTML5Shaka$p_57&&this.$VideoPlayerHTML5Shaka$p_57.logCreatedP2PVideoSource(),o},i.$VideoPlayerHTML5Shaka$p_97=function(t){var e=this;return this.$VideoPlayerHTML5Shaka$p_39=this.$VideoPlayerHTML5Shaka$p_79(),this.$VideoPlayerHTML5Shaka$p_25=this.$VideoPlayerHTML5Shaka$p_80(),this.$VideoPlayerHTML5Shaka$p_86()&&(this.$VideoPlayerHTML5Shaka$p_9=this.$VideoPlayerHTML5Shaka$p_19.getPlaybackRate(),this.$VideoPlayerHTML5Shaka$p_1.playbackRate=0,this.emit("streamInterrupted")),this.$VideoPlayerHTML5Shaka$p_19.setPlaybackStartTime(t),this.$VideoPlayerHTML5Shaka$p_7=!1,this.$VideoPlayerHTML5Shaka$p_58=this.$VideoPlayerHTML5Shaka$p_19.load(this.$VideoPlayerHTML5Shaka$p_25).then(function(){if(e.$VideoPlayerHTML5Shaka$p_58=null,e.$VideoPlayerHTML5Shaka$p_11!=e.$VideoPlayerHTML5Shaka$p_25.isLive())return e.$VideoPlayerHTML5Shaka$p_93();e.$VideoPlayerHTML5Shaka$p_24&&e.setPreferredVideoQuality(e.$VideoPlayerHTML5Shaka$p_24),e.$VideoPlayerHTML5Shaka$p_23=null,e.$VideoPlayerHTML5Shaka$p_22=o("VideoPlayerQualitiesArray").ensureVideoPlayerQualitiesArray([])}).catch(function(t){throw e.$VideoPlayerHTML5Shaka$p_58=null,t}),this.$VideoPlayerHTML5Shaka$p_58},i.$VideoPlayerHTML5Shaka$p_98=function(t){if(!(this.$VideoPlayerHTML5Shaka$p_7&&this.$VideoPlayerHTML5Shaka$p_2.getBool("ignore_errors_after_unload",!0)))throw t},i.reload=function(r){var t=this;if(!this.$VideoPlayerHTML5Shaka$p_7)return(e||(e=n("Promise"))).resolve();var o=this.$VideoPlayerHTML5Shaka$p_36;return o&&(o.subscribe(),this.addListenersToLiveStreamState(o)),this.$VideoPlayerHTML5Shaka$p_97(r).catch(function(e){return t.$VideoPlayerHTML5Shaka$p_98(e)})},i.setPlaybackRate=function(t){this.$VideoPlayerHTML5Shaka$p_9=t,this.$VideoPlayerHTML5Shaka$p_86()||this.$VideoPlayerHTML5Shaka$p_19.setPlaybackRate(t)},i.getPlaybackRate=function(){return this.$VideoPlayerHTML5Shaka$p_19.getPlaybackRate()},i.setVideoStreamOffset=function(t){this.$VideoPlayerHTML5Shaka$p_19.setVideoStreamOffset(t)},i.$VideoPlayerHTML5Shaka$p_93=function(){r("dispatchEvent")(this.$VideoPlayerHTML5Shaka$p_1,"seeked"),r("dispatchEvent")(this.$VideoPlayerHTML5Shaka$p_1,"playing"),r("dispatchCustomEvent")(this.$VideoPlayerHTML5Shaka$p_1,"pause",r("dangerouslyOverrideMediaElementEndedProperty")()),r("dispatchEvent")(this.$VideoPlayerHTML5Shaka$p_1,"ended"),this.emit("streamResumed"),this.unload()},i.getLongestInitResponseTime=function(){return this.$VideoPlayerHTML5Shaka$p_25.getLongestInitResponseTime()},i.getLocalEstimator=function(){return this.$VideoPlayerHTML5Shaka$p_25.getLocalEstimator()},i.setDimensions=function(t,n){this.$VideoPlayerHTML5Shaka$p_17=t,this.$VideoPlayerHTML5Shaka$p_18=n,this.$VideoPlayerHTML5Shaka$p_39.setDimensions(t,n)},a.isSupported=function(t){return r("Shaka").player.Player.isBrowserSupported()},i.$VideoPlayerHTML5Shaka$p_72=function(){this.emit("tracksChanged")},i.$VideoPlayerHTML5Shaka$p_71=function(t){t.contentType==="video"&&(this.$VideoPlayerHTML5Shaka$p_26&&this.$VideoPlayerHTML5Shaka$p_26.setRepresentationID(t.id),this.$VideoPlayerHTML5Shaka$p_26&&this.$VideoPlayerHTML5Shaka$p_26.setDynamicBitrate(t.bandwidth),this.emit("adaptation",{reason:t.reason}))},i.$VideoPlayerHTML5Shaka$p_85=function(t){this.$VideoPlayerHTML5Shaka$p_8=t},i.$VideoPlayerHTML5Shaka$p_74=function(){this.$VideoPlayerHTML5Shaka$p_86()&&this.$VideoPlayerHTML5Shaka$p_91()},i.$VideoPlayerHTML5Shaka$p_91=function(){this.$VideoPlayerHTML5Shaka$p_8=null,this.$VideoPlayerHTML5Shaka$p_10=!1,this.$VideoPlayerHTML5Shaka$p_25.forceResyncVideoBuffer(),this.$VideoPlayerHTML5Shaka$p_19.setPlaybackRate(this.$VideoPlayerHTML5Shaka$p_9),this.emit("streamResumed")},i.$VideoPlayerHTML5Shaka$p_73=function(){var e=this,t=this.$VideoPlayerHTML5Shaka$p_26?this.$VideoPlayerHTML5Shaka$p_26.getOperationLogger("manifest_wrapped").setResource(this.$VideoPlayerHTML5Shaka$p_42).start():null,n=!this.$VideoPlayerHTML5Shaka$p_1.paused;this.unload(),this.reload().then(function(){e.$VideoPlayerHTML5Shaka$p_10&&e.$VideoPlayerHTML5Shaka$p_91(),n&&e.play(),t&&t.log()}).catch(function(e){t&&t.setError(e).log()})},i.$VideoPlayerHTML5Shaka$p_62=function(){this.$VideoPlayerHTML5Shaka$p_14=!1,this.$VideoPlayerHTML5Shaka$p_30&&(this.$VideoPlayerHTML5Shaka$p_30=!1),this.$VideoPlayerHTML5Shaka$p_19.setPendingPlayRequest(!1),this.$VideoPlayerHTML5Shaka$p_57&&this.$VideoPlayerHTML5Shaka$p_57.resumeStatsLogging()},i.$VideoPlayerHTML5Shaka$p_65=function(){this.$VideoPlayerHTML5Shaka$p_14=!0,this.$VideoPlayerHTML5Shaka$p_52&&this.$VideoPlayerHTML5Shaka$p_12&&this.$VideoPlayerHTML5Shaka$p_54==null&&this.$VideoPlayerHTML5Shaka$p_53&&this.$VideoPlayerHTML5Shaka$p_53.delay_p2p_until_play&&this.$VideoPlayerHTML5Shaka$p_81()},i.$VideoPlayerHTML5Shaka$p_64=function(){this.$VideoPlayerHTML5Shaka$p_14&&(this.$VideoPlayerHTML5Shaka$p_14=!1,this.$VideoPlayerHTML5Shaka$p_19.setPendingPlayRequest(!1)),this.$VideoPlayerHTML5Shaka$p_57&&this.$VideoPlayerHTML5Shaka$p_57.pauseStatsLogging()},i.$VideoPlayerHTML5Shaka$p_99=function(t){this.$VideoPlayerHTML5Shaka$p_25&&(this.$VideoPlayerHTML5Shaka$p_34=r("Shaka").dash.mpd.parseMpd(t),this.$VideoPlayerHTML5Shaka$p_7||(this.$VideoPlayerHTML5Shaka$p_31=Date.now(),this.$VideoPlayerHTML5Shaka$p_25.updateManifest(this.$VideoPlayerHTML5Shaka$p_34)))},i.refreshDashManifest=function(){var e=this;this.unload();var t=r("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka$p_4);return t.then(function(t){e.$VideoPlayerHTML5Shaka$p_99(t.getDashManifest())})},i.$VideoPlayerHTML5Shaka$p_92=function(){r("clearInterval")(this.$VideoPlayerHTML5Shaka$p_33)},i.$VideoPlayerHTML5Shaka$p_100=function(t){var e=t[0];if(e)if(e.startTime+.5<e.endTime)e.startTime+=.5;else return t.splice(0,1),this.$VideoPlayerHTML5Shaka$p_100(t);return t},i.getSeekableRanges=function(){var e=this.$VideoPlayerHTML5Shaka$p_19.getVideoSourceStreamLimits();if(e&&e.seekRangeGaps){var t=r("getVideoPlayerShakaSeekableRanges")(e);return new(r("TimeRanges"))(this.$VideoPlayerHTML5Shaka$p_100(t))}return null},i.setEnableLiveheadCatchup=function(t){this.$VideoPlayerHTML5Shaka$p_19.setEnableLiveheadCatchup(t)},i.isLiveheadCatchupEnabled=function(){return this.$VideoPlayerHTML5Shaka$p_19.isLiveheadCatchupEnabled()},i.$VideoPlayerHTML5Shaka$p_101=function(){return this.$VideoPlayerHTML5Shaka$p_25?this.$VideoPlayerHTML5Shaka$p_25.getManifest():null},i.isFBWasLive=function(){var e=this.$VideoPlayerHTML5Shaka$p_101();return!!(e&&e.FBWasLive)},i.isFBIsLiveTemplated=function(){var e=this.$VideoPlayerHTML5Shaka$p_101();return!!(e&&e.FBIsLiveTemplated)},i.isFBMS=function(){var e=this.$VideoPlayerHTML5Shaka$p_101();return!!(e&&e.FBMS)},i.ispDASH=function(){return!1},i.getFbManifestIdentifier=function(){var e=this.$VideoPlayerHTML5Shaka$p_101();return e?e.FBManifestIdentifier:""},i.getPlayerVersion=function(){return"pleasantville"},i.switchReplicaSet=function(t){var e=new(u||(u=r("URI")))(this.$VideoPlayerHTML5Shaka$p_34);e.addQueryData("replica",t),this.$VideoPlayerHTML5Shaka$p_34=e.toString()},i.getManifestUrl=function(){return this.$VideoPlayerHTML5Shaka$p_34},i.getBandwidthEstimate=function(){return a.getEstimatedBandwidth()},i.isDashPerfLoggingEnabled=function(){return this.$VideoPlayerHTML5Shaka$p_26!=null},a})(r("EventEmitter"));l.default=g}),98);